"use strict";(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{6304:(mt,Ae,L)=>{L.d(Ae,{Dh:()=>xe,GT:()=>ve,cc:()=>Ne,hO:()=>Le,on:()=>z,pX:()=>ae,xv:()=>we});var f=L(5879),H=L(7142),O=L(8186);mt=L.hmd(mt);const J=["ngOnDestroy"],ae=(Fe,Ct,ht,re={})=>new Proxy(Fe,{get:(De,ue)=>ht.runOutsideAngular(()=>{var ye;if(Fe[ue])return!(null===(ye=re?.spy)||void 0===ye)&&ye.get&&re.spy.get(ue,Fe[ue]),Fe[ue];if(J.indexOf(ue)>-1)return()=>{};const ke=Ct.toPromise().then(te=>{const nt=te&&te[ue];return"function"==typeof nt?nt.bind(te):nt&&nt.then?nt.then(Ge=>ht.run(()=>Ge)):ht.run(()=>nt)});return new Proxy(()=>{},{get:(te,nt)=>ke[nt],apply:(te,nt,Ge)=>ke.then(tn=>{var fr;const Xr=tn&&tn(...Ge);return!(null===(fr=re?.spy)||void 0===fr)&&fr.apply&&re.spy.apply(ue,Ge,Xr),Xr})})})}),ve=(Fe,Ct)=>{Ct.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(re=>{Object.defineProperty(Fe.prototype,re,Object.getOwnPropertyDescriptor(ht.prototype||ht,re))})})};class Ee{constructor(Ct){return Ct}}const xe=new f.OlP("angularfire2.app.options"),we=new f.OlP("angularfire2.app.name");function z(Fe,Ct,ht){const De="object"==typeof ht&&ht||{};De.name=De.name||"string"==typeof ht&&ht||"[DEFAULT]";const ye=H.Z.apps.filter(ke=>ke&&ke.name===De.name)[0]||Ct.runOutsideAngular(()=>H.Z.initializeApp(Fe,De));try{JSON.stringify(Fe)!==JSON.stringify(ye.options)&&q("error",`${ye.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(ye)}const q=(Fe,...Ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Fe](...Ct)},ie={provide:Ee,useFactory:z,deps:[xe,f.R0b,[new f.FiY,we]]};let Le=(()=>{class Fe{constructor(ht){H.Z.registerVersion("angularfire",O.q4.full,"core"),H.Z.registerVersion("angularfire",O.q4.full,"app-compat"),H.Z.registerVersion("angular",f.q4F.full,ht.toString())}static initializeApp(ht,re){return{ngModule:Fe,providers:[{provide:xe,useValue:ht},{provide:we,useValue:re}]}}}return Fe.\u0275fac=function(ht){return new(ht||Fe)(f.LFG(f.Lbi))},Fe.\u0275mod=f.oAB({type:Fe}),Fe.\u0275inj=f.cJS({providers:[ie]}),Fe})();function Ne(Fe,Ct,ht,re,De){const[,ue,ye]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Fe)||[];if(ue)return function Ke(Fe,Ct){try{return Fe.toString()===Ct.toString()}catch{return Fe===Ct}}(De,ye)||(Ze("error",`${Ct} was already initialized on the ${ht} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:De,was:ye})),ue;{const ke=re();return globalThis.\u0275AngularfireInstanceCache.push([Fe,ke,De]),ke}}const Oe=!!mt.hot,Ze=(Fe,...Ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Fe](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(mt,Ae,L)=>{L.d(Ae,{q4:()=>ed,iC:()=>la,fc:()=>nd,HU:()=>xu,vb:()=>gs,JM:()=>Ru});var f=L(5879),H=L(3182),O=L(5861),J=L(534),ae=L(9058),ve=L(4537),Ee=L(7879);const xe=(I,T)=>T.some(M=>I instanceof M);let we,z;const Le=new WeakMap,Ne=new WeakMap,Ke=new WeakMap,Oe=new WeakMap,Ze=new WeakMap;let ht={get(I,T,M){if(I instanceof IDBTransaction){if("done"===T)return Ne.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Ke.get(I);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ye(I[T])},set:(I,T,M)=>(I[T]=M,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function ue(I){return"function"==typeof I?function De(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(ke(this),T),ye(Le.get(this))}:function(...T){return ye(I.apply(ke(this),T))}:function(T,...M){const B=I.call(ke(this),T,...M);return Ke.set(B,T.sort?T.sort():[T]),ye(B)}}(I):(I instanceof IDBTransaction&&function Ct(I){if(Ne.has(I))return;const T=new Promise((M,B)=>{const K=()=>{I.removeEventListener("complete",X),I.removeEventListener("error",ge),I.removeEventListener("abort",ge)},X=()=>{M(),K()},ge=()=>{B(I.error||new DOMException("AbortError","AbortError")),K()};I.addEventListener("complete",X),I.addEventListener("error",ge),I.addEventListener("abort",ge)});Ne.set(I,T)}(I),xe(I,function q(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ht):I)}function ye(I){if(I instanceof IDBRequest)return function Fe(I){const T=new Promise((M,B)=>{const K=()=>{I.removeEventListener("success",X),I.removeEventListener("error",ge)},X=()=>{M(ye(I.result)),K()},ge=()=>{B(I.error),K()};I.addEventListener("success",X),I.addEventListener("error",ge)});return T.then(M=>{M instanceof IDBCursor&&Le.set(M,I)}).catch(()=>{}),Ze.set(T,I),T}(I);if(Oe.has(I))return Oe.get(I);const T=ue(I);return T!==I&&(Oe.set(I,T),Ze.set(T,I)),T}const ke=I=>Ze.get(I),Ge=["get","getKey","getAll","getAllKeys","count"],tn=["put","add","delete","clear"],fr=new Map;function Xr(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(fr.get(T))return fr.get(T);const M=T.replace(/FromIndex$/,""),B=T!==M,K=tn.includes(M);if(!(M in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!Ge.includes(M))return;const X=function(){var ge=(0,O.Z)(function*(Qe,...ze){const lt=this.transaction(Qe,K?"readwrite":"readonly");let kt=lt.store;return B&&(kt=kt.index(ze.shift())),(yield Promise.all([kt[M](...ze),K&&lt.done]))[0]});return function(ze){return ge.apply(this,arguments)}}();return fr.set(T,X),X}!function re(I){ht=I(ht)}(I=>({...I,get:(T,M,B)=>Xr(T,M)||I.get(T,M,B),has:(T,M)=>!!Xr(T,M)||I.has(T,M)}));const Rs="@firebase/installations",Rn="0.6.4",xi=1e4,Ks=`w:${Rn}`,he="FIS_v2",me="https://firebaseinstallations.googleapis.com/v1",be=36e5,Je=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ut(I){return I instanceof ae.ZR&&I.code.includes("request-failed")}function fn({projectId:I}){return`${me}/projects/${I}/installations`}function At(I){return{token:I.token,requestStatus:2,expiresIn:tr(I.expiresIn),creationTime:Date.now()}}function an(I,T){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(I,T){const B=(yield T.json()).error;return Je.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function gn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function On(I){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function tr(I){return Number(I.replace("s","000"))}function Rr(){return(Rr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:M}){const B=fn(I),K=gn(I),X=T.getImmediate({optional:!0});if(X){const lt=yield X.getHeartbeatsHeader();lt&&K.append("x-firebase-client",lt)}const Qe={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:he,appId:I.appId,sdkVersion:Ks})},ze=yield On(()=>fetch(B,Qe));if(ze.ok){const lt=yield ze.json();return{fid:lt.fid||M,registrationStatus:2,refreshToken:lt.refreshToken,authToken:At(lt.authToken)}}throw yield an("Create Installation",ze)})).apply(this,arguments)}function qn(I){return new Promise(T=>{setTimeout(T,I)})}const xs=/^[cdef][\w-]{21}$/,Ye="";function ft(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function wt(I){return function Jr(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return xs.test(M)?M:Ye}catch{return Ye}}function Xt(I){return`${I.appName}!${I.appId}`}const lr=new Map;function gi(I,T){const M=Xt(I);as(M,T),function mn(I,T){const M=function Ft(){return!jr&&"BroadcastChannel"in self&&(jr=new BroadcastChannel("[Firebase] FID Change"),jr.onmessage=I=>{as(I.data.key,I.data.fid)}),jr}();M&&M.postMessage({key:I,fid:T}),function kn(){0===lr.size&&jr&&(jr.close(),jr=null)}()}(M,T)}function as(I,T){const M=lr.get(I);if(M)for(const B of M)B(T)}let jr=null;const Zi="firebase-installations-database",Ns=1,xr="firebase-installations-store";let Kn=null;function Dn(){return Kn||(Kn=function te(I,T,{blocked:M,upgrade:B,blocking:K,terminated:X}={}){const ge=indexedDB.open(I,T),Qe=ye(ge);return B&&ge.addEventListener("upgradeneeded",ze=>{B(ye(ge.result),ze.oldVersion,ze.newVersion,ye(ge.transaction))}),M&&ge.addEventListener("blocked",()=>M()),Qe.then(ze=>{X&&ze.addEventListener("close",()=>X()),K&&ze.addEventListener("versionchange",()=>K())}).catch(()=>{}),Qe}(Zi,Ns,{upgrade:(I,T)=>{0===T&&I.createObjectStore(xr)}})),Kn}function rr(I,T){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(I,T){const M=Xt(I),K=(yield Dn()).transaction(xr,"readwrite"),X=K.objectStore(xr),ge=yield X.get(M);return yield X.put(T,M),yield K.done,(!ge||ge.fid!==T.fid)&&gi(I,T.fid),T})).apply(this,arguments)}function cr(I){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(I){const T=Xt(I),B=(yield Dn()).transaction(xr,"readwrite");yield B.objectStore(xr).delete(T),yield B.done})).apply(this,arguments)}function ei(I,T){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,O.Z)(function*(I,T){const M=Xt(I),K=(yield Dn()).transaction(xr,"readwrite"),X=K.objectStore(xr),ge=yield X.get(M),Qe=T(ge);return void 0===Qe?yield X.delete(M):yield X.put(Qe,M),yield K.done,Qe&&(!ge||ge.fid!==Qe.fid)&&gi(I,Qe.fid),Qe})).apply(this,arguments)}function W(I){return G.apply(this,arguments)}function G(){return G=(0,O.Z)(function*(I){let T;const M=yield ei(I.appConfig,B=>{const K=function F(I){return yt(I||{fid:ft(),registrationStatus:0})}(B),X=function V(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function P(I,T){return ee.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ie(I)}:{installationEntry:T}}(I,K);return T=X.registrationPromise,X.installationEntry});return M.fid===Ye?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}}),G.apply(this,arguments)}function ee(){return ee=(0,O.Z)(function*(I,T){try{const M=yield function Ki(I,T){return Rr.apply(this,arguments)}(I,T);return rr(I.appConfig,M)}catch(M){throw ut(M)&&409===M.customData.serverCode?yield cr(I.appConfig):yield rr(I.appConfig,{fid:T.fid,registrationStatus:0}),M}}),ee.apply(this,arguments)}function Ie(I){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(I){let T=yield Et(I.appConfig);for(;1===T.registrationStatus;)yield qn(100),T=yield Et(I.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield W(I);return B||M}return T})).apply(this,arguments)}function Et(I){return ei(I,T=>{if(!T)throw Je.create("installation-not-found");return yt(T)})}function yt(I){return function pt(I){return 1===I.registrationStatus&&I.registrationTime+xi<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function wn(){return(wn=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},M){const B=function Bt(I,{fid:T}){return`${fn(I)}/${T}/authTokens:generate`}(I,M),K=function Hn(I,{refreshToken:T}){const M=gn(I);return M.append("Authorization",function Ni(I){return`${he} ${I}`}(T)),M}(I,M),X=T.getImmediate({optional:!0});if(X){const lt=yield X.getHeartbeatsHeader();lt&&K.append("x-firebase-client",lt)}const Qe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Ks,appId:I.appId}})},ze=yield On(()=>fetch(B,Qe));if(ze.ok)return At(yield ze.json());throw yield an("Generate Auth Token",ze)})).apply(this,arguments)}function Er(I){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,O.Z)(function*(I,T=!1){let M;const B=yield ei(I.appConfig,X=>{if(!Gt(X))throw Je.create("not-registered");const ge=X.authToken;if(!T&&function sn(I){return 2===I.requestStatus&&!function Ir(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+be}(I)}(ge))return X;if(1===ge.requestStatus)return M=function _e(I,T){return oe.apply(this,arguments)}(I,T),X;{if(!navigator.onLine)throw Je.create("app-offline");const Qe=function Zn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}(X);return M=function _t(I,T){return xt.apply(this,arguments)}(I,Qe),Qe}});return M?yield M:B.authToken}),Nr.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*(I,T){let M=yield Ve(I.appConfig);for(;1===M.authToken.requestStatus;)yield qn(100),M=yield Ve(I.appConfig);const B=M.authToken;return 0===B.requestStatus?Er(I,T):B})).apply(this,arguments)}function Ve(I){return ei(I,T=>{if(!Gt(T))throw Je.create("not-registered");return function vo(I){return 1===I.requestStatus&&I.requestTime+xi<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xt(){return xt=(0,O.Z)(function*(I,T){try{const M=yield function Rt(I,T){return wn.apply(this,arguments)}(I,T),B=Object.assign(Object.assign({},T),{authToken:M});return yield rr(I.appConfig,B),M}catch(M){if(!ut(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield rr(I.appConfig,B)}else yield cr(I.appConfig);throw M}}),xt.apply(this,arguments)}function Gt(I){return void 0!==I&&2===I.registrationStatus}function du(){return(du=(0,O.Z)(function*(I){const T=I,{installationEntry:M,registrationPromise:B}=yield W(T);return B?B.catch(console.error):Er(T).catch(console.error),M.fid})).apply(this,arguments)}function mi(){return mi=(0,O.Z)(function*(I,T=!1){const M=I;return yield function wo(I){return Ko.apply(this,arguments)}(M),(yield Er(M,T)).token}),mi.apply(this,arguments)}function Ko(){return(Ko=(0,O.Z)(function*(I){const{registrationPromise:T}=yield W(I);T&&(yield T)})).apply(this,arguments)}function Ra(I){return Je.create("missing-app-config-values",{valueName:I})}const Ic="installations",fu=I=>{const T=I.getProvider("app").getImmediate(),M=function hl(I){if(!I||!I.options)throw Ra("App Configuration");if(!I.name)throw Ra("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!I.options[M])throw Ra(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,J._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},pu=I=>{const T=I.getProvider("app").getImmediate(),M=(0,J._getProvider)(T,Ic).getImmediate();return{getId:()=>function qo(I){return du.apply(this,arguments)}(M),getToken:K=>function hh(I){return mi.apply(this,arguments)}(M,K)}};(function ph(){(0,J._registerComponent)(new ve.wA(Ic,fu,"PUBLIC")),(0,J._registerComponent)(new ve.wA("installations-internal",pu,"PRIVATE"))})(),(0,J.registerVersion)(Rs,Rn),(0,J.registerVersion)(Rs,Rn,"esm2017");const fl="@firebase/remote-config",vn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _u{constructor(T,M,B,K){this.client=T,this.storage=M,this.storageCache=B,this.logger=K}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,K=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${K}.`),K}fetch(T){var M=this;return(0,O.Z)(function*(){const[B,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(T.cacheMaxAgeMillis,B))return K;T.eTag=K&&K.eTag;const X=yield M.client.fetch(T),ge=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&ge.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(ge),X})()}}function ml(I=navigator){return I.languages&&I.languages[0]||I.language}class Eo{constructor(T,M,B,K,X,ge){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=B,this.projectId=K,this.apiKey=X,this.appId=ge}fetch(T){var M=this;return(0,O.Z)(function*(){const[B,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ge=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ze={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:K,app_id:M.appId,language_code:ml()},lt={method:"POST",headers:Qe,body:JSON.stringify(ze)},kt=fetch(ge,lt),Nt=new Promise((ai,ko)=>{T.signal.addEventListener(()=>{const Pu=new Error("The operation was aborted.");Pu.name="AbortError",ko(Pu)})});let Wr;try{yield Promise.race([kt,Nt]),Wr=yield kt}catch(ai){let ko="fetch-client-network";throw"AbortError"===ai?.name&&(ko="fetch-timeout"),vn.create(ko,{originalErrorMessage:ai?.message})}let Un=Wr.status;const ca=Wr.headers.get("ETag")||void 0;let to,Wa;if(200===Wr.status){let ai;try{ai=yield Wr.json()}catch(ko){throw vn.create("fetch-client-parse",{originalErrorMessage:ko?.message})}to=ai.entries,Wa=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===Wa?Un=500:"NO_CHANGE"===Wa?Un=304:("NO_TEMPLATE"===Wa||"EMPTY_CONFIG"===Wa)&&(to={}),304!==Un&&200!==Un)throw vn.create("fetch-status",{httpStatus:Un});return{status:Un,eTag:ca,config:to}})()}}class Yo{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,O.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:B}){var K=this;return(0,O.Z)(function*(){yield function xn(I,T){return new Promise((M,B)=>{const K=Math.max(T-Date.now(),0),X=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(X),B(vn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const X=yield K.client.fetch(T);return yield K.storage.deleteThrottleMetadata(),X}catch(X){if(!function _l(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const ge={throttleEndTimeMillis:Date.now()+(0,ae.$s)(B),backoffCount:B+1};return yield K.storage.setThrottleMetadata(ge),K.attemptFetch(T,ge)}})()}}class yl{constructor(T,M,B,K,X){this.app=T,this._client=M,this._storageCache=B,this._storage=K,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Or(I,T){const M=I.target.error||void 0;return vn.create(T,{originalErrorMessage:M&&M?.message})}const ri="app_namespace_store";class mp{constructor(T,M,B,K=function on(){return new Promise((I,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{T(Or(B,"storage-open"))},M.onsuccess=B=>{I(B.target.result)},M.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ri,{keyPath:"compositeKey"})}}catch(M){T(vn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=T,this.appName=M,this.namespace=B,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((K,X)=>{const Qe=B.transaction([ri],"readonly").objectStore(ri),ze=M.createCompositeKey(T);try{const lt=Qe.get(ze);lt.onerror=kt=>{X(Or(kt,"storage-get"))},lt.onsuccess=kt=>{const Nt=kt.target.result;K(Nt?Nt.value:void 0)}}catch(lt){X(vn.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(T,M){var B=this;return(0,O.Z)(function*(){const K=yield B.openDbPromise;return new Promise((X,ge)=>{const ze=K.transaction([ri],"readwrite").objectStore(ri),lt=B.createCompositeKey(T);try{const kt=ze.put({compositeKey:lt,value:M});kt.onerror=Nt=>{ge(Or(Nt,"storage-set"))},kt.onsuccess=()=>{X()}}catch(kt){ge(vn.create("storage-set",{originalErrorMessage:kt?.message}))}})})()}delete(T){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((K,X)=>{const Qe=B.transaction([ri],"readwrite").objectStore(ri),ze=M.createCompositeKey(T);try{const lt=Qe.delete(ze);lt.onerror=kt=>{X(Or(kt,"storage-delete"))},lt.onsuccess=()=>{K()}}catch(lt){X(vn.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Os{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const M=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),K=T.storage.getActiveConfig(),X=yield M;X&&(T.lastFetchStatus=X);const ge=yield B;ge&&(T.lastSuccessfulFetchTimestampMillis=ge);const Qe=yield K;Qe&&(T.activeConfig=Qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Pa(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,O.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Qo(){(0,J._registerComponent)(new ve.wA("remote-config",function I(T,{instanceIdentifier:M}){const B=T.getProvider("app").getImmediate(),K=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vn.create("registration-window");if(!(0,ae.hl)())throw vn.create("indexed-db-unavailable");const{projectId:X,apiKey:ge,appId:Qe}=B.options;if(!X)throw vn.create("registration-project-id");if(!ge)throw vn.create("registration-api-key");if(!Qe)throw vn.create("registration-app-id");const ze=new mp(Qe,B.name,M=M||"firebase"),lt=new Os(ze),kt=new Ee.Yd(fl);kt.logLevel=Ee.in.ERROR;const Nt=new Eo(K,J.SDK_VERSION,M,X,ge,Qe),Wr=new Yo(Nt,ze),Un=new _u(Wr,ze,lt,kt),ca=new yl(B,Un,lt,ze,kt);return function Lt(I){const T=(0,ae.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ca),ca},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(fl,"0.4.4"),(0,J.registerVersion)(fl,"0.4.4","esm2017")}();const kr=(I,T)=>T.some(M=>I instanceof M);let yu,Hr;const cs=new WeakMap,Io=new WeakMap,Tn=new WeakMap,ka=new WeakMap,_h=new WeakMap;let Sc={get(I,T,M){if(I instanceof IDBTransaction){if("done"===T)return Io.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Tn.get(I);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ks(I[T])},set:(I,T,M)=>(I[T]=M,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function yh(I){return"function"==typeof I?function Wm(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bc(){return Hr||(Hr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Ac(this),T),ks(cs.get(this))}:function(...T){return ks(I.apply(Ac(this),T))}:function(T,...M){const B=I.call(Ac(this),T,...M);return Tn.set(B,T.sort?T.sort():[T]),ks(B)}}(I):(I instanceof IDBTransaction&&function Tc(I){if(Io.has(I))return;const T=new Promise((M,B)=>{const K=()=>{I.removeEventListener("complete",X),I.removeEventListener("error",ge),I.removeEventListener("abort",ge)},X=()=>{M(),K()},ge=()=>{B(I.error||new DOMException("AbortError","AbortError")),K()};I.addEventListener("complete",X),I.addEventListener("error",ge),I.addEventListener("abort",ge)});Io.set(I,T)}(I),kr(I,function $r(){return yu||(yu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Sc):I)}function ks(I){if(I instanceof IDBRequest)return function Dc(I){const T=new Promise((M,B)=>{const K=()=>{I.removeEventListener("success",X),I.removeEventListener("error",ge)},X=()=>{M(ks(I.result)),K()},ge=()=>{B(I.error),K()};I.addEventListener("success",X),I.addEventListener("error",ge)});return T.then(M=>{M instanceof IDBCursor&&cs.set(M,I)}).catch(()=>{}),_h.set(T,I),T}(I);if(ka.has(I))return ka.get(I);const T=yh(I);return T!==I&&(ka.set(I,T),_h.set(T,I)),T}const Ac=I=>_h.get(I);function Mc(I,T,{blocked:M,upgrade:B,blocking:K,terminated:X}={}){const ge=indexedDB.open(I,T),Qe=ks(ge);return B&&ge.addEventListener("upgradeneeded",ze=>{B(ks(ge.result),ze.oldVersion,ze.newVersion,ks(ge.transaction))}),M&&ge.addEventListener("blocked",()=>M()),Qe.then(ze=>{X&&ze.addEventListener("close",()=>X()),K&&ze.addEventListener("versionchange",()=>K())}).catch(()=>{}),Qe}function vl(I,{blocked:T}={}){const M=indexedDB.deleteDatabase(I);return T&&M.addEventListener("blocked",()=>T()),ks(M).then(()=>{})}const yp=["get","getKey","getAll","getAllKeys","count"],vh=["put","add","delete","clear"],wh=new Map;function Eh(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(wh.get(T))return wh.get(T);const M=T.replace(/FromIndex$/,""),B=T!==M,K=vh.includes(M);if(!(M in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!yp.includes(M))return;const X=function(){var ge=(0,O.Z)(function*(Qe,...ze){const lt=this.transaction(Qe,K?"readwrite":"readonly");let kt=lt.store;return B&&(kt=kt.index(ze.shift())),(yield Promise.all([kt[M](...ze),K&&lt.done]))[0]});return function(ze){return ge.apply(this,arguments)}}();return wh.set(T,X),X}!function _p(I){Sc=I(Sc)}(I=>({...I,get:(T,M,B)=>Eh(T,M)||I.get(T,M,B),has:(T,M)=>!!Eh(T,M)||I.has(T,M)}));const Rc="/firebase-messaging-sw.js",Ih="/firebase-cloud-messaging-push-scope",wl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xc="https://fcmregistrations.googleapis.com/v1",vp="google.c.a.c_id",Yn="google.c.a.c_l",jv="google.c.a.ts";var bo=(()=>((bo=bo||{}).PUSH_RECEIVED="push-received",bo.NOTIFICATION_CLICKED="notification-clicked",bo))();function _i(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nc(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),K=new Uint8Array(B.length);for(let X=0;X<B.length;++X)K[X]=B.charCodeAt(X);return K}const vu="fcm_token_details_db",wu=5,wp="fcm_token_object_Store";function El(){return El=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(vu))return null;let T=null;return(yield Mc(vu,wu,{upgrade:(B=(0,O.Z)(function*(K,X,ge,Qe){var ze;if(X<2||!K.objectStoreNames.contains(wp))return;const lt=Qe.objectStore(wp),kt=yield lt.index("fcmSenderId").get(I);if(yield lt.clear(),kt)if(2===X){const Nt=kt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;T={token:Nt.fcmToken,createTime:null!==(ze=Nt.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:_i(Nt.vapidKey)}}}else if(3===X){const Nt=kt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:_i(Nt.auth),p256dh:_i(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:_i(Nt.vapidKey)}}}else if(4===X){const Nt=kt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:_i(Nt.auth),p256dh:_i(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:_i(Nt.vapidKey)}}}}),function(X,ge,Qe,ze){return B.apply(this,arguments)})})).close(),yield vl(vu),yield vl("fcm_vapid_details_db"),yield vl("undefined"),function Yi(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var B}),El.apply(this,arguments)}const Il="firebase-messaging-database",Qn=1,Oi="firebase-messaging-store";let Pc=null;function Cl(){return Pc||(Pc=Mc(Il,Qn,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Oi)}})),Pc}function Jo(I){return ea.apply(this,arguments)}function ea(){return ea=(0,O.Z)(function*(I){const T=bh(I),B=yield(yield Cl()).transaction(Oi).objectStore(Oi).get(T);if(B)return B;{const K=yield function Ep(I){return El.apply(this,arguments)}(I.appConfig.senderId);if(K)return yield bl(I,K),K}}),ea.apply(this,arguments)}function bl(I,T){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,O.Z)(function*(I,T){const M=bh(I),K=(yield Cl()).transaction(Oi,"readwrite");return yield K.objectStore(Oi).put(T,M),yield K.done,T})).apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(I){const T=bh(I),B=(yield Cl()).transaction(Oi,"readwrite");yield B.objectStore(Oi).delete(T),yield B.done})).apply(this,arguments)}function bh({appConfig:I}){return I.appId}const br=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hv(I,T){return kc.apply(this,arguments)}function kc(){return(kc=(0,O.Z)(function*(I,T){const M=yield Fa(I),B=Lc(T),K={method:"POST",headers:M,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(Dl(I.appConfig),K)).json()}catch(ge){throw br.create("token-subscribe-failed",{errorInfo:ge?.toString()})}if(X.error)throw br.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw br.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(I,T){const M=yield Fa(I),B=Lc(T.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(`${Dl(I.appConfig)}/${T.token}`,K)).json()}catch(ge){throw br.create("token-update-failed",{errorInfo:ge?.toString()})}if(X.error)throw br.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw br.create("token-update-no-token");return X.token})).apply(this,arguments)}function Cp(I,T){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(I,T){const B={method:"DELETE",headers:yield Fa(I)};try{const X=yield(yield fetch(`${Dl(I.appConfig)}/${T}`,B)).json();if(X.error)throw br.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(K){throw br.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function Dl({projectId:I}){return`${xc}/projects/${I}/registrations`}function Fa(I){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,O.Z)(function*({appConfig:I,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Lc({p256dh:I,auth:T,endpoint:M,vapidKey:B}){const K={web:{endpoint:M,auth:T,p256dh:I}};return B!==wl&&(K.web.applicationPubKey=B),K}const bp=6048e5;function Dh(){return Dh=(0,O.Z)(function*(I){const T=yield function Tl(I,T){return La.apply(this,arguments)}(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:_i(T.getKey("auth")),p256dh:_i(T.getKey("p256dh"))},B=yield Jo(I.firebaseDependencies);if(B){if(function Gr(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}(B.subscriptionOptions,M))return Date.now()>=B.createTime+bp?function ds(I,T){return jc.apply(this,arguments)}(I,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield Cp(I.firebaseDependencies,B.token)}catch(K){console.warn(K)}return ta(I.firebaseDependencies,M)}return ta(I.firebaseDependencies,M)}),Dh.apply(this,arguments)}function Bc(){return Bc=(0,O.Z)(function*(I){const T=yield Jo(I.firebaseDependencies);T&&(yield Cp(I.firebaseDependencies,T.token),yield function Ch(I){return Do.apply(this,arguments)}(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Bc.apply(this,arguments)}function jc(){return jc=(0,O.Z)(function*(I,T){try{const M=yield function Km(I,T){return Eu.apply(this,arguments)}(I.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield bl(I.firebaseDependencies,B),M}catch(M){throw yield function Uc(I){return Bc.apply(this,arguments)}(I),M}}),jc.apply(this,arguments)}function ta(I,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(I,T){const B={token:yield Hv(I,T),createTime:Date.now(),subscriptionOptions:T};return yield bl(I,B),B.token})).apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nc(T)})})).apply(this,arguments)}function Va(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Th(I,T){if(!T.notification)return;I.notification={};const M=T.notification.title;M&&(I.notification.title=M);const B=T.notification.body;B&&(I.notification.body=B);const K=T.notification.image;K&&(I.notification.image=K);const X=T.notification.icon;X&&(I.notification.icon=X)}(T,I),function To(I,T){T.data&&(I.data=T.data)}(T,I),function Qi(I,T){var M,B,K,X,ge;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const Qe=null!==(K=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==K?K:null===(X=T.notification)||void 0===X?void 0:X.click_action;Qe&&(I.fcmOptions.link=Qe);const ze=null===(ge=T.fcmOptions)||void 0===ge?void 0:ge.analytics_label;ze&&(I.fcmOptions.analyticsLabel=ze)}(T,I),T}function Sh(I,T){const M=[];for(let B=0;B<I.length;B++)M.push(I.charAt(B)),B<T.length&&M.push(T.charAt(B));return M.join("")}function Fs(I){return br.create("missing-app-config-values",{valueName:I})}Sh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mh{constructor(T,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Ah(I){if(!I||!I.options)throw Fs("App Configuration Object");if(!I.name)throw Fs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const B of T)if(!M[B])throw Fs(B);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:K,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Sl(){return(Sl=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Rc,{scope:Ih}),I.swRegistration.update().catch(()=>{})}catch(T){throw br.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield function Hc(I){return Sl.apply(this,arguments)}(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw br.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=wl)})).apply(this,arguments)}function Rh(){return Rh=(0,O.Z)(function*(I,T){if(!navigator)throw br.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw br.create("permission-blocked");return yield function Al(I,T){return Mt.apply(this,arguments)}(I,T?.vapidKey),yield function Ua(I,T){return Xi.apply(this,arguments)}(I,T?.serviceWorkerRegistration),function Vc(I){return Dh.apply(this,arguments)}(I)}),Rh.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(I,T,M){const B=function Tp(I){switch(I){case bo.NOTIFICATION_CLICKED:return"notification_open";case bo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[vp],message_name:M[Yn],message_time:M[jv],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hs(){return hs=(0,O.Z)(function*(I,T){const M=T.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===bo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Va(M)):I.onMessageHandler.next(Va(M)));const B=M.data;(function Dp(I){return"object"==typeof I&&!!I&&vp in I})(B)&&"1"===B["google.c.a.e"]&&(yield function Zm(I,T,M){return Gc.apply(this,arguments)}(I,M.messageType,B))}),hs.apply(this,arguments)}const Ml="@firebase/messaging",Sp=I=>{const T=new Mh(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Cu(I,T){return hs.apply(this,arguments)}(T,M)),T},xh=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:B=>function $c(I,T){return Rh.apply(this,arguments)}(T,B)}};function Re(){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ap(){(0,J._registerComponent)(new ve.wA("messaging",Sp,"PUBLIC")),(0,J._registerComponent)(new ve.wA("messaging-internal",xh,"PRIVATE")),(0,J.registerVersion)(Ml,"0.12.4"),(0,J.registerVersion)(Ml,"0.12.4","esm2017")}();const Wc="analytics",Nh="firebase_id",Ph="origin",Fr=6e4,Ls="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nl="https://www.googletagmanager.com/gtag/js",Vn=new Ee.Yd("@firebase/analytics"),gr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function qc(I){if(!I.startsWith(Nl)){const T=gr.create("invalid-gtag-resource",{gtagURL:I});return Vn.warn(T.message),""}return I}function Du(I){return Promise.all(I.map(T=>T.catch(M=>M)))}function So(){return(So=(0,O.Z)(function*(I,T,M,B,K,X){const ge=B[K];try{if(ge)yield T[ge];else{const ze=(yield Du(M)).find(lt=>lt.measurementId===K);ze&&(yield T[ze.appId])}}catch(Qe){Vn.error(Qe)}I("config",K,X)})).apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*(I,T,M,B,K){try{let X=[];if(K&&K.send_to){let ge=K.send_to;Array.isArray(ge)||(ge=[ge]);const Qe=yield Du(M);for(const ze of ge){const lt=Qe.find(Nt=>Nt.measurementId===ze),kt=lt&&T[lt.appId];if(!kt){X=[];break}X.push(kt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),I("event",B,K||{})}catch(X){Vn.error(X)}})).apply(this,arguments)}const Ym=30,Lh=new class Fh{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Qm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Mo(){return(Mo=(0,O.Z)(function*(I){var T;const{appId:M,apiKey:B}=I,K={method:"GET",headers:Qm(B)},X=Ls.replace("{app-id}",M),ge=yield fetch(X,K);if(200!==ge.status&&304!==ge.status){let Qe="";try{const ze=yield ge.json();null!==(T=ze.error)&&void 0!==T&&T.message&&(Qe=ze.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:ge.status,responseMessage:Qe})}return ge.json()})).apply(this,arguments)}function Vh(){return(Vh=(0,O.Z)(function*(I,T=Lh,M){const{appId:B,apiKey:K,measurementId:X}=I.options;if(!B)throw gr.create("no-app-id");if(!K){if(X)return{measurementId:X,appId:B};throw gr.create("no-api-key")}const ge=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Zc;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==M?M:Fr),xp({appId:B,apiKey:K,measurementId:X},ge,Qe,T)})).apply(this,arguments)}function xp(I,T,M){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,O.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:M},B,K=Lh){var X;const{appId:ge,measurementId:Qe}=I;try{yield function Bh(I,T){return new Promise((M,B)=>{const K=Math.max(T-Date.now(),0),X=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(X),B(gr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(B,T)}catch(ze){if(Qe)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:ge,measurementId:Qe};throw ze}try{const ze=yield function yi(I){return Mo.apply(this,arguments)}(I);return K.deleteThrottleMetadata(ge),ze}catch(ze){const lt=ze;if(!function jh(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(lt)){if(K.deleteThrottleMetadata(ge),Qe)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:ge,measurementId:Qe};throw ze}const kt=503===Number(null===(X=lt?.customData)||void 0===X?void 0:X.httpStatus)?(0,ae.$s)(M,K.intervalMillis,Ym):(0,ae.$s)(M,K.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+kt,backoffCount:M+1};return K.setThrottleMetadata(ge,Nt),Vn.debug(`Calling attemptFetch again in ${kt} millis`),xp(I,Nt,B,K)}}),Uh.apply(this,arguments)}class Zc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Su,Ul;function Hh(){return(Hh=(0,O.Z)(function*(I,T,M,B,K){if(K&&K.global)I("event",M,B);else{const X=yield T;I("event",M,Object.assign(Object.assign({},B),{send_to:X}))}})).apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(){if(!(0,ae.hl)())return Vn.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(I){return Vn.warn(gr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ji(){return Ji=(0,O.Z)(function*(I,T,M,B,K,X,ge){var Qe;const ze=function Nn(I){return Vh.apply(this,arguments)}(I);ze.then(Un=>{M[Un.measurementId]=Un.appId,I.options.measurementId&&Un.measurementId!==I.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Un.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Un=>Vn.error(Un)),T.push(ze);const lt=function Np(){return ja.apply(this,arguments)}().then(Un=>{if(Un)return B.getId()}),[kt,Nt]=yield Promise.all([ze,lt]);(function Kc(I){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Nl)&&M.src.includes(I))return M;return null})(X)||function Oh(I,T){const M=function Pl(I,T){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(I,T)),M}("firebase-js-sdk-policy",{createScriptURL:qc}),B=document.createElement("script"),K=`${Nl}?l=${I}&id=${T}`;B.src=M?M?.createScriptURL(K):K,B.async=!0,document.head.appendChild(B)}(X,kt.measurementId),Ul&&(K("consent","default",Ul),function ra(I){Ul=I}(void 0)),K("js",new Date);const Wr=null!==(Qe=ge?.config)&&void 0!==Qe?Qe:{};return Wr[Ph]="firebase",Wr.update=!0,null!=Nt&&(Wr[Nh]=Nt),K("config",kt.measurementId,Wr),Su&&(K("set",Su),function Xc(I){Su=I}(void 0)),kt.measurementId}),Ji.apply(this,arguments)}class St{constructor(T){this.app=T}_delete(){return delete Fi[this.app.options.appId],Promise.resolve()}}let Fi={},$h=[];const Ha={};let zr,fs,Li="dataLayer",xo=!1;function Pp(I,T,M){!function Vi(){const I=[];if((0,ae.ru)()&&I.push("This is a browser extension environment."),(0,ae.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((B,K)=>`(${K+1}) ${B}`).join(" "),M=gr.create("invalid-analytics-context",{errorInfo:T});Vn.warn(M.message)}}();const B=I.options.appId;if(!B)throw gr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw gr.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fi[B])throw gr.create("already-exists",{id:B});if(!xo){!function Tu(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Li);const{wrappedGtag:X,gtagCore:ge}=function Fl(I,T,M,B,K){let X=function(...ge){window[B].push(arguments)};return window[K]&&"function"==typeof window[K]&&(X=window[K]),window[K]=function kl(I,T,M,B){function X(){return X=(0,O.Z)(function*(ge,...Qe){try{if("event"===ge){const[ze,lt]=Qe;yield function Ao(I,T,M,B,K){return Ba.apply(this,arguments)}(I,T,M,ze,lt)}else if("config"===ge){const[ze,lt]=Qe;yield function Ol(I,T,M,B,K,X){return So.apply(this,arguments)}(I,T,M,B,ze,lt)}else if("consent"===ge){const[ze]=Qe;I("consent","update",ze)}else if("get"===ge){const[ze,lt,kt]=Qe;I("get",ze,lt,kt)}else if("set"===ge){const[ze]=Qe;I("set",ze)}else I(ge,...Qe)}catch(ze){Vn.error(ze)}}),X.apply(this,arguments)}return function K(ge){return X.apply(this,arguments)}}(X,I,T,M),{gtagCore:X,wrappedGtag:window[K]}}(Fi,$h,Ha,Li,"gtag");fs=X,zr=ge,xo=!0}return Fi[B]=function Xm(I,T,M,B,K,X,ge){return Ji.apply(this,arguments)}(I,$h,Ha,T,zr,Li,M),new St(I)}function Gh(){return ps.apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Oo="@firebase/analytics";!function Xs(){(0,J._registerComponent)(new ve.wA(Wc,(T,{options:M})=>Pp(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,J._registerComponent)(new ve.wA("analytics-internal",function I(T){try{const M=T.getProvider(Wc).getImmediate();return{logEvent:(B,K,X)=>function oa(I,T,M,B){I=(0,ae.m9)(I),function na(I,T,M,B,K){return Hh.apply(this,arguments)}(fs,Fi[I.app.options.appId],T,M,B).catch(K=>Vn.error(K))}(M,B,K,X)}}catch(M){throw gr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,J.registerVersion)(Oo,"0.10.0"),(0,J.registerVersion)(Oo,"0.10.0","esm2017")}();var Js=L(1954),Dr=L(2631);const Wh=new class Ga extends Dr.v{}(class es extends Js.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,M,B):(T.flush(this),0)}});var Bs=L(6321),Ui=L(9397),zn=L(3093),vi=L(5137);const ed=new f.GfV("7.6.1"),ts="__angularfire_symbol__analyticsIsSupportedValue",js="__angularfire_symbol__analyticsIsSupported",td="__angularfire_symbol__remoteConfigIsSupportedValue",Bl="__angularfire_symbol__remoteConfigIsSupported",aa="__angularfire_symbol__messagingIsSupportedValue",Ht="__angularfire_symbol__messagingIsSupported";function Ru(I,T,M){if(T){if(1===T.length)return T[0];const X=T.filter(ge=>ge.app===M);if(1===X.length)return X[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[js]||(globalThis[js]=Gh().then(I=>globalThis[ts]=I).catch(()=>globalThis[ts]=!1)),globalThis[Ht]||(globalThis[Ht]=Re().then(I=>globalThis[aa]=I).catch(()=>globalThis[aa]=!1)),globalThis[Bl]||(globalThis[Bl]=Pa().then(I=>globalThis[td]=I).catch(()=>globalThis[td]=!1));const gs=(I,T)=>{const M=T?[T]:(0,H.C6)(),B=[];return M.forEach(K=>{K.container.getProvider(I).instances.forEach(ge=>{B.includes(ge)||B.push(ge)})}),B};function za(){}class or{constructor(T,M=Wh){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,B){const K=this.zone;return this.delegate.schedule(function(ge){K.runGuarded(()=>{T.apply(this,[ge])})},M,B)}}class eo{constructor(T){this.zone=T,this.task=null}call(T,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za)),M.pipe((0,Ui.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xu=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new or(Zone.current)),this.insideAngular=M.run(()=>new or(Zone.current,Bs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ms(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function nd(I){return I.pipe((0,zn.Q)(ms().outsideAngular))}function la(I){return ms(),function qh(I){return function(M){return(M=M.lift(new eo(I.ngZone))).pipe((0,vi.R)(I.outsideAngular),(0,zn.Q)(I.insideAngular))}}(ms())(I)}},6878:(mt,Ae,L)=>{L.d(Ae,{$:()=>Rc,A:()=>q,D:()=>Ne,I:()=>fh,J:()=>fu,L:()=>Tt,N:()=>ei,P:()=>Xm,Q:()=>mp,R:()=>Yc,U:()=>Xo,V:()=>Pa,W:()=>Oa,X:()=>Pi,Y:()=>$r,Z:()=>bc,_:()=>_h,a:()=>pr,a0:()=>wl,a1:()=>vp,a2:()=>qm,a3:()=>wp,a4:()=>El,a5:()=>Il,a6:()=>Oi,a7:()=>Cl,a8:()=>ea,a9:()=>Ip,aA:()=>te,aB:()=>td,aC:()=>cr,aD:()=>Jt,aE:()=>zn,aF:()=>oi,aG:()=>zh,aH:()=>ir,aL:()=>ii,aO:()=>yu,aa:()=>Ch,ab:()=>bh,ac:()=>Oc,ad:()=>Km,ae:()=>Cp,af:()=>Dl,ai:()=>bp,aj:()=>Dh,ak:()=>Uc,an:()=>Wm,ao:()=>Th,aq:()=>Mt,ar:()=>Ml,as:()=>Ge,at:()=>yt,au:()=>Ie,av:()=>re,aw:()=>Wr,ax:()=>ua,ay:()=>pt,az:()=>De,b:()=>zc,c:()=>fs,d:()=>Pp,e:()=>Jm,f:()=>Oo,g:()=>Ga,h:()=>Js,i:()=>kh,j:()=>Bs,k:()=>ai,l:()=>un,m:()=>sd,p:()=>xe,r:()=>ki,s:()=>Ro,u:()=>Np});var f=L(5861),H=L(9058),O=L(534),J=L(7582),ae=L(7879),ve=L(4537);const xe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new ae.Yd("@firebase/auth");function ht(w,...g){Fe.logLevel<=ae.in.ERROR&&Fe.error(`Auth (${O.SDK_VERSION}): ${w}`,...g)}function re(w,...g){throw ke(w,...g)}function De(w,...g){return ke(w,...g)}function ue(w,g,_){const C=Object.assign(Object.assign({},Ke()),{[g]:_});return new H.LL("auth","Firebase",C).create(g,{appName:w.name})}function ye(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&re(w,"argument-error"),ue(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return Oe.create(w,...g)}function te(w,g,..._){if(!w)throw ke(g,..._)}function nt(w){const g="INTERNAL ASSERTION FAILED: "+w;throw ht(g),new Error(g)}function Ge(w,g){w||nt(g)}function tn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function fr(){return"http:"===Xr()||"https:"===Xr()}function Xr(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class xi{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ge(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function Rs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fr()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ks(w,g){Ge(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class he{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new xi(3e4,6e4);function de(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Se(w,g,_,C){return je.apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(w,g,_,C,R={}){return Je(w,R,(0,f.Z)(function*(){let k={},Q={};C&&("GET"===g?Q=C:k={body:JSON.stringify(C)});const pe=(0,H.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),$e=yield w._getAdditionalHeaders();return $e["Content-Type"]="application/json",w.languageCode&&($e["X-Firebase-Locale"]=w.languageCode),he.fetch()(an(w,w.config.apiHost,_,pe),Object.assign({method:g,headers:$e,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Je(w,g,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},me),g);try{const R=new Ut(w),k=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw gn(w,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const pe=k.ok?Q.errorMessage:Q.error.message,[$e,et]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw gn(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===$e)throw gn(w,"email-already-in-use",Q);if("USER_DISABLED"===$e)throw gn(w,"user-disabled",Q);const It=C[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw ue(w,It,et);re(w,It)}}catch(R){if(R instanceof H.ZR)throw R;re(w,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function fn(w,g,_,C){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(w,g,_,C,R={}){const k=yield Se(w,g,_,C,R);return"mfaPendingCredential"in k&&re(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function an(w,g,_,C){const R=`${g}${_}?${C}`;return w.config.emulator?Ks(w.config,R):`${w.config.apiScheme}://${R}`}class Ut{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(De(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gn(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const R=De(w,g,C);return R.customData._tokenResponse=_,R}function On(){return(On=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Rr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function xs(){return(xs=(0,f.Z)(function*(w,g=!1){const _=(0,H.m9)(w),C=yield _.getIdToken(g),R=ft(C);te(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const k="object"==typeof R.firebase?R.firebase:void 0,Q=k?.sign_in_provider;return{claims:R,token:C,authTime:Rr(Ye(R.auth_time)),issuedAtTime:Rr(Ye(R.iat)),expirationTime:Rr(Ye(R.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Ye(w){return 1e3*Number(w)}function ft(w){const[g,_,C]=w.split(".");if(void 0===g||void 0===_||void 0===C)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,H.tV)(_);return R?JSON.parse(R):(ht("Failed to decode base64 JWT payload"),null)}catch(R){return ht("Caught error parsing JWT payload as JSON",R?.toString()),null}}function Xt(w,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof H.ZR&&function gi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}class qt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class nr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rr(this.lastLoginAt),this.creationTime=Rr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function as(w){return mn.apply(this,arguments)}function mn(){return mn=(0,f.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),R=yield Xt(w,function Ni(w,g){return Ki.apply(this,arguments)}(_,{idToken:C}));te(R?.users.length,_,"internal-error");const k=R.users[0];w._notifyReloadListener(k);const Q=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?function Zi(w){return w.map(g=>{var{providerId:_}=g,C=(0,J._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(k.providerUserInfo):[],pe=function kn(w,g){return[...w.filter(C=>!g.some(R=>R.providerId===C.providerId)),...g]}(w.providerData,Q),It=!!w.isAnonymous&&!(w.email&&k.passwordHash||pe?.length),Yt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:pe,metadata:new nr(k.createdAt,k.lastLoginAt),isAnonymous:It};Object.assign(w,Yt)}),mn.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(w){const g=(0,H.m9)(w);yield as(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(w,g){const _=yield Je(w,{},(0,f.Z)(function*(){const C=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:k}=w.config,Q=an(w,R,"/v1/token",`key=${k}`),pe=yield w._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",he.fetch()(Q,{method:"POST",headers:pe,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){te(g.idToken,"internal-error"),te(typeof g.idToken<"u","internal-error"),te(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function wt(w){const g=ft(w);return te(g,"internal-error"),te(typeof g.exp<"u","internal-error"),te(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,f.Z)(function*(){return te(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,f.Z)(function*(){const{accessToken:R,refreshToken:k,expiresIn:Q}=yield function Ns(w,g){return xr.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(R,k,Number(Q))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:R,expirationTime:k}=_,Q=new Kn;return C&&(te("string"==typeof C,"internal-error",{appName:g}),Q.refreshToken=C),R&&(te("string"==typeof R,"internal-error",{appName:g}),Q.accessToken=R),k&&(te("number"==typeof k,"internal-error",{appName:g}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return nt("not implemented")}}function Dn(w,g){te("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class rr{constructor(g){var{uid:_,auth:C,stsTokenManager:R}=g,k=(0,J._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new nr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const C=yield Xt(_,_.stsTokenManager.getToken(_.auth,g));return te(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Jr(w){return xs.apply(this,arguments)}(this,g)}reload(){return function jr(w){return Ft.apply(this,arguments)}(this)}_assign(g){this!==g&&(te(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new rr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,f.Z)(function*(){let R=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield as(C)),yield C.auth._persistUserIfCurrent(C),R&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield Xt(g,function Hn(w,g){return On.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,R,k,Q,pe,$e,et,It;const Yt=null!==(C=_.displayName)&&void 0!==C?C:void 0,wi=null!==(R=_.email)&&void 0!==R?R:void 0,da=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,Vp=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,r_=null!==(pe=_.tenantId)&&void 0!==pe?pe:void 0,Up=null!==($e=_._redirectEventId)&&void 0!==$e?$e:void 0,od=null!==(et=_.createdAt)&&void 0!==et?et:void 0,no=null!==(It=_.lastLoginAt)&&void 0!==It?It:void 0,{uid:qa,emailVerified:ro,isAnonymous:Gl,providerData:Ka,stsTokenManager:ad}=_;te(qa&&ad,g,"internal-error");const zl=Kn.fromJSON(this.name,ad);te("string"==typeof qa,g,"internal-error"),Dn(Yt,g.name),Dn(wi,g.name),te("boolean"==typeof ro,g,"internal-error"),te("boolean"==typeof Gl,g,"internal-error"),Dn(da,g.name),Dn(Vp,g.name),Dn(r_,g.name),Dn(Up,g.name),Dn(od,g.name),Dn(no,g.name);const Yh=new rr({uid:qa,auth:g,email:wi,emailVerified:ro,displayName:Yt,isAnonymous:Gl,photoURL:Vp,phoneNumber:da,tenantId:r_,stsTokenManager:zl,createdAt:od,lastLoginAt:no});return Ka&&Array.isArray(Ka)&&(Yh.providerData=Ka.map(i_=>Object.assign({},i_))),Up&&(Yh._redirectEventId=Up),Yh}static _fromIdTokenResponse(g,_,C=!1){return(0,f.Z)(function*(){const R=new Kn;R.updateFromServerResponse(_);const k=new rr({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:C});return yield as(k),k})()}}const Fn=new Map;function cr(w){Ge(w instanceof Function,"Expected a class definition");let g=Fn.get(w);return g?(Ge(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Fn.set(w,g),g)}const ei=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,C){var R=this;return(0,f.Z)(function*(){R.storage[_]=C})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=C.storage[_];return void 0===R?null:R})()}_remove(_){var C=this;return(0,f.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function Jt(w,g,_){return`firebase:${w}:${g}:${_}`}class W{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:R,name:k}=this.auth;this.fullUserKey=Jt(this.userKey,R.apiKey,k),this.fullPersistenceKey=Jt("persistence",R.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?rr._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,f.Z)(function*(){if(!_.length)return new W(cr(ei),g,C);const R=(yield Promise.all(_.map(function(){var et=(0,f.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return et.apply(this,arguments)}}()))).filter(et=>et);let k=R[0]||cr(ei);const Q=Jt(C,g.config.apiKey,g.name);let pe=null;for(const et of _)try{const It=yield et._get(Q);if(It){const Yt=rr._fromJSON(g,It);et!==k&&(pe=Yt),k=et;break}}catch{}const $e=R.filter(et=>et._shouldAllowMigration);return k._shouldAllowMigration&&$e.length?(k=$e[0],pe&&(yield k._set(Q,pe.toJSON())),yield Promise.all(_.map(function(){var et=(0,f.Z)(function*(It){if(It!==k)try{yield It._remove(Q)}catch{}});return function(It){return et.apply(this,arguments)}}())),new W(k,g,C)):new W(k,g,C)})()}}function G(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ee(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(F(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(qe(g))return"Blackberry";if(Et(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||P(g))&&!g.includes("edge/"))return"Chrome";if(Ie(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function F(w=(0,H.z$)()){return/firefox\//i.test(w)}function V(w=(0,H.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function P(w=(0,H.z$)()){return/crios\//i.test(w)}function ee(w=(0,H.z$)()){return/iemobile/i.test(w)}function Ie(w=(0,H.z$)()){return/android/i.test(w)}function qe(w=(0,H.z$)()){return/blackberry/i.test(w)}function Et(w=(0,H.z$)()){return/webos/i.test(w)}function yt(w=(0,H.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function pt(w=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Bt(w=(0,H.z$)()){return yt(w)||Ie(w)||Et(w)||qe(w)||/windows phone/i.test(w)||ee(w)}function Nr(w,g=[]){let _;switch(w){case"Browser":_=G((0,H.z$)());break;case"Worker":_=`${G((0,H.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${C}`}function oe(){return(oe=(0,f.Z)(function*(w){return(yield Se(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ve(w,g){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(w,g){return Se(w,"GET","/v2/recaptchaConfig",de(w,g))})).apply(this,arguments)}function xt(w){return void 0!==w&&void 0!==w.getResponse}function Gt(w){return void 0!==w&&void 0!==w.enterprise}class sn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Zn(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=R=>{const k=De("internal-error");k.customData=R,_(k)},C.type="text/javascript",C.charset="UTF-8",function Ir(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function vo(w){return`__${w}${Math.floor(1e6*Math.random())}`}class mi{constructor(g){this.type="recaptcha-enterprise",this.auth=ir(g)}verify(g="verify",_=!1){var C=this;return(0,f.Z)(function*(){function k(){return k=(0,f.Z)(function*(pe){if(!_){if(null==pe.tenantId&&null!=pe._agentRecaptchaConfig)return pe._agentRecaptchaConfig.siteKey;if(null!=pe.tenantId&&void 0!==pe._tenantRecaptchaConfigs[pe.tenantId])return pe._tenantRecaptchaConfigs[pe.tenantId].siteKey}return new Promise(function(){var $e=(0,f.Z)(function*(et,It){Ve(pe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Yt=>{if(void 0!==Yt.recaptchaKey){const wi=new sn(Yt);return null==pe.tenantId?pe._agentRecaptchaConfig=wi:pe._tenantRecaptchaConfigs[pe.tenantId]=wi,et(wi.siteKey)}It(new Error("recaptcha Enterprise site key undefined"))}).catch(Yt=>{It(Yt)})});return function(et,It){return $e.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(pe,$e,et){const It=window.grecaptcha;Gt(It)?It.enterprise.ready(()=>{It.enterprise.execute(pe,{action:g}).then(Yt=>{$e(Yt)}).catch(()=>{$e("NO_RECAPTCHA")})}):et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((pe,$e)=>{(function R(pe){return k.apply(this,arguments)})(C.auth).then(et=>{if(!_&&Gt(window.grecaptcha))Q(et,pe,$e);else{if(typeof window>"u")return void $e(new Error("RecaptchaVerifier is only supported in browser"));Zn("https://www.google.com/recaptcha/enterprise.js?render="+et).then(()=>{Q(et,pe,$e)}).catch(It=>{$e(It)})}}).catch(et=>{$e(et)})})})()}}function wo(w,g,_){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(w,g,_,C=!1){const R=new mi(w);let k;try{k=yield R.verify(_)}catch{k=yield R.verify(_,!0)}const Q=Object.assign({},g);return Object.assign(Q,C?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class fp{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=k=>new Promise((Q,pe)=>{try{Q(g(k))}catch($e){pe($e)}});C.onAbort=_,this.queue.push(C);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const C=[];try{for(const R of _.queue)yield R(g),R.onAbort&&C.push(R.onAbort)}catch(R){C.reverse();for(const k of C)try{k()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class dl{constructor(g,_,C,R){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=C,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gm(this),this.idTokenSubscription=new Gm(this),this.beforeStateQueue=new fp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=cr(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var R,k;if(!C._deleted&&(C.persistenceManager=yield W.create(C,g),!C._deleted)){if(null!==(R=C._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var C;const R=yield _.assertedPersistence.getCurrentUser();let k=R,Q=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const pe=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,$e=k?._redirectEventId,et=yield _.tryRedirectSignIn(g);(!pe||pe===$e)&&et?.user&&(k=et.user,Q=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(k)}catch(pe){k=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(pe))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return te(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield as(g)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Rn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const C=g?(0,H.m9)(g):null;return C&&te(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,f.Z)(function*(){if(!C._deleted)return g&&te(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,f.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(cr(g))}))}initializeRecaptchaConfig(){var g=this;return(0,f.Z)(function*(){const _=yield Ve(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new sn(_);null==g.tenantId?g._agentRecaptchaConfig=C:g._tenantRecaptchaConfigs[g.tenantId]=C,C.emailPasswordEnabled&&new mi(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,f.Z)(function*(){const R=yield C.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&cr(g)||_._popupRedirectResolver;te(C,_,"argument-error"),_.redirectPersistenceManager=yield W.create(_,[cr(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var C,R;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,R){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return te(Q,this,"internal-error"),Q.then(()=>k(this.currentUser)),"function"==typeof _?g.addObserver(_,C,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();R&&(C["X-Firebase-Client"]=R);const k=yield g._getAppCheckToken();return k&&(C["X-Firebase-AppCheck"]=k),C})()}_getAppCheckToken(){var g=this;return(0,f.Z)(function*(){var _;const C=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return C?.error&&function Ct(w,...g){Fe.logLevel<=ae.in.WARN&&Fe.warn(`Auth (${O.SDK_VERSION}): ${w}`,...g)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function ir(w){return(0,H.m9)(w)}class Gm{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fh(w,g,_){const C=ir(w);te(C._canInitEmulator,C,"emulator-config-failed"),te(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const R=!!_?.disableWarnings,k=hl(g),{host:Q,port:pe}=function Ra(w){const g=hl(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(C);if(R){const k=R[1];return{host:k,port:Ic(C.substr(k.length+1))}}{const[k,Q]=C.split(":");return{host:k,port:Ic(Q)}}}(g);C.config.emulator={url:`${k}//${Q}${null===pe?"":`:${pe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Q,port:pe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function pp(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Ic(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class fu{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return nt("not implemented")}_getIdTokenResponse(g){return nt("not implemented")}_linkToIdToken(g,_){return nt("not implemented")}_getReauthenticationResolver(g){return nt("not implemented")}}function pu(w,g){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:resetPassword",de(w,g))})).apply(this,arguments)}function fl(w,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:update",de(w,g))})).apply(this,arguments)}function Cr(w,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPassword",de(w,g))})).apply(this,arguments)}function Zs(w,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:sendOobCode",de(w,g))})).apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function xa(w,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function mh(w,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithEmailLink",de(w,g))})).apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithEmailLink",de(w,g))})).apply(this,arguments)}class Ys extends fu{constructor(g,_,C,R=null){super("password",C),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Ys(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Ys(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){var C;switch(_.signInMethod){case"password":const R={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=g._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const k=yield wo(g,R,"signInWithPassword");return Cr(g,k)}return Cr(g,R).catch(function(){var k=(0,f.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const pe=yield wo(g,R,"signInWithPassword");return Cr(g,pe)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}());case"emailLink":return function $n(w,g){return ni.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:re(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return fl(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function gl(w,g){return Pr.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function En(w,g){return us.apply(this,arguments)}function us(){return(us=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithIdp",de(w,g))})).apply(this,arguments)}class Tt extends fu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Tt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):re("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R}=_,k=(0,J._T)(_,["providerId","signInMethod"]);if(!C||!R)return null;const Q=new Tt(C,R);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(g){return En(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,En(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,En(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,H.xO)(_)}return g}}function ml(){return(ml=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:sendVerificationCode",de(w,g))})).apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPhoneNumber",de(w,g))})).apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(w,g){const _=yield fn(w,"POST","/v1/accounts:signInWithPhoneNumber",de(w,g));if(_.temporaryProof)throw gn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ps={USER_NOT_FOUND:"user-not-found"};function yl(){return(yl=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPhoneNumber",de(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ps)})).apply(this,arguments)}class Or extends fu{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Or({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Or({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Eo(w,g){return xn.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function _l(w,g){return Yo.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Na(w,g){return yl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:k}=g;return C||_||R||k?new Or({verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:k}):null}}class ls{constructor(g){var _,C,R,k,Q,pe;const $e=(0,H.zd)((0,H.pd)(g)),et=null!==(_=$e.apiKey)&&void 0!==_?_:null,It=null!==(C=$e.oobCode)&&void 0!==C?C:null,Yt=function ri(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=$e.mode)&&void 0!==R?R:null);te(et&&It&&Yt,"argument-error"),this.apiKey=et,this.operation=Yt,this.code=It,this.continueUrl=null!==(k=$e.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=$e.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(pe=$e.tenantId)&&void 0!==pe?pe:null}static parseLink(g){const _=function Cc(w){const g=(0,H.zd)((0,H.pd)(w)).link,_=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,C=(0,H.zd)((0,H.pd)(w)).deep_link_id;return(C?(0,H.zd)((0,H.pd)(C)).link:null)||C||_||g||w}(g);try{return new ls(_)}catch{return null}}}let mp=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Ys._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const R=ls.parseLink(C);return te(R,"argument-error"),Ys._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Os{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Qo extends Os{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Pi extends Qo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return te("providerId"in _&&"signInMethod"in _,"argument-error"),Tt._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return te(g.idToken||g.accessToken,"argument-error"),Tt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Pi.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Pi.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:R,pendingToken:k,nonce:Q,providerId:pe}=g;if(!C&&!R&&!_&&!k||!pe)return null;try{return new Pi(pe)._credential({idToken:_,accessToken:C,nonce:Q,pendingToken:k})}catch{return null}}}let Xo=(()=>{class w extends Qo{constructor(){super("facebook.com")}static credential(_){return Tt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Pa=(()=>{class w extends Qo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Tt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:R}=_;if(!C&&!R)return null;try{return w.credential(C,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Oa=(()=>{class w extends Qo{constructor(){super("github.com")}static credential(_){return Tt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class yu extends fu{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return En(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,En(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,En(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R,pendingToken:k}=_;return C&&R&&k&&C===R?new yu(C,k):null}static _create(g,_){return new yu(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $r extends Os{constructor(g){te(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return $r.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return $r.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=yu.fromJSON(g);return te(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return yu._create(C,_)}catch{return null}}}let bc=(()=>{class w extends Qo{constructor(){super("twitter.com")}static credential(_,C){return Tt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:R}=_;if(!C||!R)return null;try{return w.credential(C,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function cs(w,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signUp",de(w,g))})).apply(this,arguments)}class Tn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,R=!1){return(0,f.Z)(function*(){const k=yield rr._fromIdTokenResponse(g,C,R),Q=ka(C);return new Tn({user:k,providerId:Q,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const R=ka(C);return new Tn({user:g,providerId:R,_tokenResponse:C,operationType:_})})()}}function ka(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function _h(w){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(w){var g;const _=ir(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Tn({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield cs(_,{returnSecureToken:!0}),R=yield Tn._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Tc extends H.ZR{constructor(g,_,C,R){var k;super(_.code,_.message),this.operationType=C,this.user=R,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,R){return new Tc(g,_,C,R)}}function Sc(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Tc._fromErrorAndOperation(w,k,g,C):k})}function _p(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Wm(w,g){return yh.apply(this,arguments)}function yh(){return yh=(0,f.Z)(function*(w,g){const _=(0,H.m9)(w);yield Mc(!0,_,g);const{providerUserInfo:C}=yield function pn(w,g){return tr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=_p(C||[]);return _.providerData=_.providerData.filter(k=>R.has(k.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),yh.apply(this,arguments)}function ks(w,g){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(w,g,_=!1){const C=yield Xt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Tn._forOperation(w,"link",C)})).apply(this,arguments)}function Mc(w,g,_){return vl.apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(w,g,_){yield as(g);const R=!1===w?"provider-already-linked":"no-such-provider";te(_p(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function yp(w,g){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(w,g,_=!1){const{auth:C}=w,R="reauthenticate";try{const k=yield Xt(w,Sc(C,R,g,w),_);te(k.idToken,C,"internal-error");const Q=ft(k.idToken);te(Q,C,"internal-error");const{sub:pe}=Q;return te(w.uid===pe,C,"user-mismatch"),Tn._forOperation(w,R,k)}catch(k){throw"auth/user-not-found"===k?.code&&re(C,"user-mismatch"),k}})).apply(this,arguments)}function wh(w,g){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(w,g,_=!1){const C="signIn",R=yield Sc(w,C,g),k=yield Tn._fromIdTokenResponse(w,C,R);return _||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Rc(w,g){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,f.Z)(function*(w,g){return wh(ir(w),g)})).apply(this,arguments)}function wl(w,g){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(w,g){const _=(0,H.m9)(w);return yield Mc(!1,_,g.providerId),ks(_,g)})).apply(this,arguments)}function vp(w,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(w,g){return yp((0,H.m9)(w),g)})).apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithCustomToken",de(w,g))})).apply(this,arguments)}function qm(w,g){return bo.apply(this,arguments)}function bo(){return bo=(0,f.Z)(function*(w,g){const _=ir(w),C=yield function jv(w,g){return Co.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),R=yield Tn._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(R.user),R}),bo.apply(this,arguments)}class _i{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Nc._fromServerResponse(g,_):"totpInfo"in _?vu._fromServerResponse(g,_):re(g,"internal-error")}}class Nc extends _i{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Nc(_)}}class vu extends _i{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new vu(_)}}function wu(w,g,_){var C;te((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),te(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(te(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(te(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function wp(w,g,_){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,f.Z)(function*(w,g,_){var C;const R=ir(w),k={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=R._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Q=yield wo(R,k,"getOobCode",!0);_&&wu(R,Q,_),yield xa(R,Q)}else _&&wu(R,k,_),yield xa(R,k).catch(function(){var Q=(0,f.Z)(function*(pe){if("auth/missing-recaptcha-token"!==pe.code)return Promise.reject(pe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const $e=yield wo(R,k,"getOobCode",!0);_&&wu(R,$e,_),yield xa(R,$e)}});return function(pe){return Q.apply(this,arguments)}}())}),Ep.apply(this,arguments)}function El(w,g,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(w,g,_){yield pu((0,H.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Il(w,g){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,f.Z)(function*(w,g){yield function gp(w,g){return jt.apply(this,arguments)}((0,H.m9)(w),{oobCode:g})}),Qn.apply(this,arguments)}function Oi(w,g){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(w,g){const _=(0,H.m9)(w),C=yield pu(_,{oobCode:g}),R=C.requestType;switch(te(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(C.mfaInfo,_,"internal-error");default:te(C.email,_,"internal-error")}let k=null;return C.mfaInfo&&(k=_i._fromServerResponse(ir(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:R}})).apply(this,arguments)}function Cl(w,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(w,g){const{data:_}=yield Oi((0,H.m9)(w),g);return _.email})).apply(this,arguments)}function ea(w,g,_){return bl.apply(this,arguments)}function bl(){return bl=(0,f.Z)(function*(w,g,_){var C;const R=ir(w),k={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(C=R._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const et=yield wo(R,k,"signUpPassword");Q=cs(R,et)}else Q=cs(R,k).catch(function(){var et=(0,f.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Yt=yield wo(R,k,"signUpPassword");return cs(R,Yt)}return Promise.reject(It)});return function(It){return et.apply(this,arguments)}}());const pe=yield Q.catch(et=>Promise.reject(et)),$e=yield Tn._fromIdTokenResponse(R,"signIn",pe);return yield R._updateCurrentUser($e.user),$e}),bl.apply(this,arguments)}function Ip(w,g,_){return Rc((0,H.m9)(w),mp.credential(g,_))}function Ch(w,g,_){return Do.apply(this,arguments)}function Do(){return Do=(0,f.Z)(function*(w,g,_){var C;const R=ir(w),k={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Q(pe,$e){te($e.handleCodeInApp,R,"argument-error"),$e&&wu(R,pe,$e)}if(null!==(C=R._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const pe=yield wo(R,k,"getOobCode",!0);Q(pe,_),yield mh(R,pe)}else Q(k,_),yield mh(R,k).catch(function(){var pe=(0,f.Z)(function*($e){if("auth/missing-recaptcha-token"!==$e.code)return Promise.reject($e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield wo(R,k,"getOobCode",!0);Q(et,_),yield mh(R,et)}});return function($e){return pe.apply(this,arguments)}}())}),Do.apply(this,arguments)}function bh(w,g){const _=ls.parseLink(g);return"EMAIL_SIGNIN"===_?.operation}function Oc(w,g,_){return br.apply(this,arguments)}function br(){return(br=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w),R=mp.credentialWithLink(g,_||tn());return te(R._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Rc(C,R)})).apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:createAuthUri",de(w,g))})).apply(this,arguments)}function Km(w,g){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,f.Z)(function*(w,g){const C={identifier:g,continueUri:fr()?tn():"http://localhost"},{signinMethods:R}=yield function Hv(w,g){return kc.apply(this,arguments)}((0,H.m9)(w),C);return R||[]}),Eu.apply(this,arguments)}function Cp(w,g){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,f.Z)(function*(w,g){const _=(0,H.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&wu(_.auth,R,g);const{email:k}=yield function gh(w,g){return gu.apply(this,arguments)}(_.auth,R);k!==w.email&&(yield w.reload())}),Iu.apply(this,arguments)}function Dl(w,g,_){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&wu(C.auth,k,_);const{email:Q}=yield function st(w,g){return Lt.apply(this,arguments)}(C.auth,k);Q!==w.email&&(yield w.reload())}),Fa.apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(w,g){return Se(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bp(w,g){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,f.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,H.m9)(w),k={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Q=yield Xt(C,function Fc(w,g){return Lc.apply(this,arguments)}(C.auth,k));C.displayName=Q.displayName||null,C.photoURL=Q.photoUrl||null;const pe=C.providerData.find(({providerId:$e})=>"password"===$e);pe&&(pe.displayName=C.displayName,pe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Q)}),Vc.apply(this,arguments)}function Dh(w,g){return Bc((0,H.m9)(w),g,null)}function Uc(w,g){return Bc((0,H.m9)(w),null,g)}function Bc(w,g,_){return ds.apply(this,arguments)}function ds(){return(ds=(0,f.Z)(function*(w,g,_){const{auth:C}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(k.email=g),_&&(k.password=_);const Q=yield Xt(w,fl(C,k));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ta{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class bn extends ta{constructor(g,_,C,R){super(g,_,C),this.username=R}}class Tl extends ta{constructor(g,_){super(g,"facebook.com",_)}}class La extends bn{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Gr extends ta{constructor(g,_){super(g,"google.com",_)}}class Va extends bn{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Th(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function jc(w){var g,_;if(!w)return null;const{providerId:C}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const Q=null===(_=null===(g=ft(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new ta(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!C)return null;switch(C){case"facebook.com":return new Tl(k,R);case"github.com":return new La(k,R);case"google.com":return new Gr(k,R);case"twitter.com":return new Va(k,R,w.screenName||null);case"custom":case"anonymous":return new ta(k,null);default:return new ta(k,C,R)}}(_)}class Xi{constructor(g,_,C){this.type=g,this.credential=_,this.auth=C}static _fromIdtoken(g,_){return new Xi("enroll",g,_)}static _fromMfaPendingCredential(g){return new Xi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Xi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return Xi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Al{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=ir(g),R=_.customData._serverResponse,k=(R.mfaInfo||[]).map(pe=>_i._fromServerResponse(C,pe));te(R.mfaPendingCredential,C,"internal-error");const Q=Xi._fromMfaPendingCredential(R.mfaPendingCredential);return new Al(Q,k,function(){var pe=(0,f.Z)(function*($e){const et=yield $e._process(C,Q);delete R.mfaInfo,delete R.mfaPendingCredential;const It=Object.assign(Object.assign({},R),{idToken:et.idToken,refreshToken:et.refreshToken});switch(_.operationType){case"signIn":const Yt=yield Tn._fromIdTokenResponse(C,_.operationType,It);return yield C._updateCurrentUser(Yt.user),Yt;case"reauthenticate":return te(_.user,C,"internal-error"),Tn._forOperation(_.user,_.operationType,It);default:re(C,"internal-error")}});return function($e){return pe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Mt(w,g){var _;const C=(0,H.m9)(w),R=g;return te(g.customData.operationType,C,"argument-error"),te(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Al._fromError(C,R)}class Cu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>_i._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Cu(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Xi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var C=this;return(0,f.Z)(function*(){const R=g,k=yield C.getSession(),Q=yield Xt(C.user,R._process(C.user.auth,k,_));return yield C.user._updateTokensIfNecessary(Q),C.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const C="string"==typeof g?g:g.uid,R=yield _.user.getIdToken();try{const k=yield Xt(_.user,function Tp(w,g){return Se(w,"POST","/v2/accounts/mfaEnrollment:withdraw",de(w,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==C),yield _.user._updateTokensIfNecessary(k),yield _.user.reload()}catch(k){throw k}})()}}const hs=new WeakMap;function Ml(w){const g=(0,H.m9)(w);return hs.has(g)||hs.set(g,Cu._fromUser(g)),hs.get(g)}const bu="__sak";class Sp{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(bu,"1"),this.storage.removeItem(bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const zc=(()=>{class w extends Sp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xh(){const w=(0,H.z$)();return V(w)||yt(w)}()&&function Er(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Bt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const R=this.storage.getItem(C),k=this.localCache[C];R!==k&&_(C,k,R)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((pe,$e,et)=>{this.notifyListeners(pe,et)});const R=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(R);if(_.newValue!==pe)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!C)return}const k=()=>{const pe=this.storage.getItem(R);!C&&this.localCache[R]===pe||this.notifyListeners(R,pe)},Q=this.storage.getItem(R);!function wn(){return(0,H.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var R=()=>super._set,k=this;return(0,f.Z)(function*(){yield R().call(k,_,C),k.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,R=this;return(0,f.Z)(function*(){const k=yield C().call(R,_);return R.localCache[_]=JSON.stringify(k),k})()}_remove(_){var C=()=>super._remove,R=this;return(0,f.Z)(function*(){yield C().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),pr=(()=>{class w extends Sp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let xl=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(k=>k.isListeningto(_));if(C)return C;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,f.Z)(function*(){const R=_,{eventId:k,eventType:Q,data:pe}=R.data,$e=C.handlersMap[Q];if(!$e?.size)return;R.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const et=Array.from($e).map(function(){var Yt=(0,f.Z)(function*(wi){return wi(R.origin,pe)});return function(wi){return Yt.apply(this,arguments)}}()),It=yield function Mp(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(et);R.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:It})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ii(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class Rp{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var R=this;return(0,f.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,pe;return new Promise(($e,et)=>{const It=ii("",20);k.port1.start();const Yt=setTimeout(()=>{et(new Error("unsupported_event"))},C);pe={messageChannel:k,onMessage(wi){const da=wi;if(da.data.eventId===It)switch(da.data.status){case"ack":clearTimeout(Yt),Q=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),$e(da.data.response);break;default:clearTimeout(Yt),clearTimeout(Q),et(new Error("invalid_response"))}}},R.handlers.add(pe),k.port1.addEventListener("message",pe.onMessage),R.target.postMessage({eventType:g,eventId:It,data:_},[k.port2])}).finally(()=>{pe&&R.removeMessageHandler(pe)})})()}}function Xn(){return window}function Nh(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function Fr(){return(Fr=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vn="firebaseLocalStorageDb",gr="firebaseLocalStorage",qc="fbase_key";class Du{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Pl(w,g){return w.transaction([gr],g?"readwrite":"readonly").objectStore(gr)}function Tu(){const w=indexedDB.open(Vn,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(gr,{keyPath:qc})}catch(R){_(R)}}),w.addEventListener("success",(0,f.Z)(function*(){const C=w.result;C.objectStoreNames.contains(gr)?g(C):(C.close(),yield function Oh(){const w=indexedDB.deleteDatabase(Vn);return new Du(w).toPromise()}(),g(yield Tu()))}))})}function Ol(w,g,_){return So.apply(this,arguments)}function So(){return(So=(0,f.Z)(function*(w,g,_){const C=Pl(w,!0).put({[qc]:g,value:_});return new Du(C).toPromise()})).apply(this,arguments)}function Ba(){return(Ba=(0,f.Z)(function*(w,g){const _=Pl(w,!1).get(g),C=yield new Du(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function kl(w,g){const _=Pl(w,!0).delete(g);return new Du(_).toPromise()}const kh=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Tu()),_.db})()}_withRetries(_){var C=this;return(0,f.Z)(function*(){let R=0;for(;;)try{const k=yield C._openDb();return yield _(k)}catch(k){if(R++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return Nh()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=xl._getInstance(function Nl(){return Nh()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,f.Z)(function*(R,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(R,k){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,f.Z)(function*(R,k){return["keyChanged"]});return function(R,k){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var C,R;if(_.activeServiceWorker=yield function Ph(){return Fr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Rp(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);k&&null!==(C=k[0])&&void 0!==C&&C.fulfilled&&null!==(R=k[0])&&void 0!==R&&R.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,f.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Ls(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Tu();return yield Ol(_,bu,"1"),yield kl(_,bu),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,f.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var R=this;return(0,f.Z)(function*(){return R._withPendingWrite((0,f.Z)(function*(){return yield R._withRetries(k=>Ol(k,_,C)),R.localCache[_]=C,R.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,f.Z)(function*(){const R=yield C._withRetries(k=>function Ao(w,g){return Ba.apply(this,arguments)}(k,_));return C.localCache[_]=R,R})()}_remove(_){var C=this;return(0,f.Z)(function*(){return C._withPendingWrite((0,f.Z)(function*(){return yield C._withRetries(R=>kl(R,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const C=yield _._withRetries(Q=>{const pe=Pl(Q,!1).getAll();return new Du(pe).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const R=[],k=new Set;for(const{fbase_key:Q,value:pe}of C)k.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(pe)&&(_.notifyListeners(Q,pe),R.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!k.has(Q)&&(_.notifyListeners(Q,null),R.push(Q));return R})()}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Nn=1e12;class Vh{constructor(g){this.auth=g,this.counter=Nn,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new xp(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Nn;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Nn))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var C;return null===(C=_._widgets.get(g||Nn))||void 0===C||C.execute(),""})()}}class xp{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;te(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Uh(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bh=vo("rcb"),jh=new xi(3e4,6e4);class Su{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Xn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return te(function na(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&xt(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((C,R)=>{const k=Xn().setTimeout(()=>{R(De(g,"network-request-failed"))},jh.get());Xn()[Bh]=()=>{Xn().clearTimeout(k),delete Xn()[Bh];const pe=Xn().grecaptcha;if(!pe||!xt(pe))return void R(De(g,"internal-error"));const $e=pe.render;pe.render=(et,It)=>{const Yt=$e(et,It);return this.counter++,Yt},this.hostLanguage=_,C(pe)},Zn(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Bh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),R(De(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Xn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hh{load(g){return(0,f.Z)(function*(){return new Vh(g)})()}clearedOneInstance(){}}const Ll="recaptcha",Au={theme:"light",type:"image"};class Yc{constructor(g,_=Object.assign({},Au),C){this.parameters=_,this.type=Ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ir(C),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;te(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hh:new Su,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(k=>{const Q=pe=>{pe&&(g.tokenChangeListeners.delete(Q),k(pe))};g.tokenChangeListeners.add(Q),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Xn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){te(fr()&&!Nh(),g.auth,"internal-error"),yield function Vl(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function _e(w){return oe.apply(this,arguments)}(g.auth);te(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class si{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Or._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Ro(w,g,_){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,f.Z)(function*(w,g,_){const C=ir(w),R=yield ra(C,g,(0,H.m9)(_));return new si(R,k=>Rc(C,k))})).apply(this,arguments)}function un(w,g,_){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w);yield Mc(!1,C,"phone");const R=yield ra(C.auth,g,(0,H.m9)(_));return new si(R,k=>wl(C,k))})).apply(this,arguments)}function ki(w,g,_){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w),R=yield ra(C.auth,g,(0,H.m9)(_));return new si(R,k=>vp(C,k))})).apply(this,arguments)}function ra(w,g,_){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,f.Z)(function*(w,g,_){var C;const R=yield _.verify();try{let k;if(te("string"==typeof R,w,"argument-error"),te(_.type===Ll,w,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const Q=k.session;if("phoneNumber"in k)return te("enroll"===Q.type,w,"internal-error"),(yield function $c(w,g){return Se(w,"POST","/v2/accounts/mfaEnrollment:start",de(w,g))}(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{te("signin"===Q.type,w,"internal-error");const pe=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return te(pe,w,"missing-multi-factor-info"),(yield function Fh(w,g){return Se(w,"POST","/v2/accounts/mfaSignIn:start",de(w,g))}(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function _u(w,g){return ml.apply(this,arguments)}(w,{phoneNumber:k.phoneNumber,recaptchaToken:R});return Q}}finally{_._reset()}}),Xc.apply(this,arguments)}function Np(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(w,g){yield ks((0,H.m9)(w),g)})).apply(this,arguments)}let Xm=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=ir(_)}verifyPhoneNumber(_,C){return ra(this.auth,_,(0,H.m9)(C))}static credential(_,C){return Or._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:R}=_;return C&&R?Or._fromTokenResponse(C,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ji(w,g){return g?cr(g):(te(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class St extends fu{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return En(g,this._buildIdpRequest())}_linkToIdToken(g,_){return En(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return En(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Fi(w){return wh(w.auth,new St(w),w.bypassAuthState)}function $h(w){const{auth:g,user:_}=w;return te(_,g,"internal-error"),yp(_,new St(w),w.bypassAuthState)}function Ha(w){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(w){const{auth:g,user:_}=w;return te(_,g,"internal-error"),ks(_,new St(w),w.bypassAuthState)})).apply(this,arguments)}class ia{constructor(g,_,C,R,k=!1){this.auth=g,this.resolver=C,this.user=R,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(C,R){g.pendingPromise={resolve:C,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(C,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:C,sessionId:R,postBody:k,tenantId:Q,error:pe,type:$e}=g;if(pe)return void _.reject(pe);const et={auth:_.auth,requestUri:C,sessionId:R,tenantId:Q||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask($e)(et))}catch(It){_.reject(It)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Fi;case"linkViaPopup":case"linkViaRedirect":return Ha;case"reauthViaPopup":case"reauthViaRedirect":return $h;default:re(this.auth,"internal-error")}}resolve(g){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zr=new xi(2e3,1e4);function fs(w,g,_){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(w,g,_){const C=ir(w);ye(w,g,Os);const R=Ji(C,_);return new Qs(C,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function Jm(w,g,_){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w);ye(C.auth,g,Os);const R=Ji(C.auth,_);return new Qs(C.auth,"reauthViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}function Pp(w,g,_){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w);ye(C.auth,g,Os);const R=Ji(C.auth,_);return new Qs(C.auth,"linkViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}let Qs=(()=>{class w extends ia{constructor(_,C,R,k,Q){super(_,C,k,Q),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const C=yield _.execute();return te(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,f.Z)(function*(){Ge(1===_.filter.length,"Popup operations only handle one event");const C=ii();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,R;this.pollId=null!==(R=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,zr.get())};_()}}return w.currentPopupAction=null,w})();const Gh="pendingRedirect",ps=new Map;class Mu extends ia{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let C=ps.get(_.auth._key());if(!C){try{const k=(yield function Op(w,g){return $a.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(k)}catch(R){C=()=>Promise.reject(R)}ps.set(_.auth._key(),C)}return _.bypassAuthState||ps.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const R=yield C.auth._redirectUserForId(g.eventId);if(R)return C.user=R,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function $a(){return($a=(0,f.Z)(function*(w,g){const _=Po(g),C=oa(w);if(!(yield C._isAvailable()))return!1;const R="true"===(yield C._get(_));return yield C._remove(_),R})).apply(this,arguments)}function sa(w,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(w,g){return oa(w)._set(Po(g),"true")})).apply(this,arguments)}function zh(){ps.clear()}function oi(w,g){ps.set(w._key(),g)}function oa(w){return cr(w._redirectPersistence)}function Po(w){return Jt(Gh,w.config.apiKey,w.name)}function Oo(w,g,_){return function Gn(w,g,_){return Xs.apply(this,arguments)}(w,g,_)}function Xs(){return(Xs=(0,f.Z)(function*(w,g,_){const C=ir(w);ye(w,g,Os),yield C._initializationPromise;const R=Ji(C,_);return yield sa(R,C),R._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Js(w,g,_){return function es(w,g,_){return Dr.apply(this,arguments)}(w,g,_)}function Dr(){return(Dr=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w);ye(C.auth,g,Os),yield C.auth._initializationPromise;const R=Ji(C.auth,_);yield sa(R,C.auth);const k=yield ed(C);return R._openRedirect(C.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function Ga(w,g,_){return function Wh(w,g,_){return Jc.apply(this,arguments)}(w,g,_)}function Jc(){return(Jc=(0,f.Z)(function*(w,g,_){const C=(0,H.m9)(w);ye(C.auth,g,Os),yield C.auth._initializationPromise;const R=Ji(C.auth,_);yield Mc(!1,C,g.providerId),yield sa(R,C.auth);const k=yield ed(C);return R._openRedirect(C.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function Bs(w,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(w,g){return yield ir(w)._initializationPromise,zn(w,g,!1)})).apply(this,arguments)}function zn(w,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(w,g,_=!1){const C=ir(w),R=Ji(C,g),Q=yield new Mu(C,R,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield C._persistUserIfCurrent(Q.user),yield C._setRedirectUser(null,g)),Q})).apply(this,arguments)}function ed(w){return ts.apply(this,arguments)}function ts(){return(ts=(0,f.Z)(function*(w){const g=ii(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class td{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ht(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!aa(g)){const R=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(De(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bl(g))}saveEventToCache(g){this.cachedEventUids.add(Bl(g)),this.lastProcessedEventTime=Date.now()}}function Bl(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function aa({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function ua(w){return kp.apply(this,arguments)}function kp(){return(kp=(0,f.Z)(function*(w,g={}){return Se(w,"GET","/v1/projects",g)})).apply(this,arguments)}const jl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$v=/^https?/;function gs(){return(gs=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield ua(w);for(const _ of g)try{if(za(_))return}catch{}re(w,"unauthorized-domain")})).apply(this,arguments)}function za(w){const g=tn(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===C}if(!$v.test(_))return!1;if(jl.test(w))return C===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(C)}const or=new xi(3e4,6e4);function eo(){const w=Xn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let ms=null;const _s=new xi(5e3,15e3),nd="__/auth/iframe",rd="emulator/auth/iframe",la={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function id(w){const g=w.config;te(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?Ks(g,rd):`https://${w.config.authDomain}/${nd}`,C={apiKey:g.apiKey,appName:w.name,v:O.SDK_VERSION},R=qh.get(w.config.apiHost);R&&(C.eid=R);const k=w._getFrameworks();return k.length&&(C.fw=k.join(",")),`${_}?${(0,H.xO)(C).slice(1)}`}function I(){return I=(0,f.Z)(function*(w){const g=yield function Bi(w){return ms=ms||function xu(w){return new Promise((g,_)=>{var C,R,k;function Q(){eo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{eo(),_(De(w,"network-request-failed"))},timeout:or.get()})}if(null!==(R=null===(C=Xn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(k=Xn().gapi)||void 0===k||!k.load){const pe=vo("iframefcb");return Xn()[pe]=()=>{gapi.load?Q():_(De(w,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${pe}`).catch($e=>_($e))}Q()}}).catch(g=>{throw ms=null,g})}(w),ms}(w),_=Xn().gapi;return te(_,w,"internal-error"),g.open({where:document.body,url:id(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:la,dontclear:!0},C=>new Promise(function(){var R=(0,f.Z)(function*(k,Q){yield C.restyle({setHideOnLeave:!1});const pe=De(w,"network-request-failed"),$e=Xn().setTimeout(()=>{Q(pe)},_s.get());function et(){Xn().clearTimeout($e),k(C)}C.ping(et).then(et,()=>{Q(pe)})});return function(k,Q){return R.apply(this,arguments)}}()))}),I.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ge{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const lt="__/auth/handler",kt="emulator/auth/handler",Nt=encodeURIComponent("fac");function Wr(w,g,_,C,R,k){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(w,g,_,C,R,k){te(w.config.authDomain,w,"auth-domain-config-required"),te(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:O.SDK_VERSION,eventId:R};if(g instanceof Os){g.setDefaultLanguage(w.languageCode),Q.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(Q.customParameters=JSON.stringify(g.getCustomParameters()));for(const[It,Yt]of Object.entries(k||{}))Q[It]=Yt}if(g instanceof Qo){const It=g.getScopes().filter(Yt=>""!==Yt);It.length>0&&(Q.scopes=It.join(","))}w.tenantId&&(Q.tid=w.tenantId);const pe=Q;for(const It of Object.keys(pe))void 0===pe[It]&&delete pe[It];const $e=yield w._getAppCheckToken(),et=$e?`#${Nt}=${encodeURIComponent($e)}`:"";return`${function ca({config:w}){return w.emulator?Ks(w,kt):`https://${w.authDomain}/${lt}`}(w)}?${(0,H.xO)(pe).slice(1)}${et}`})).apply(this,arguments)}const to="webStorageSupport",ai=class Wa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pr,this._completeRedirectFn=zn,this._overrideRedirectResult=oi}_openPopup(g,_,C,R){var k=this;return(0,f.Z)(function*(){var Q;Ge(null===(Q=k.eventManagers[g._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const pe=yield Wr(g,_,C,tn(),R);return function Qe(w,g,_,C=500,R=600){const k=Math.max((window.screen.availHeight-R)/2,0).toString(),Q=Math.max((window.screen.availWidth-C)/2,0).toString();let pe="";const $e=Object.assign(Object.assign({},T),{width:C.toString(),height:R.toString(),top:k,left:Q}),et=(0,H.z$)().toLowerCase();_&&(pe=P(et)?"_blank":_),F(et)&&(g=g||"http://localhost",$e.scrollbars="yes");const It=Object.entries($e).reduce((wi,[da,Vp])=>`${wi}${da}=${Vp},`,"");if(function Rt(w=(0,H.z$)()){var g;return yt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(et)&&"_self"!==pe)return function ze(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",pe),new ge(null);const Yt=window.open(g||"",pe,It);te(Yt,w,"popup-blocked");try{Yt.focus()}catch{}return new ge(Yt)}(g,pe,ii())})()}_openRedirect(g,_,C,R){var k=this;return(0,f.Z)(function*(){return yield k._originValidation(g),function Wc(w){Xn().location.href=w}(yield Wr(g,_,C,tn(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:k}=this.eventManagers[_];return R?Promise.resolve(R):(Ge(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const C=yield function Nu(w){return I.apply(this,arguments)}(g),R=new td(g);return C.register("authEvent",k=>(te(k?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=C,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(to,{type:to},R=>{var k;const Q=null===(k=R?.[0])||void 0===k?void 0:k[to];void 0!==Q&&_(!!Q),re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ru(w){return gs.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Bt()||V()||yt()}};class ko{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return nt("unexpected MultiFactorSessionType")}}}class Pu extends ko{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Pu(g)}_finalizeEnroll(g,_,C){return function Rh(w,g){return Se(w,"POST","/v2/accounts/mfaEnrollment:finalize",de(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Lh(w,g){return Se(w,"POST","/v2/accounts/mfaSignIn:finalize",de(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sd=(()=>{class w{constructor(){}static assertion(_){return Pu._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Ou="@firebase/auth";class Gv{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),function Lp(w){(0,O._registerComponent)(new ve.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),k=g.getProvider("app-check-internal"),{apiKey:Q,authDomain:pe}=C.options;te(Q&&!Q.includes(":"),"invalid-api-key",{appName:C.name});const $e={apiKey:Q,authDomain:pe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nr(w)},et=new dl(C,R,k,$e);return function zm(w,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(cr);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,g?.popupRedirectResolver)}(et,_),et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ve.wA("auth-internal",g=>{const _=ir(g.getProvider("auth").getImmediate());return new Gv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Ou,"0.23.2",function zv(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(Ou,"0.23.2","esm2017")}("Browser")},9058:(mt,Ae,L)=>{L.d(Ae,{$s:()=>cr,BH:()=>ue,DV:()=>tr,Dv:()=>as,G6:()=>Ks,GJ:()=>On,L:()=>we,LL:()=>je,Pz:()=>De,Sg:()=>ye,UG:()=>nt,UI:()=>Ki,US:()=>ve,Wj:()=>Ft,Wl:()=>At,Yr:()=>xi,ZB:()=>ie,ZR:()=>Se,aH:()=>re,b$:()=>fr,cI:()=>fn,dS:()=>Zi,eu:()=>me,g5:()=>O,gK:()=>mn,gQ:()=>wt,h$:()=>xe,hl:()=>he,hu:()=>H,jU:()=>Ge,lb:()=>kn,m9:()=>Jt,ne:()=>Xt,p$:()=>q,pd:()=>ft,r3:()=>pn,ru:()=>tn,tV:()=>z,uI:()=>te,ug:()=>Ns,vZ:()=>Rr,w1:()=>Rs,w9:()=>Hn,xO:()=>xs,xb:()=>Ni,z$:()=>ke,zI:()=>be,zd:()=>Ye});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},H=function(W,G){if(!W)throw O(G)},O=function(W){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+W)},J=function(W){const G=[];let F=0;for(let V=0;V<W.length;V++){let P=W.charCodeAt(V);P<128?G[F++]=P:P<2048?(G[F++]=P>>6|192,G[F++]=63&P|128):55296==(64512&P)&&V+1<W.length&&56320==(64512&W.charCodeAt(V+1))?(P=65536+((1023&P)<<10)+(1023&W.charCodeAt(++V)),G[F++]=P>>18|240,G[F++]=P>>12&63|128,G[F++]=P>>6&63|128,G[F++]=63&P|128):(G[F++]=P>>12|224,G[F++]=P>>6&63|128,G[F++]=63&P|128)}return G},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let P=0;P<W.length;P+=3){const ee=W[P],Ie=P+1<W.length,qe=Ie?W[P+1]:0,Et=P+2<W.length,yt=Et?W[P+2]:0;let wn=(15&qe)<<2|yt>>6,Bt=63&yt;Et||(Bt=64,Ie||(wn=64)),V.push(F[ee>>2],F[(3&ee)<<4|qe>>4],F[wn],F[Bt])}return V.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(J(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let F=0,V=0;for(;F<W.length;){const P=W[F++];if(P<128)G[V++]=String.fromCharCode(P);else if(P>191&&P<224){const ee=W[F++];G[V++]=String.fromCharCode((31&P)<<6|63&ee)}else if(P>239&&P<365){const Et=((7&P)<<18|(63&W[F++])<<12|(63&W[F++])<<6|63&W[F++])-65536;G[V++]=String.fromCharCode(55296+(Et>>10)),G[V++]=String.fromCharCode(56320+(1023&Et))}else{const ee=W[F++],Ie=W[F++];G[V++]=String.fromCharCode((15&P)<<12|(63&ee)<<6|63&Ie)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const F=G?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let P=0;P<W.length;){const ee=F[W.charAt(P++)],qe=P<W.length?F[W.charAt(P)]:0;++P;const yt=P<W.length?F[W.charAt(P)]:64;++P;const Rt=P<W.length?F[W.charAt(P)]:64;if(++P,null==ee||null==qe||null==yt||null==Rt)throw new Ee;V.push(ee<<2|qe>>4),64!==yt&&(V.push(qe<<4&240|yt>>2),64!==Rt&&V.push(yt<<6&192|Rt))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(W){const G=J(W);return ve.encodeByteArray(G,!0)},we=function(W){return xe(W).replace(/\./g,"")},z=function(W){try{return ve.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function q(W){return ie(void 0,W)}function ie(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const F in G)!G.hasOwnProperty(F)||!Le(F)||(W[F]=ie(W[F],G[F]));return W}function Le(W){return"__proto__"!==W}const Fe=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=W&&z(W[1]);return G&&JSON.parse(G)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},re=()=>{var W;return null===(W=Fe())||void 0===W?void 0:W.config},De=W=>{var G;return null===(G=Fe())||void 0===G?void 0:G[`_${W}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,F)=>{this.resolve=G,this.reject=F})}wrapCallback(G){return(F,V)=>{F?this.reject(F):this.resolve(V),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(F):G(F,V))}}}function ye(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=G||"demo-project",P=W.iat||0,ee=W.sub||W.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:P,exp:P+3600,auth_time:P,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},W);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(Ie)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function nt(){var W;const G=null===(W=Fe())||void 0===W?void 0:W.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ge(){return"object"==typeof self&&self.self===self}function tn(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function fr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rs(){const W=ke();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function xi(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function Ks(){return!nt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function me(){return new Promise((W,G)=>{try{let F=!0;const V="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(V);P.onsuccess=()=>{P.result.close(),F||self.indexedDB.deleteDatabase(V),W(!0)},P.onupgradeneeded=()=>{F=!1},P.onerror=()=>{var ee;G((null===(ee=P.error)||void 0===ee?void 0:ee.message)||"")}}catch(F){G(F)}})}function be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Se extends Error{constructor(G,F,V){super(F),this.code=G,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(G,F,V){this.service=G,this.serviceName=F,this.errors=V}create(G,...F){const V=F[0]||{},P=`${this.service}/${G}`,ee=this.errors[G],Ie=ee?function Je(W,G){return W.replace(ut,(F,V)=>{const P=G[V];return null!=P?String(P):`<${V}?>`})}(ee,V):"Error";return new Se(P,`${this.serviceName}: ${Ie} (${P}).`,V)}}const ut=/\{\$([^}]+)}/g;function fn(W){return JSON.parse(W)}function At(W){return JSON.stringify(W)}const an=function(W){let G={},F={},V={},P="";try{const ee=W.split(".");G=fn(z(ee[0])||""),F=fn(z(ee[1])||""),P=ee[2],V=F.d||{},delete F.d}catch{}return{header:G,claims:F,data:V,signature:P}},Hn=function(W){const F=an(W).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},On=function(W){const G=an(W).claims;return"object"==typeof G&&!0===G.admin};function pn(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function tr(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function Ni(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function Ki(W,G,F){const V={};for(const P in W)Object.prototype.hasOwnProperty.call(W,P)&&(V[P]=G.call(F,W[P],P,W));return V}function Rr(W,G){if(W===G)return!0;const F=Object.keys(W),V=Object.keys(G);for(const P of F){if(!V.includes(P))return!1;const ee=W[P],Ie=G[P];if(qn(ee)&&qn(Ie)){if(!Rr(ee,Ie))return!1}else if(ee!==Ie)return!1}for(const P of V)if(!F.includes(P))return!1;return!0}function qn(W){return null!==W&&"object"==typeof W}function xs(W){const G=[];for(const[F,V]of Object.entries(W))Array.isArray(V)?V.forEach(P=>{G.push(encodeURIComponent(F)+"="+encodeURIComponent(P))}):G.push(encodeURIComponent(F)+"="+encodeURIComponent(V));return G.length?"&"+G.join("&"):""}function Ye(W){const G={};return W.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[P,ee]=V.split("=");G[decodeURIComponent(P)]=decodeURIComponent(ee)}}),G}function ft(W){const G=W.indexOf("?");if(!G)return"";const F=W.indexOf("#",G);return W.substring(G,F>0?F:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,F){F||(F=0);const V=this.W_;if("string"==typeof G)for(let Rt=0;Rt<16;Rt++)V[Rt]=G.charCodeAt(F)<<24|G.charCodeAt(F+1)<<16|G.charCodeAt(F+2)<<8|G.charCodeAt(F+3),F+=4;else for(let Rt=0;Rt<16;Rt++)V[Rt]=G[F]<<24|G[F+1]<<16|G[F+2]<<8|G[F+3],F+=4;for(let Rt=16;Rt<80;Rt++){const wn=V[Rt-3]^V[Rt-8]^V[Rt-14]^V[Rt-16];V[Rt]=4294967295&(wn<<1|wn>>>31)}let yt,pt,P=this.chain_[0],ee=this.chain_[1],Ie=this.chain_[2],qe=this.chain_[3],Et=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(yt=qe^ee&(Ie^qe),pt=1518500249):(yt=ee^Ie^qe,pt=1859775393):Rt<60?(yt=ee&Ie|qe&(ee|Ie),pt=2400959708):(yt=ee^Ie^qe,pt=3395469782);const wn=(P<<5|P>>>27)+yt+Et+pt+V[Rt]&4294967295;Et=qe,qe=Ie,Ie=4294967295&(ee<<30|ee>>>2),ee=P,P=wn}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+ee&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+qe&4294967295,this.chain_[4]=this.chain_[4]+Et&4294967295}update(G,F){if(null==G)return;void 0===F&&(F=G.length);const V=F-this.blockSize;let P=0;const ee=this.buf_;let Ie=this.inbuf_;for(;P<F;){if(0===Ie)for(;P<=V;)this.compress_(G,P),P+=this.blockSize;if("string"==typeof G){for(;P<F;)if(ee[Ie]=G.charCodeAt(P),++Ie,++P,Ie===this.blockSize){this.compress_(ee),Ie=0;break}}else for(;P<F;)if(ee[Ie]=G[P],++Ie,++P,Ie===this.blockSize){this.compress_(ee),Ie=0;break}}this.inbuf_=Ie,this.total_+=F}digest(){const G=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&F,F/=256;this.compress_(this.buf_);let V=0;for(let P=0;P<5;P++)for(let ee=24;ee>=0;ee-=8)G[V]=this.chain_[P]>>ee&255,++V;return G}}function Xt(W,G){const F=new lr(W,G);return F.subscribe.bind(F)}class lr{constructor(G,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{G(this)}).catch(V=>{this.error(V)})}next(G){this.forEachObserver(F=>{F.next(G)})}error(G){this.forEachObserver(F=>{F.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,F,V){let P;if(void 0===G&&void 0===F&&void 0===V)throw new Error("Missing Observer.");P=function qt(W,G){if("object"!=typeof W||null===W)return!1;for(const F of G)if(F in W&&"function"==typeof W[F])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:F,complete:V},void 0===P.next&&(P.next=nr),void 0===P.error&&(P.error=nr),void 0===P.complete&&(P.complete=nr);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),ee}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,G)}sendOne(G,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{F(this.observers[G])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}const as=function(W,G,F,V){let P;if(V<G?P="at least "+G:V>F&&(P=0===F?"none":"no more than "+F),P)throw new Error(W+" failed: Was called with "+V+(1===V?" argument.":" arguments.")+" Expects "+P+".")};function mn(W,G){return`${W} failed: ${G} argument `}function Ft(W,G,F,V){if((!V||F)&&"function"!=typeof F)throw new Error(mn(W,G)+"must be a valid function.")}function kn(W,G,F,V){if((!V||F)&&("object"!=typeof F||null===F))throw new Error(mn(W,G)+"must be a valid context object.")}const Zi=function(W){const G=[];let F=0;for(let V=0;V<W.length;V++){let P=W.charCodeAt(V);if(P>=55296&&P<=56319){const ee=P-55296;V++,H(V<W.length,"Surrogate pair missing trail surrogate."),P=65536+(ee<<10)+(W.charCodeAt(V)-56320)}P<128?G[F++]=P:P<2048?(G[F++]=P>>6|192,G[F++]=63&P|128):P<65536?(G[F++]=P>>12|224,G[F++]=P>>6&63|128,G[F++]=63&P|128):(G[F++]=P>>18|240,G[F++]=P>>12&63|128,G[F++]=P>>6&63|128,G[F++]=63&P|128)}return G},Ns=function(W){let G=0;for(let F=0;F<W.length;F++){const V=W.charCodeAt(F);V<128?G++:V<2048?G+=2:V>=55296&&V<=56319?(G+=4,F++):G+=3}return G},Kn=1e3,Dn=2,rr=144e5,Fn=.5;function cr(W,G=Kn,F=Dn){const V=G*Math.pow(F,W),P=Math.round(Fn*V*(Math.random()-.5)*2);return Math.min(rr,V+P)}function Jt(W){return W&&W._delegate?W._delegate:W}},1024:(mt,Ae,L)=>{var f=L(5879);let H=null;function O(){return H}class ae{}const ve=new f.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(we)},providedIn:"platform"}),n})();const xe=new f.OlP("Location Initialized");let we=(()=>{class n extends Ee{constructor(){super(),this._doc=(0,f.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function z(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ie(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ke)},providedIn:"root"}),n})();const Ne=new f.OlP("appBaseHref");let Ke=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return z(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ie(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+ie(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+ie(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee),f.LFG(Ne,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=z(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+ie(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+ie(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee),f.LFG(Ne,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(ht(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ie(r))}normalize(t){return n.stripTrailingSlash(function Ct(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ht(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ie,n.joinWithSlash=z,n.stripTrailingSlash=q,n.\u0275fac=function(t){return new(t||n)(f.LFG(Le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Fe(){return new Ze((0,f.LFG)(Le))}()},providedIn:"root"}),n})();function ht(n){return n.replace(/\/index.html$/,"")}function qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class fp{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new fp(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),ir(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ir(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ir(n,e){n.context.$implicit=e.item}let hu=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class zm{constructor(){this.$implicit=null,this.ngIf=null}}function fh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function ls(n){return"server"===n}let Qo=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Pi((0,f.LFG)(ve),window)}),n})();class Pi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xo(this.window.history)||Xo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class kr{}class La extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gr extends La{static makeCurrent(){!function J(n){H||(H=n)}(new Gr)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Th(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}();return null==t?null:function Qi(n){To=To||document.createElement("a"),To.setAttribute("href",n);const e=To.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qo(document.cookie,e)}}let To,Va=null,Sh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ah=new f.OlP("EventManagerPlugins");let Fs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ah),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Mh{constructor(e){this._doc=e}}const Hc="ng-app-id";let Sl=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ls(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Hc}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Hc),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Hc,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xi=/%COMP%/g,Zm=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Cu(n,e){return e.map(t=>t.replace(Xi,n))}let hs=(()=>{class n{constructor(t,r,i,a,l,h,m,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=h,this.ngZone=m,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=ls(h),this.defaultRenderer=new Ml(t,l,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===f.ifc.ShadowDom&&(r={...r,encapsulation:f.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof nn?i.applyToHost(t):i instanceof Re&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,h=this.ngZone,m=this.eventManager,v=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case f.ifc.Emulated:a=new nn(m,v,r,this.appId,D,l,h,S);break;case f.ifc.ShadowDom:return new Ap(m,v,t,r,l,h,this.nonce,S);default:a=new Re(m,v,r,D,l,h,S)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fs),f.LFG(Sl),f.LFG(f.AFp),f.LFG(Zm),f.LFG(ve),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ml{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ua[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ua[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ua[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=O().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function xh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ap extends Ml{constructor(e,t,r,i,a,l,h,m){super(e,a,l,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=Cu(i.id,i.styles);for(const D of v){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Re extends Ml{constructor(e,t,r,i,a,l,h,m){super(e,a,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=m?Cu(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nn extends Re{constructor(e,t,r,i,a,l,h,m){const v=i+"-"+r.id;super(e,t,r,a,l,h,m,v),this.contentAttr=function Gc(n){return"_ngcontent-%COMP%".replace(Xi,n)}(v),this.hostAttr=function Tp(n){return"_nghost-%COMP%".replace(Xi,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let zc=(()=>{class n extends Mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Rl=["alt","control","meta","shift"],pr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let xl=(()=>{class n extends Mh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Rl.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=pr[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Rl.forEach(l=>{l!==i&&(0,Mp[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Nl=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Nh(){Gr.makeCurrent()},multi:!0},{provide:ve,useFactory:function Fr(){return(0,f.RDi)(document),document},deps:[]}]),Vn=new f.OlP(""),Vs=[{provide:f.rWj,useClass:class Dp{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new f.vHH(5103,!1);return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(m=>{m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],gr=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Ph(){return new f.qLn},deps:[]},{provide:Ah,useClass:zc,multi:!0,deps:[ve,f.R0b,f.Lbi]},{provide:Ah,useClass:xl,multi:!0,deps:[ve]},hs,Sl,Fs,{provide:f.FYo,useExisting:hs},{provide:kr,useClass:Sh,deps:[]},[]];let qc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vn,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...gr,...Vs],imports:[Ps,f.hGG]}),n})(),Ol=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Tu(){return new Ol((0,f.LFG)(ve))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var si=L(5592),Ro=L(4674),un=L(2459),gt=L(2096),ki=L(5619);const{isArray:Ul}=Array,{getPrototypeOf:ra,prototype:Xc,keys:Np}=Object;function ja(n){if(1===n.length){const e=n[0];if(Ul(e))return{args:e,keys:null};if(function Xm(n){return n&&"object"==typeof n&&ra(n)===Xc}(e)){const t=Np(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ji=L(2737),St=L(7398);const{isArray:Fi}=Array;function Ha(n){return(0,St.U)(e=>function $h(n,e){return Fi(e)?n(...e):n(e)}(n,e))}var Li=L(4564);function ia(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var zr=L(8251),fs=L(7103);function xo(...n){const e=(0,Li.yG)(n),t=(0,Li.jO)(n),{args:r,keys:i}=ja(n);if(0===r.length)return(0,un.D)([],e);const a=new si.y(function Jm(n,e,t=Ji.y){return r=>{Vi(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)Vi(e,()=>{const v=(0,un.D)(n[m],e);let D=!1;v.subscribe((0,zr.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ia(i,l):Ji.y));return t?a.pipe(Ha(t)):a}function Vi(n,e,t){n?(0,fs.f)(t,n,e):e()}const No=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qs=L(7537);function ps(...n){return function Gh(){return(0,Qs.J)(1)}()((0,un.D)(n,(0,Li.yG)(n)))}var Mu=L(4829);function Op(n){return new si.y(e=>{(0,Mu.Xf)(n()).subscribe(e)})}var $a=L(8407);function sa(n,e){const t=(0,Ro.m)(n)?n:()=>n,r=i=>i.error(t());return new si.y(e?i=>e.schedule(r,0,i):r)}var Us=L(6232),zh=L(7394),oi=L(9360);function oa(){return(0,oi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Po extends si.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,oi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zh.w0.EMPTY)}return e}refCount(){return oa()(this)}}var Oo=L(8645),Gn=L(4664);function Xs(n){return n<=0?()=>Us.E:(0,oi.e)((e,t)=>{let r=0;e.subscribe((0,zr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Js(...n){const e=(0,Li.yG)(n);return(0,oi.e)((t,r)=>{(e?ps(n,t,e):ps(n,t)).subscribe(r)})}function es(n,e){return(0,oi.e)((t,r)=>{let i=0;t.subscribe((0,zr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Dr=L(1631);function Ga(n){return(0,oi.e)((e,t)=>{let r=!1;e.subscribe((0,zr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wh(n=Jc){return(0,oi.e)((e,t)=>{let r=!1;e.subscribe((0,zr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Jc(){return new No}function Bs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?es((i,a)=>n(i,a,r)):Ji.y,Xs(1),t?Ga(e):Wh(()=>new No))}function Ui(n,e){return(0,Ro.m)(e)?(0,Dr.z)(n,e,1):(0,Dr.z)(n,1)}var zn=L(9397);function vi(n){return(0,oi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,zr.x)(t,void 0,void 0,l=>{a=(0,Mu.Xf)(n(l,vi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ts(n,e){return(0,oi.e)(function ed(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,zr.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}function js(n){return n<=0?()=>Us.E:(0,oi.e)((e,t)=>{let r=[];e.subscribe((0,zr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function aa(n){return(0,oi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ht="primary",ua=Symbol("RouteTitle");class kp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jl(n){return new kp(n)}function $v(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!za(n[i],e[i]))return!1;return!0}function za(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function or(n){return n.length>0?n[n.length-1]:null}function eo(n){return function Qc(n){return!!n&&(n instanceof si.y||(0,Ro.m)(n.lift)&&(0,Ro.m)(n.subscribe))}(n)?n:(0,f.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,gt.of)(n)}const xu={exact:function nd(n,e,t){if(!B(n.segments,e.segments)||!id(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nd(n.children[r],e.children[r],t))return!1;return!0},subset:la},ms={exact:function _s(n,e){return gs(n,e)},subset:function rd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>za(n[t],e[t]))},ignored:()=>!0};function Bi(n,e,t){return xu[t.paths](n.root,e.root,t.matrixParams)&&ms[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function la(n,e,t){return qh(n,e,e.segments,t)}function qh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!B(i,t)||e.hasChildren()||!id(i,t,r))}if(n.segments.length===t.length){if(!B(n.segments,t)||!id(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!la(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(B(n.segments,i)&&id(n.segments,i,r)&&n.children[Ht])&&qh(n.children[Ht],e,a,r)}}function id(n,e,t){return e.every((r,i)=>ms[t](n[i].parameters,r.parameters))}class Nu{constructor(e=new I([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jl(this.queryParams)),this._queryParamMap}toString(){return Qe.serialize(this)}}class I{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ze(this)}}class T{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jl(this.parameters)),this._parameterMap}toString(){return Wa(this)}}function B(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new ge},providedIn:"root"}),n})();class ge{parse(e){const t=new Gv(e);return new Nu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lt(e.root,!0)}`,r=function ko(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Nt(t)}=${Nt(i)}`).join("&"):`${Nt(t)}=${Nt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wr(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qe=new ge;function ze(n){return n.segments.map(e=>Wa(e)).join("/")}function lt(n,e){if(!n.hasChildren())return ze(n);if(e){const t=n.children[Ht]?lt(n.children[Ht],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Ht&&r.push(`${i}:${lt(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function K(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ht&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ht&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ht?[lt(n.children[Ht],!1)]:[`${i}:${lt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${ze(n)}/${t[0]}`:`${ze(n)}/(${t.join("//")})`}}function kt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nt(n){return kt(n).replace(/%3B/gi,";")}function Un(n){return kt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ca(n){return decodeURIComponent(n)}function to(n){return ca(n.replace(/\+/g,"%20"))}function Wa(n){return`${Un(n.path)}${function ai(n){return Object.keys(n).map(e=>`;${Un(e)}=${Un(n[e])}`).join("")}(n.parameters)}`}const Pu=/^[^\/()?;#]+/;function sd(n){const e=n.match(Pu);return e?e[0]:""}const Fp=/^[^\/()?;=#]+/,e_=/^[^=?&#]+/,Ou=/^[^&#]+/;class Gv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new I(e,t)),r}parseSegment(){const e=sd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new T(ca(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Kh(n){const e=n.match(Fp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sd(this.remaining);i&&(r=i,this.capture(r))}e[ca(t)]=ca(r)}parseQueryParam(e){const t=function Zh(n){const e=n.match(e_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Hl(n){const e=n.match(Ou);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=to(t),a=to(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ht);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ht]:new I([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function zv(n){return n.segments.length>0?new I([],{[Ht]:n}):n}function Lp(n){const e={};for(const r of Object.keys(n.children)){const a=Lp(n.children[r]);if(r===Ht&&0===a.segments.length&&a.hasChildren())for(const[l,h]of Object.entries(a.children))e[l]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Wv(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new I(n.segments.concat(e.segments),e.children)}return n}(new I(n.segments,e))}function $l(n){return n instanceof Nu}function n_(n){let e;const i=zv(function t(a){const l={};for(const m of a.children){const v=t(m);l[m.outlet]=v}const h=new I(a.url,l);return a===n&&(e=h),h}(n.root));return e??i}function qv(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return _(i,i,i,t,r);const a=function k(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new R(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([m,v])=>{h[m]="string"==typeof v?v.split("/"):v}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new R(t,e,r)}(e);if(a.toRoot())return _(i,i,new I([],{}),t,r);const l=function pe(n,e,t){if(n.isAbsolute)return new Q(e,!0,0);if(!t)return new Q(e,!1,NaN);if(null===t.parent)return new Q(t,!0,0);const r=w(n.commands[0])?0:1;return function $e(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Q(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=l.processChildren?Yt(l.segmentGroup,l.index,a.commands):It(l.segmentGroup,l.index,a.commands);return _(i,l.segmentGroup,h,t,r)}function w(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function g(n){return"object"==typeof n&&null!=n&&n.outlets}function _(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([m,v])=>{a[m]=Array.isArray(v)?v.map(D=>`${D}`):`${v}`}),l=n===e?t:C(n,e,t);const h=zv(Lp(l));return new Nu(h,a,i)}function C(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:C(a,e,t)}),new I(n.segments,r)}class R{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&w(r[0]))throw new f.vHH(4003,!1);const i=r.find(g);if(i&&i!==or(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Q{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function It(n,e,t){if(n||(n=new I([],{})),0===n.segments.length&&n.hasChildren())return Yt(n,e,t);const r=function wi(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(g(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Up(m,v,l))return a;r+=2}else{if(!Up(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new I(n.segments.slice(0,r.pathIndex),{});return a.children[Ht]=new I(n.segments.slice(r.pathIndex),n.children),Yt(a,0,i)}return r.match&&0===i.length?new I(n.segments,{}):r.match&&!n.hasChildren()?da(n,e,t):r.match?Yt(n,0,i):da(n,e,t)}function Yt(n,e,t){if(0===t.length)return new I(n.segments,{});{const r=function et(n){return g(n[0])?n[0].outlets:{[Ht]:n}}(t),i={};if(!r[Ht]&&n.children[Ht]&&1===n.numberOfChildren&&0===n.children[Ht].segments.length){const a=Yt(n.children[Ht],e,t);return new I(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=It(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new I(n.segments,i)}}function da(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(g(a)){const m=Vp(a.outlets);return new I(r,m)}if(0===i&&w(t[0])){r.push(new T(n.segments[e].path,r_(t[0]))),i++;continue}const l=g(a)?a.outlets[Ht]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&w(h)?(r.push(new T(l,r_(h))),i+=2):(r.push(new T(l,{})),i++)}return new I(r,{})}function Vp(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=da(new I([],{}),0,r))}),e}function r_(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Up(n,e,t){return n==t.path&&gs(e,t.parameters)}const od="imperative";class no{constructor(e,t){this.id=e,this.url=t}}class qa extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ro extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gl extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ka extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class ad extends no{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zl extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yh extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i_ extends no{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class s_ extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o_ extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Za{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class NA{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aC{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kv{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class OA{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qh,this.attachRef=null}}let Qh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new OA,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ns(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ns(e,this._root).map(t=>t.value)}}function Zv(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zv(n,t);if(r)return r}return null}function ns(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ns(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ud(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class a_ extends lC{constructor(e,t){super(e),this.snapshot=t,u_(this,e)}toString(){return this.snapshot.toString()}}function ji(n,e){const t=function Bp(n,e){const l=new jp([],{},{},"",{},Ht,e,null,{});return new cC("",new ha(l,[]))}(0,e),r=new ki.X([new T("",{})]),i=new ki.X({}),a=new ki.X({}),l=new ki.X({}),h=new ki.X(""),m=new ld(r,i,l,h,a,Ht,e,t.root);return m.snapshot=t.root,new a_(new ha(m,[]),t)}class ld{constructor(e,t,r,i,a,l,h,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=h,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,St.U)(v=>v[ua]))??(0,gt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>jl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>jl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function kA(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class jp{get title(){return this.data?.[ua]}constructor(e,t,r,i,a,l,h,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cC extends lC{constructor(e,t){super(t),this.url=e,u_(this,t)}toString(){return dC(this._root)}}function u_(n,e){e.value._routerState=n,e.children.forEach(t=>u_(n,t))}function dC(n){const e=n.children.length>0?` { ${n.children.map(dC).join(", ")} } `:"";return`${n.value}${e}`}function l_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),gs(e.params,t.params)||n.paramsSubject.next(t.params),function Ru(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),gs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qv(n,e){const t=gs(n.params,e.params)&&function M(n,e){return B(n,e)&&n.every((t,r)=>gs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qv(n.parent,e.parent))}let Xv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Qh),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(Xh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new Jv(t,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class Jv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ld?this.route:e===Qh?this.childContexts:this.parent.get(e,t)}}const Xh=new f.OlP("");let hC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=xo([r.queryParams,r.params,r.data]).pipe((0,Gn.w)(([a,l,h],m)=>(h={...a,...l,...h},0===m?(0,gt.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,f.qFp)(r.component);if(l)for(const{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function $p(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function FA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $p(n,r,i);return $p(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>$p(n,h)),l}}const r=function fC(n){return new ld(new ki.X(n.url),new ki.X(n.params),new ki.X(n.queryParams),new ki.X(n.fragment),new ki.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>$p(n,a));return new ha(r,i)}}const c_="ngNavigationCancelingError";function ew(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=$l(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cd(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function cd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[c_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Gp(n){return tw(n)&&$l(n.url)}function tw(n){return n&&n[c_]}let d_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Xv],encapsulation:2}),n})();function f_(n){const e=n.children&&n.children.map(f_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=d_),t}function io(n){return n.outlet||Ht}function zp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class dd{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),l_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ud(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ud(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ud(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ud(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Kv(a.value.snapshot))}),e.children.length&&this.forwardEvent(new PA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(l_(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),l_(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=zp(i.snapshot);l.attachRef=null,l.route=i,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wp{constructor(e,t){this.component=e,this.route=t}}function UA(n,e,t){const r=n._root;return qp(r,e?e._root:null,t,[r.value])}function ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function qp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ud(e);return n.children.forEach(l=>{(function _C(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function yC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!B(n.url,e.url);case"pathParamsOrQueryParamsChange":return!B(n.url,e.url)||!gs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qv(n,e)||!gs(n.queryParams,e.queryParams);default:return!Qv(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new rw(r)):(a.data=l.data,a._resolvedData=l._resolvedData),qp(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Wp(h.outlet.component,l))}else l&&Jh(e,h,i),i.canActivateChecks.push(new rw(r)),qp(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,h])=>Jh(h,t.getContext(l),i)),i}function Jh(n,e,t){const r=ud(n),i=n.value;Object.entries(r).forEach(([a,l])=>{Jh(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new Wp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hd(n){return"function"==typeof n}function ef(n){return n instanceof No||"EmptyError"===n?.name}const m_=Symbol("INITIAL_VALUE");function fd(){return(0,Gn.w)(n=>xo(n.map(e=>e.pipe(Xs(1),Js(m_)))).pipe((0,St.U)(e=>{for(const t of e)if(!0!==t){if(t===m_)return m_;if(!1===t||t instanceof Nu)return t}return!0}),es(e=>e!==m_),Xs(1)))}function CC(n){return(0,$a.z)((0,zn.b)(e=>{if($l(e))throw ew(0,e)}),(0,St.U)(e=>!0===e))}class y_{constructor(e){this.segmentGroup=e||null}}class v_{constructor(e){this.urlTree=e}}function nf(n){return sa(new y_(n))}function rf(n){return sa(new v_(n))}class bC{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,gt.of)(r);if(i.numberOfChildren>1||!i.children[Ht])return sa(new f.vHH(4e3,!1));i=i.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Nu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([h,m])=>{l[h]=this.createSegmentGroup(e,m,r,i)}),new I(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const E_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function DC(n,e,t,r,i){const a=I_(n,e,t);return a.matched?(r=function h_(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function dO(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,gt.of)(!0);const a=i.map(l=>{const h=ku(l,n);return eo(function g_(n){return n&&hd(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,gt.of)(a).pipe(fd(),CC())}(r,e,t).pipe((0,St.U)(l=>!0===l?a:{...E_}))):(0,gt.of)(a)}function I_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...E_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$v)(t,n,e);if(!i)return{...E_};const a={};Object.entries(i.posParams??{}).forEach(([h,m])=>{a[h]=m.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function TC(n,e,t,r){return t.length>0&&function qA(n,e,t){return t.some(r=>fa(n,e,r)&&io(r)!==Ht)}(n,t,r)?{segmentGroup:new I(e,WA(r,new I(t,n.children))),slicedSegments:[]}:0===t.length&&function KA(n,e,t){return t.some(r=>fa(n,e,r))}(n,t,r)?{segmentGroup:new I(n.segments,zA(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new I(n.segments,n.children),slicedSegments:t}}function zA(n,e,t,r,i){const a={};for(const l of r)if(fa(n,t,l)&&!i[io(l)]){const h=new I([],{});a[io(l)]=h}return{...i,...a}}function WA(n,e){const t={};t[Ht]=e;for(const r of n)if(""===r.path&&io(r)!==Ht){const i=new I([],{});t[io(r)]=i}return t}function fa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class fO{constructor(e,t,r,i,a,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new bC(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=TC(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ht).pipe(vi(t=>{if(t instanceof v_)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof y_?this.noMatchError(t):t}),(0,St.U)(t=>{const r=new jp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,{}),i=new ha(r,t),a=new cC("",i),l=function t_(n,e,t=null,r=null){return qv(n_(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ht).pipe(vi(r=>{throw r instanceof y_?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Yv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,un.D)(i).pipe(Ui(a=>{const l=r.children[a],h=function VA(n,e){const t=n.filter(r=>io(r)===e);return t.push(...n.filter(r=>io(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,l,a)}),ts((a,l)=>(a.push(...l),a)),Ga(null),function td(n,e){const t=arguments.length>=2;return r=>r.pipe(n?es((i,a)=>n(i,a,r)):Ji.y,js(1),t?Ga(e):Wh(()=>new No))}(),(0,Dr.z)(a=>{if(null===a)return nf(r);const l=YA(a);return function pO(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,gt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,un.D)(t).pipe(Ui(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,l).pipe(vi(m=>{if(m instanceof y_)return(0,gt.of)(null);throw m}))),Bs(h=>!!h),vi(h=>{if(ef(h))return function ZA(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,gt.of)([]):nf(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,l,h){return function Zp(n,e,t,r){return!!(io(n)===r||r!==Ht&&fa(e,t,n))&&("**"===n.path||I_(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):nf(i):nf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rf(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,Dr.z)(l=>{const h=new I(l,{});return this.processSegment(e,t,h,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=I_(t,i,a);if(!h)return nf(t);const S=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?rf(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,Dr.z)(N=>this.processSegment(e,r,t,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let h;if("**"===r.path){const m=i.length>0?or(i).parameters:{},v=new jp(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SC(r),io(r),r.component??r._loadedComponent??null,r,AC(r));h=(0,gt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=DC(t,r,i,e).pipe((0,St.U)(({matched:m,consumedSegments:v,remainingSegments:D,parameters:S})=>m?{snapshot:new jp(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SC(r),io(r),r.component??r._loadedComponent??null,r,AC(r)),consumedSegments:v,remainingSegments:D}:null));return h.pipe((0,Gn.w)(m=>null===m?nf(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gn.w)(({routes:v})=>{const D=r._loadedInjector??e,{snapshot:S,consumedSegments:N,remainingSegments:$}=m,{segmentGroup:Z,slicedSegments:se}=TC(t,N,$,v);if(0===se.length&&Z.hasChildren())return this.processChildren(D,v,Z).pipe((0,St.U)(We=>null===We?null:[new ha(S,We)]));if(0===v.length&&0===se.length)return(0,gt.of)([new ha(S,[])]);const ce=io(r)===a;return this.processSegment(D,v,Z,se,ce?Ht:a,!0).pipe((0,St.U)(We=>[new ha(S,We)]))}))))}getChildConfig(e,t,r){return t.children?(0,gt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,gt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function GA(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,gt.of)(!0);const a=i.map(l=>{const h=ku(l,n);return eo(function p_(n){return n&&hd(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,gt.of)(a).pipe(fd(),CC())}(e,t,r).pipe((0,Dr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,zn.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function aw(n){return sa(cd(!1,3))}())):(0,gt.of)({routes:[],injector:e})}}function gO(n){const e=n.value.routeConfig;return e&&""===e.path}function YA(n){const e=[],t=new Set;for(const r of n){if(!gO(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=YA(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function SC(n){return n.data||{}}function AC(n){return n.resolve||{}}function lw(n){return"string"==typeof n.title||null===n.title}function C_(n){return(0,Gn.w)(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,St.U)(()=>e)):(0,gt.of)(e)})}const Qp=new f.OlP("ROUTES");let RC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,gt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=eo(t.loadComponent()).pipe((0,St.U)(b_),(0,zn.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),aa(()=>{this.componentLoaders.delete(t)})),i=new Po(r,()=>new Oo.x).pipe(oa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,gt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,St.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v;return Array.isArray(h)?v=h:(m=h.create(t).injector,v=m.get(Qp,[],f.XFs.Self|f.XFs.Optional).flat()),{routes:v.map(f_),injector:m}}),aa(()=>{this.childrenLoaders.delete(r)})),l=new Po(a,()=>new Oo.x).pipe(oa());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return eo(t()).pipe((0,St.U)(b_),(0,Dr.z)(r=>r instanceof f.YKP||Array.isArray(r)?(0,gt.of)(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b_(n){return function mO(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sf=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Oo.x,this.configLoader=(0,f.f3M)(RC),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(X),this.rootContexts=(0,f.f3M)(Qh),this.inputBindingEnabled=null!==(0,f.f3M)(Xh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,gt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new xA(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Za(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ki.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:od,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(es(r=>0!==r.id),(0,St.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Gn.w)(r=>{let i=!1,a=!1;return(0,gt.of)(r).pipe((0,zn.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Gn.w)(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new Ka(l.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Us.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return eM(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,gt.of)(l).pipe((0,Gn.w)(D=>{const S=this.transitions?.getValue();return this.events.next(new qa(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions?.getValue()?Us.E:Promise.resolve(D)}),function XA(n,e,t,r,i,a){return(0,Dr.z)(l=>function hO(n,e,t,r,i,a,l="emptyOnly"){return new fO(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,St.U)(({state:h,tree:m})=>({...l,targetSnapshot:h,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,zn.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,r.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(N,D)}t.browserUrlTree=D.urlAfterRedirects}const S=new zl(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:S,source:N,restoredState:$,extras:Z}=l,se=new qa(D,this.urlSerializer.serialize(S),N,$);this.events.next(se);const ce=ji(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:ce,urlAfterRedirects:S,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}},(0,gt.of)(r)}{const D="";return this.events.next(new Ka(l.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Us.E}}),(0,zn.b)(l=>{const h=new Yh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,St.U)(l=>r={...l,guards:UA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function jA(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,gt.of)({...t,guardsResult:!0}):function HA(n,e,t,r){return(0,un.D)(n).pipe((0,Dr.z)(i=>function tf(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,gt.of)(!0);const l=a.map(h=>{const m=zp(e)??i,v=ku(h,m);return eo(function iw(n){return n&&hd(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Bs())});return(0,gt.of)(l).pipe(fd())}(i.component,i.route,t,e,r)),Bs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Dr.z)(h=>h&&function vC(n){return"boolean"==typeof n}(h)?function $A(n,e,t,r){return(0,un.D)(e).pipe(Ui(i=>ps(function IC(n,e){return null!==n&&e&&e(new NA(n)),(0,gt.of)(!0)}(i.route.parent,r),function EC(n,e){return null!==n&&e&&e(new aC(n)),(0,gt.of)(!0)}(i.route,r),function ow(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function cO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Op(()=>{const h=l.guards.map(m=>{const v=zp(l.node)??t,D=ku(m,v);return eo(function wC(n){return n&&hd(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(Bs())});return(0,gt.of)(h).pipe(fd())}));return(0,gt.of)(a).pipe(fd())}(n,i.path,t),function __(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,gt.of)(!0);const i=r.map(a=>Op(()=>{const l=zp(e)??t,h=ku(a,l);return eo(function Kp(n){return n&&hd(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Bs())}));return(0,gt.of)(i).pipe(fd())}(n,i.route,t))),Bs(i=>!0!==i,!0))}(r,a,n,e):(0,gt.of)(h)),(0,St.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,zn.b)(l=>{if(r.guardsResult=l.guardsResult,$l(l.guardsResult))throw ew(0,l.guardsResult);const h=new i_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),es(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),C_(l=>{if(l.guards.canActivateChecks.length)return(0,gt.of)(l).pipe((0,zn.b)(h=>{const m=new s_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),(0,Gn.w)(h=>{let m=!1;return(0,gt.of)(h).pipe(function JA(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,gt.of)(t);let a=0;return(0,un.D)(i).pipe(Ui(l=>function uw(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!lw(i)&&(a[ua]=i.title),function Fu(n,e,t,r){const i=function Yp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,gt.of)({});const a={};return(0,un.D)(i).pipe((0,Dr.z)(l=>function MC(n,e,t,r){const i=zp(e)??r,a=ku(n,i);return eo(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Bs(),(0,zn.b)(h=>{a[l]=h}))),js(1),function Bl(n){return(0,St.U)(()=>n)}(a),vi(l=>ef(l)?Us.E:sa(l)))}(a,n,e,r).pipe((0,St.U)(l=>(n._resolvedData=l,n.data=Yv(n,t).resolve,i&&lw(i)&&(n.data[ua]=i.title),null)))}(l.route,r,n,e)),(0,zn.b)(()=>a++),js(1),(0,Dr.z)(l=>a===i.length?(0,gt.of)(t):Us.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,zn.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,zn.b)(h=>{const m=new o_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),C_(l=>{const h=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,zn.b)(D=>{m.component=D}),(0,St.U)(()=>{})));for(const D of m.children)v.push(...h(D));return v};return xo(h(l.targetSnapshot.root)).pipe(Ga(),Xs(1))}),C_(()=>this.afterPreactivation()),(0,St.U)(l=>{const h=function Hp(n,e,t){const r=$p(n,e._root,t?t._root:void 0);return new a_(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,zn.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,St.U)(i=>(new dd(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Xs(1),(0,zn.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ro(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),aa(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),vi(l=>{if(a=!0,tw(l)){Gp(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new Gl(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),Gp(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||eM(r.source)};t.scheduleNavigation(m,od,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new ad(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Us.E}))}))}cancelNavigationTransition(t,r,i){const a=new Gl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eM(n){return n!==od}let tM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ht);return r}getResolvedTitleForRoute(t){return t.data[ua]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(xC)},providedIn:"root"}),n})(),xC=(()=>{class n extends tM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ol))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(iM)},providedIn:"root"}),n})();class rM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let iM=(()=>{class n extends rM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D_=new f.OlP("",{providedIn:"root",factory:()=>({})});let NC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(T_)},providedIn:"root"}),n})(),T_=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var so=(()=>((so=so||{})[so.COMPLETE=0]="COMPLETE",so[so.FAILED=1]="FAILED",so[so.REDIRECTING=2]="REDIRECTING",so))();function S_(n,e){n.events.pipe(es(t=>t instanceof ro||t instanceof Gl||t instanceof ad||t instanceof Ka),(0,St.U)(t=>t instanceof ro||t instanceof Ka?so.COMPLETE:t instanceof Gl&&(0===t.code||1===t.code)?so.REDIRECTING:so.FAILED),es(t=>t!==so.REDIRECTING),Xs(1)).subscribe(()=>{e()})}function sM(n){throw n}function qr(n,e,t){return e.parse("/")}const oM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(D_,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||sM,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||qr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(NC),this.routeReuseStrategy=(0,f.f3M)(nM),this.titleStrategy=(0,f.f3M)(tM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(Qp,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(sf),this.urlSerializer=(0,f.f3M)(X),this.location=(0,f.f3M)(Ze),this.componentInputBindingEnabled=!!(0,f.f3M)(Xh,{optional:!0}),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Nu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ji(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),od,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(f_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let S,D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}null!==D&&(D=this.removeEmptyProps(D));try{S=n_(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return qv(S,t,D,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=$l(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,od,null,r)}navigate(t,r={skipLocationChange:!1}){return function PC(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new f.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...oM}:!1===r?{...aM}:r,$l(t))return Bi(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Bi(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,m,v;l?(h=l.resolve,m=l.reject,v=l.promise):v=new Promise((S,N)=>{h=S,m=N});const D=this.pendingTasks.add();return S_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class OC{}let _O=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(es(t=>t instanceof ro),Ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,un.D)(i).pipe((0,Qs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,gt.of)(null);const a=i.pipe((0,Dr.z)(l=>null===l?(0,gt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,un.D)([a,l]).pipe((0,Qs.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hi),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(OC),f.LFG(RC))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pd=new f.OlP("");let In=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ro?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ka&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new uC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ya(n,e){return{\u0275kind:n,\u0275providers:e}}function hw(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Hi),i=n.get(M_);1===n.get(LC)&&r.initialNavigation(),n.get(pw,null,f.XFs.Optional)?.setUpPreloading(),n.get(pd,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const M_=new f.OlP("",{factory:()=>new Oo.x}),LC=new f.OlP("",{providedIn:"root",factory:()=>1}),pw=new f.OlP("");function UC(n){return Ya(0,[{provide:pw,useExisting:_O},{provide:OC,useExisting:n}])}const x_=new f.OlP("ROUTER_FORROOT_GUARD"),N_=[Ze,{provide:X,useClass:ge},Hi,Qh,{provide:ld,useFactory:function dw(n){return n.routerState.root},deps:[Hi]},RC,[]];function gd(){return new f.PXZ("Router",Hi)}let P_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[N_,[],{provide:Qp,multi:!0,useValue:t},{provide:x_,useFactory:jC,deps:[[Hi,new f.FiY,new f.tp0]]},{provide:D_,useValue:r||{}},r?.useHash?{provide:Le,useClass:Oe}:{provide:Le,useClass:Ke},{provide:pd,useFactory:()=>{const n=(0,f.f3M)(Qo),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(D_),r=(0,f.f3M)(sf),i=(0,f.f3M)(X);return t.scrollOffset&&n.setOffset(t.scrollOffset),new In(i,r,n,e,t)}},r?.preloadingStrategy?UC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:gd},r?.initialNavigation?uf(r):[],r?.bindToComponentInputs?Ya(8,[hC,{provide:Xh,useExisting:hC}]).\u0275providers:[],[{provide:HC,useFactory:hw},{provide:f.tb,multi:!0,useExisting:HC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Qp,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(x_,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function jC(n){return"guarded"}function uf(n){return["disabled"===n.initialNavigation?Ya(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Hi);return()=>{e.setUpLocationChangeListener()}}},{provide:LC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ya(2,[{provide:LC,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(xe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Hi),a=e.get(M_);S_(i,()=>{r(!0)}),e.get(sf).afterPreactivation=()=>(r(!0),a.closed?(0,gt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const HC=new f.OlP("");var Ce=L(5861),zC=L(6321),Cn=L(8186);function mw(){return(0,oi.e)((n,e)=>{let t,r=!1;n.subscribe((0,zr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var rt,yM=L(3997),Ei=L(6304),yw=(L(6365),L(3106)),$i=L(534),oo=L(4537),ys=L(7879),U=L(9058),vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vs={},md=md||{},zt=vw||self;function lf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xp="closure_uid_"+(1e9*Math.random()>>>0),ww=0;function WC(n,e,t){return n.call.apply(n.bind,arguments)}function vM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function rs(n,e,t){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WC:vM).apply(null,arguments)}function Jp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function ql(){this.s=this.s,this.o=this.o}ql.prototype.s=!1,ql.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function CO(n){Object.prototype.hasOwnProperty.call(n,Xp)&&n[Xp]||(n[Xp]=++ww)}(this)},ql.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const EM=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ew(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function O_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(lf(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ii.prototype.h=function(){this.defaultPrevented=!0};var IM=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",()=>{},e),zt.removeEventListener("test",()=>{},e)}catch{}return n}();function cf(n){return/^[\s\xa0]*$/.test(n)}function df(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function ao(n){return-1!=df().indexOf(n)}function Iw(n){return Iw[" "](n),n}Iw[" "]=function(){};var vd,n,CM=ao("Opera"),_d=ao("Trident")||ao("MSIE"),bM=ao("Edge"),Cw=bM||_d,eg=ao("Gecko")&&!(-1!=df().toLowerCase().indexOf("webkit")&&!ao("Edge"))&&!(ao("Trident")||ao("MSIE"))&&!ao("Edge"),DM=-1!=df().toLowerCase().indexOf("webkit")&&!ao("Edge");function yd(){var n=zt.document;return n?n.documentMode:void 0}e:{var bw="",k_=(n=df(),eg?/rv:([^\);]+)(\)|;)/.exec(n):bM?/Edge\/([\d\.]+)/.exec(n):_d?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DM?/WebKit\/(\S+)/.exec(n):CM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(k_&&(bw=k_?k_[1]:""),_d){var Dw=yd();if(null!=Dw&&Dw>parseFloat(bw)){vd=String(Dw);break e}}vd=bw}var ZC=zt.document&&_d&&(yd()||parseInt(vd,10))||void 0;function hf(n,e){if(Ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(eg){e:{try{Iw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Sw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hf.$.h.call(this)}}ui(hf,Ii);var Sw={2:"touch",3:"pen",4:"mouse"};hf.prototype.h=function(){hf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lu="closure_listenable_"+(1e6*Math.random()|0),YC=0;function bO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++YC,this.fa=this.ia=!1}function ff(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Kl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Aw(n){const e={};for(const t in n)e[t]=n[t];return e}const Mw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Mw.length;a++)t=Mw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function L_(n){this.src=n,this.g={},this.h=0}function Rw(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=EM(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ff(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xw(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}L_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=xw(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new bO(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Nw="closure_lm_"+(1e6*Math.random()|0),Pw={};function Ow(n,e,t,r,i){if(r&&r.once)return kw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ow(n,e[a],t,r,i);return null}return t=XC(t),n&&n[Lu]?n.O(e,t,Wl(r)?!!r.capture:!!r,i):wd(n,e,t,!1,r,i)}function wd(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Wl(i)?!!i.capture:!!i,h=V_(n);if(h||(n[Nw]=h=new L_(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function Vu(){const e=DO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)IM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(SM(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)kw(n,e[a],t,r,i);return null}return t=XC(t),n&&n[Lu]?n.P(e,t,Wl(r)?!!r.capture:!!r,i):wd(n,e,t,!0,r,i)}function TM(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)TM(n,e[a],t,r,i);else r=Wl(r)?!!r.capture:!!r,t=XC(t),n&&n[Lu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xw(a=n.g[e],t,r,i))&&(ff(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=V_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xw(e,t,r,i)),(t=-1<n?e[n]:null)&&Fw(t))}function Fw(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Lu])Rw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(SM(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=V_(e))?(Rw(t,n),0==t.h&&(t.src=null,e[Nw]=null)):ff(n)}}}function SM(n){return n in Pw?Pw[n]:Pw[n]="on"+n}function DO(n,e){if(n.fa)n=!0;else{e=new hf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Fw(n),n=t.call(r,e)}return n}function V_(n){return(n=n[Nw])instanceof L_?n:null}var U_="__closure_events_fn_"+(1e9*Math.random()>>>0);function XC(n){return"function"==typeof n?n:(n[U_]||(n[U_]=function(e){return n.handleEvent(e)}),n[U_])}function li(){ql.call(this),this.i=new L_(this),this.S=this,this.J=null}function Kr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ii(e,n);else if(e instanceof Ii)e.target=e.target||n;else{var i=e;QC(e=new Ii(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=tg(l,r,!0,e)&&i}if(i=tg(l=e.g=n,r,!0,e)&&i,i=tg(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tg(l=e.g=t[a],r,!1,e)&&i}function tg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&Rw(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}ui(li,ql),li.prototype[Lu]=!0,li.prototype.removeEventListener=function(n,e,t,r){TM(this,n,e,t,r)},li.prototype.N=function(){if(li.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ff(t[r]);delete n.g[e],n.h--}}this.J=null},li.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},li.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var B_=zt.JSON.stringify;function Kt(){var n=j_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lw=new class JC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new TO,n=>n.reset());class TO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function AM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function tb(n){zt.setTimeout(()=>{throw n},0)}let ng,rg=!1,j_=new class eb{constructor(){this.h=this.g=null}add(e,t){const r=Lw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},nb=()=>{const n=zt.Promise.resolve(void 0);ng=()=>{n.then(rb)}};var rb=()=>{for(var n;n=Kt();){try{n.h.call(n.g)}catch(t){tb(t)}var e=Lw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}rg=!1};function H_(n,e){li.call(this),this.h=n||1,this.g=e||zt,this.j=rs(this.qb,this),this.l=Date.now()}function Vw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ib(n,e,t){if("function"==typeof n)t&&(n=rs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rs(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function Uw(n){n.g=ib(()=>{n.g=null,n.i&&(n.i=!1,Uw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(H_,li),(rt=H_.prototype).ga=!1,rt.T=null,rt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Kr(this,"tick"),this.ga&&(Vw(this),this.start()))}},rt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.N=function(){H_.$.N.call(this),Vw(this),delete this.g};class sb extends ql{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uw(this)}N(){super.N(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fo(n){ql.call(this),this.h=n,this.g={}}ui(Fo,ql);var Ed=[];function Bw(n,e,t,r){Array.isArray(t)||(t&&(Ed[0]=t.toString()),t=Ed);for(var i=0;i<t.length;i++){var a=Ow(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ob(n){Kl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Fw(e)},n),n.g={}}function Id(){this.g=!0}function Qa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return B_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Fo.prototype.N=function(){Fo.$.N.call(this),ob(this)},Fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Id.prototype.Ea=function(){this.g=!1},Id.prototype.info=function(){};var Uu={},$_=null;function ig(){return $_=$_||new li}function G_(n){Ii.call(this,Uu.Ta,n)}function sg(n){const e=ig();Kr(e,new G_(e))}function ub(n,e){Ii.call(this,Uu.STAT_EVENT,n),this.stat=e}function ws(n){const e=ig();Kr(e,new ub(e,n))}function $w(n,e){Ii.call(this,Uu.Ua,n),this.size=e}function og(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}Uu.Ta="serverreachability",ui(G_,Ii),Uu.STAT_EVENT="statevent",ui(ub,Ii),Uu.Ua="timingevent",ui($w,Ii);var z_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gw(){}function Ww(){}Gw.prototype.h=null;var Kw,ag={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qw(){Ii.call(this,"d")}function Es(){Ii.call(this,"c")}function W_(){}function q_(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Fo(this),this.P=cb,this.V=new H_(n=Cw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new K_}function K_(){this.i=null,this.g="",this.h=!1}ui(qw,Ii),ui(Es,Ii),ui(W_,Gw),W_.prototype.g=function(){return new XMLHttpRequest},W_.prototype.i=function(){return{}},Kw=new W_;var cb=45e3,Zw={},Z_={};function Yw(n,e,t){n.L=1,n.v=cg(Vo(e)),n.s=t,n.S=!0,Qw(n,null)}function Qw(n,e){n.G=Date.now(),ug(n),n.A=Vo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),hg(t.i,"t",r),n.C=0,t=n.l.J,n.h=new K_,n.g=Md(n.l,t?e:null,!n.s),0<n.O&&(n.M=new sb(rs(n.Pa,n,n.g),n.O)),Bw(n.U,n.g,"readystatechange",n.nb),e=n.I?Aw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),sg(),function pf(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function db(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function hb(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Xw(n,t),i==Z_){4==e&&(n.o=4,ws(14),r=!1),Qa(n.j,n.m,null,"[Incomplete Response]");break}if(i==Zw){n.o=4,ws(15),Qa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qa(n.j,n.m,i,null),Lo(n,i)}db(n)&&i!=Z_&&i!=Zw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ws(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Td(e),e.M=!0,ws(11))):(Qa(n.j,n.m,t,"[Invalid Chunked Response]"),Cd(n),lg(n))}function Xw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Z_:(t=Number(e.substring(t,r)),isNaN(t)?Zw:(r+=1)+t>e.length?Z_:(e=e.slice(r,r+t),n.C=r+t,e))}function ug(n){n.Y=Date.now()+n.P,fb(n,n.P)}function fb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=og(rs(n.lb,n),e)}function Y_(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function lg(n){0==n.l.H||n.J||yg(n.l,n)}function Cd(n){Y_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Vw(n.V),ob(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Lo(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||oE(t.i,n)))if(!n.K&&oE(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;eu(t),mg(t)}Uo(t),ws(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=og(rs(t.ib,t),6e3));if(1>=wb(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Hu(t,11)}else if((n.K||t.g==n)&&eu(t),!cf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const D=v[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.L=r=1.5*N,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Z=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(X_(a,a.h),a.h=null))}if(r.F){const se=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.Da=se,Jn(r.I,r.F,se))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Ad(r,r.J?r.pa:null,r.Y),l.K){aE(r.i,l);var h=l,m=r.L;m&&h.setTimeout(m),h.B&&(Y_(h),ug(h)),r.g=l}else kb(r);0<t.j.length&&cE(t)}else"stop"!=v[0]&&"close"!=v[0]||Hu(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Hu(t,7):Pb(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}sg()}catch{}}function eE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function MM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Jw(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(rt=q_.prototype).setTimeout=function(n){this.P=n},rt.nb=function(n){n=n.target;const e=this.M;e&&3==Ja(n)?e.l():this.Pa(n)},rt.Pa=function(n){try{if(n==this.g)e:{const D=Ja(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||Cw||this.g&&(this.h.h||this.g.ja()||Rb(this.g)))){this.J||4!=D||7==e||sg(),Y_(this);var t=this.g.da();this.ca=t;t:if(db(this)){var r=Rb(this.g);n="";var i=r.length,a=4==Ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cd(this),lg(this);var l="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function jw(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cf(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ws(12),Cd(this),lg(this);break e}Qa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lo(this,t)}this.S?(hb(this,D,l),Cw&&this.i&&3==D&&(Bw(this.U,this.V,"tick",this.mb),this.V.start())):(Qa(this.j,this.m,l,null),Lo(this,l)),4==D&&Cd(this),this.i&&!this.J&&(4==D?yg(this.l,this):(this.i=!1,ug(this)))}else(function LM(n){const e={};n=(n.g&&2<=Ja(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(cf(n[r]))continue;var t=AM(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function F_(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),Cd(this),lg(this)}}}catch{}},rt.mb=function(){if(this.g){var n=Ja(this.g),e=this.g.ja();this.C<e.length&&(Y_(this),hb(this,n,e),this.i&&4!=n&&ug(this))}},rt.cancel=function(){this.J=!0,Cd(this)},rt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ab(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(sg(),ws(17)),Cd(this),this.o=2,lg(this)):fb(this,this.Y-n)};var pb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Zl){this.h=n.h,gf(this,n.j),this.s=n.s,this.g=n.g,tE(this,n.m),this.l=n.l;var e=n.i,t=new dg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),nE(this,t),this.o=n.o}else n&&(e=String(n).match(pb))?(this.h=!1,gf(this,e[1]||"",!0),this.s=mf(e[2]||""),this.g=mf(e[3]||"",!0),tE(this,e[4]),this.l=mf(e[5]||"",!0),nE(this,e[6]||"",!0),this.o=mf(e[7]||"")):(this.h=!1,this.i=new dg(null,this.h))}function Vo(n){return new Zl(n)}function gf(n,e,t){n.j=t?mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nE(n,e,t){e instanceof dg?(n.i=e,function Q_(n,e){e&&!n.j&&(Dd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(iE(this,r),hg(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bd(e,xM)),n.i=new dg(e,n.h))}function Jn(n,e,t){n.i.set(e,t)}function cg(n){return Jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Bu),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Bu(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bd(e,mb,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bd(e,mb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bd(t,"/"==t.charAt(0)?rE:RM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bd(t,NM)),n.join("")};var mb=/[#\/\?@]/g,RM=/[#\?:]/g,rE=/[#\?]/g,xM=/[#\?@]/g,NM=/#/g;function dg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Dd(n){n.g||(n.g=new Map,n.h=0,n.i&&function gb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iE(n,e){Dd(n),e=Xa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _b(n,e){return Dd(n),e=Xa(n,e),n.g.has(e)}function hg(n,e,t){iE(n,e),0<t.length&&(n.i=null,n.g.set(Xa(n,e),Ew(t)),n.h+=t.length)}function Xa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yb(n){this.l=n||vb,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ka&&zt.g.Ka()&&zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=dg.prototype).add=function(n,e){Dd(this),this.i=null,n=Xa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Dd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},rt.ta=function(){Dd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},rt.Z=function(n){Dd(this);let e=[];if("string"==typeof n)_b(this,n)&&(e=e.concat(this.g.get(Xa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return Dd(this),this.i=null,_b(this,n=Xa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var vb=10;function sE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wb(n){return n.h?1:n.g?n.g.size:0}function oE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function X_(n,e){n.g?n.g.add(e):n.h=e}function aE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _f(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Ew(n.i)}yb.prototype.cancel=function(){if(this.i=_f(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var PM=class{stringify(n){return zt.JSON.stringify(n,void 0)}parse(n){return zt.JSON.parse(n,void 0)}};function Eb(){this.g=new PM}function Ib(n,e,t){const r=t||"";try{eE(n,function(i,a){let l=i;Wl(i)&&(l=B_(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function J_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ju(n){this.l=n.fc||null,this.j=n.ob||!1}function ey(n,e){li.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Cb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui(ju,Gw),ju.prototype.g=function(){return new ey(this.l,this.j)},ju.prototype.i=function(n){return function(){return n}}({}),ui(ey,li);var Cb=0;function bb(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function fg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pg(n)}function pg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=ey.prototype).open=function(n,e){if(this.readyState!=Cb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pg(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fg(this)),this.readyState=Cb},rt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pg(this)),this.g&&(this.readyState=3,pg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bb(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},rt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fg(this):pg(this),3==this.readyState&&bb(this)}},rt.Za=function(n){this.g&&(this.response=this.responseText=n,fg(this))},rt.Ya=function(n){this.g&&(this.response=n,fg(this))},rt.ka=function(){this.g&&fg(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ey.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kM=zt.JSON.parse;function Tr(n){li.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Db,this.L=this.M=!1}ui(Tr,li);var Db="",FM=/^https?$/i,Tb=["POST","PUT"];function Sb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gg(n),ty(n)}function gg(n){n.F||(n.F=!0,Kr(n,"complete"),Kr(n,"error"))}function Ab(n){if(n.h&&typeof md<"u"&&(!n.C[1]||4!=Ja(n)||2!=n.da()))if(n.v&&4==Ja(n))ib(n.La,0,n);else if(Kr(n,"readystatechange"),4==Ja(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(pb)[1]||null;!i&&zt.self&&zt.self.location&&(i=zt.self.location.protocol.slice(0,-1)),r=!FM.test(i?i.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var a=2<Ja(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",gg(n)}}finally{ty(n)}}}function ty(n,e){if(n.g){Mb(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Mb(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function Ja(n){return n.g?n.g.readyState:0}function Rb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Db:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xb(n){let e="";return Kl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ny(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jn(n,e,t))}function yf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nb(n){this.Ga=0,this.j=[],this.l=new Id,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yf("baseRetryDelayMs",5e3,n),this.hb=yf("retryDelaySeedMs",1e4,n),this.eb=yf("forwardChannelMaxRetries",2,n),this.xa=yf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new yb(n&&n.concurrentRequestLimit),this.Ja=new Eb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Pb(n){if(lE(n),3==n.H){var e=n.W++,t=Vo(n.I);if(Jn(t,"SID",n.K),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),_g(n,t),(e=new q_(n,n.l,e)).L=2,e.v=cg(Vo(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon)try{t=zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Md(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ug(e)}Sd(n)}function mg(n){n.g&&(Td(n),n.g.cancel(),n.g=null)}function lE(n){mg(n),n.u&&(zt.clearTimeout(n.u),n.u=null),eu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function cE(n){if(!sE(n.i)&&!n.m){n.m=!0;var e=n.Na;ng||nb(),rg||(ng(),rg=!0),j_.add(e,n),n.C=0}}function Ob(n,e){var t;t=e?e.m:n.W++;const r=Vo(n.I);Jn(r,"SID",n.K),Jn(r,"RID",t),Jn(r,"AID",n.V),_g(n,r),n.o&&n.s&&ny(r,n.o,n.s),t=new q_(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=iy(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),X_(n.i,t),Yw(t,r,e)}function _g(n,e){n.na&&Kl(n.na,function(t,r){Jn(e,r,t)}),n.h&&eE({},function(t,r){Jn(e,r,t)})}function iy(n,e,t){t=Math.min(n.j.length,t);var r=n.h?rs(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].g;const D=i[m].map;if(v-=a,0>v)a=Math.max(0,i[m].g-100),h=!1;else try{Ib(D,l,"req"+v+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function kb(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ng||nb(),rg||(ng(),rg=!0),j_.add(e,n),n.A=0}}function Uo(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=og(rs(n.Ma,n),uo(n,n.A)),n.A++,0))}function Td(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function Gi(n){n.g=new q_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Vo(n.wa);Jn(e,"RID","rpc"),Jn(e,"SID",n.K),Jn(e,"AID",n.V),Jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Jn(e,"TO",n.qa),Jn(e,"TYPE","xmlhttp"),_g(n,e),n.o&&n.s&&ny(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=cg(Vo(e)),t.s=null,t.S=!0,Qw(t,n)}function eu(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function yg(n,e){var t=null;if(n.g==e){eu(n),Td(n),n.g=null;var r=2}else{if(!oE(n.i,e))return;t=e.F,aE(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Kr(r=ig(),new $w(r,t)),cE(n)}else kb(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function ry(n,e){return!(wb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=og(rs(n.Na,n,e),uo(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uo(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Hu(n,5);break;case 4:Hu(n,10);break;case 3:Hu(n,6);break;default:Hu(n,2)}}function uo(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Hu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=rs(n.pb,n);t||(t=new Zl("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||gf(t,"https"),cg(t)),function OM(n,e){const t=new Id;if(zt.Image){const r=new Image;r.onload=Jp(J_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jp(J_,t,r,"TestLoadImage: error",!1,e),r.onabort=Jp(J_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jp(J_,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ws(2);n.H=0,n.h&&n.h.za(e),Sd(n),lE(n)}function Sd(n){if(n.H=0,n.ma=[],n.h){const e=_f(n.i);(0!=e.length||0!=n.j.length)&&(O_(n.ma,e),O_(n.ma,n.j),n.i.i.length=0,Ew(n.j),n.j.length=0),n.h.ya()}}function Ad(n,e,t){var r=t instanceof Zl?Vo(t):new Zl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),tE(r,r.m);else{var i=zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Zl(null);r&&gf(a,r),e&&(a.g=e),i&&tE(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Jn(r,t,e),Jn(r,"VER",n.ra),_g(n,r),r}function Md(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Ha&&!n.va?new ju({ob:!0}):n.va)).Oa(n.J),e}function Rd(){}function $u(){if(_d&&!(10<=Number(ZC)))throw Error("Environmental error: no available transport.")}function Ci(n,e){li.call(this),this.g=new Nb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!cf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pa(this)}function xd(n){qw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Nd(){Es.call(this),this.status=1}function pa(n){this.g=n}function Bo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sy(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Sn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(rt=Tr.prototype).Oa=function(n){this.M=n},rt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kw.g(),this.C=function zw(n){return n.h||(n.h=n.i())}(this.u?this.u:Kw),this.g.onreadystatechange=rs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void Sb(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=zt.FormData&&n instanceof zt.FormData,!(0<=EM(Tb,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Mb(this),0<this.B&&((this.L=function uE(n){return _d&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.ua,this)):this.A=ib(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Sb(this,a)}},rt.ua=function(){typeof md<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),ty(this))},rt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ty(this,!0)),Tr.$.N.call(this)},rt.La=function(){this.s||(this.G||this.v||this.l?Ab(this):this.kb())},rt.kb=function(){Ab(this)},rt.isActive=function(){return!!this.g},rt.da=function(){try{return 2<Ja(this)?this.g.status:-1}catch{return-1}},rt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kM(e)}},rt.Ia=function(){return this.m},rt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Nb.prototype).ra=8,rt.H=1,rt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new q_(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Aw(a),QC(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iy(this,i,e),Jn(t=Vo(this.I),"RID",n),Jn(t,"CVER",22),this.F&&Jn(t,"X-HTTP-Session-Id",this.F),_g(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(xb(a)))+"&"+e:this.o&&ny(t,this.o,a)),X_(this.i,i),this.bb&&Jn(t,"TYPE","init"),this.P?(Jn(t,"$req",e),Jn(t,"SID","null"),i.aa=!0,Yw(i,t,null)):Yw(i,t,e),this.H=2}}else 3==this.H&&(n?Ob(this,n):0==this.j.length||sE(this.i)||Ob(this))},rt.Ma=function(){if(this.u=null,Gi(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=og(rs(this.jb,this),n)}},rt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ws(10),mg(this),Gi(this))},rt.ib=function(){null!=this.v&&(this.v=null,mg(this),Uo(this),ws(19))},rt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ws(2)):(this.l.info("Failed to ping google.com"),ws(1))},rt.isActive=function(){return!!this.h&&this.h.isActive(this)},(rt=Rd.prototype).Ba=function(){},rt.Aa=function(){},rt.za=function(){},rt.ya=function(){},rt.isActive=function(){return!0},rt.Va=function(){},$u.prototype.g=function(n,e){return new Ci(n,e)},ui(Ci,li),Ci.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ws(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Ad(n,null,n.Y),cE(n)},Ci.prototype.close=function(){Pb(this.g)},Ci.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=B_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&cE(e)},Ci.prototype.N=function(){this.g.h=null,delete this.j,Pb(this.g),delete this.g,Ci.$.N.call(this)},ui(xd,qw),ui(Nd,Es),ui(pa,Rd),pa.prototype.Ba=function(){Kr(this.g,"a")},pa.prototype.Aa=function(n){Kr(this.g,new xd(n))},pa.prototype.za=function(n){Kr(this.g,new Nd)},pa.prototype.ya=function(){Kr(this.g,"b")},ui(Bo,function Fb(){this.blockSize=-1}),Bo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)sy(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){sy(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){sy(this,r),i=0;break}}this.h=i,this.i+=e},Bo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Lb={};function oy(n){return-128<=n&&128>n?function qC(n,e){var t=Lb;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|n],0>n?-1:0)}function ga(n){if(isNaN(n)||!isFinite(n))return Yl;if(0>n)return zi(ga(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ay;return new Sn(e,0)}var ay=4294967296,Yl=oy(0),hE=oy(1),VM=oy(16777216);function Ql(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function jo(n){return-1==n.h}function zi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Sn(t,~n.h).add(hE)}function fE(n,e){return n.add(zi(e))}function uy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ly(n,e){this.g=n,this.h=e}function cy(n,e){if(Ql(e))throw Error("division by zero");if(Ql(n))return new ly(Yl,Yl);if(jo(n))return e=cy(zi(n),e),new ly(zi(e.g),zi(e.h));if(jo(e))return e=cy(n,zi(e)),new ly(zi(e.g),e.h);if(30<n.g.length){if(jo(n)||jo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=hE,r=e;0>=r.X(n);)t=Vb(t),r=Vb(r);var i=vf(t,1),a=vf(r,1);for(r=vf(r,2),t=vf(t,2);!Ql(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=vf(r,1),t=vf(t,1)}return e=fE(n,i.R(e)),new ly(i,e)}for(i=Yl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=ga(t)).R(e);jo(l)||0<l.X(n);)l=(a=ga(t-=r)).R(e);Ql(a)&&(a=hE),i=i.add(a),n=fE(n,l)}return new ly(i,n)}function Vb(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Sn(t,n.h)}function vf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Sn(i,n.h)}(rt=Sn.prototype).ea=function(){if(jo(this))return-zi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ay+r)*e,e*=ay}return n},rt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ql(this))return"0";if(jo(this))return"-"+zi(this).toString(n);for(var e=ga(Math.pow(n,6)),t=this,r="";;){var i=cy(t,e).g,a=((0<(t=fE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ql(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},rt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},rt.X=function(n){return jo(n=fE(this,n))?-1:Ql(n)?0:1},rt.abs=function(){return jo(this)?zi(this):this},rt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new Sn(t,-2147483648&t[t.length-1]?-1:0)},rt.R=function(n){if(Ql(this)||Ql(n))return Yl;if(jo(this))return jo(n)?zi(this).R(zi(n)):zi(zi(this).R(n));if(jo(n))return zi(this.R(zi(n)));if(0>this.X(VM)&&0>n.X(VM))return ga(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=l*m,uy(t,2*r+2*i),t[2*r+2*i+1]+=a*m,uy(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,uy(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,uy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Sn(t,0)},rt.gb=function(n){return cy(this,n).h},rt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Sn(t,this.h&n.h)},rt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Sn(t,this.h|n.h)},rt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Sn(t,this.h^n.h)},$u.prototype.createWebChannel=$u.prototype.g,Ci.prototype.send=Ci.prototype.u,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,z_.NO_ERROR=0,z_.TIMEOUT=8,z_.HTTP_ERROR=6,lb.COMPLETE="complete",Ww.EventType=ag,ag.OPEN="a",ag.CLOSE="b",ag.ERROR="c",ag.MESSAGE="d",li.prototype.listen=li.prototype.O,Tr.prototype.listenOnce=Tr.prototype.P,Tr.prototype.getLastError=Tr.prototype.Sa,Tr.prototype.getLastErrorCode=Tr.prototype.Ia,Tr.prototype.getStatus=Tr.prototype.da,Tr.prototype.getResponseJson=Tr.prototype.Wa,Tr.prototype.getResponseText=Tr.prototype.ja,Tr.prototype.send=Tr.prototype.ha,Tr.prototype.setWithCredentials=Tr.prototype.Oa,Bo.prototype.digest=Bo.prototype.l,Bo.prototype.reset=Bo.prototype.reset,Bo.prototype.update=Bo.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=ga,Sn.fromString=function dE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return zi(dE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ga(Math.pow(e,8)),r=Yl,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=ga(Math.pow(e,a)),r=r.R(a).add(ga(l))):r=(r=r.R(t)).add(ga(l))}return r};var pE=vs.createWebChannelTransport=function(){return new $u},vg=vs.getStatEventTarget=function(){return ig()},wg=vs.ErrorCode=z_,dy=vs.EventType=lb,Ub=vs.Event=Uu,wf=vs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Bb=vs.FetchXmlHttpFactory=ju,hy=vs.WebChannel=Ww,Eg=vs.XhrIo=Tr,UM=vs.Md5=Bo,Ef=vs.Integer=Sn;const jb="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let Xl="9.23.0";const ma=new ys.Yd("@firebase/firestore");function If(){return ma.logLevel}function Be(n,...e){if(ma.logLevel<=ys.in.DEBUG){const t=e.map(gE);ma.debug(`Firestore (${Xl}): ${n}`,...t)}}function Lr(n,...e){if(ma.logLevel<=ys.in.ERROR){const t=e.map(gE);ma.error(`Firestore (${Xl}): ${n}`,...t)}}function Hs(n,...e){if(ma.logLevel<=ys.in.WARN){const t=e.map(gE);ma.warn(`Firestore (${Xl}): ${n}`,...t)}}function gE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw Lr(e),new Error(e)}function bt(n,e){n||ct()}function it(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class $b{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mE{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ci,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ci)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Hb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new bi(e)}}class _E{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class HM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _E(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ig{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fy{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.T=t.token,new Ig(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Wb{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=zb(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function Cf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Cg(n){return n+"\0"}class Wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Wn(0,0))}static max(){return new Dt(new Wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends bf{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const $M=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends bf{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return $M.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(_n.fromString(e))}static fromName(e){return new Xe(_n.fromString(e).popFirst(5))}static empty(){return new Xe(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new _n(e.slice()))}}class bg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Dg(n){return n.fields.find(e=>2===e.kind)}function Jl(n){return n.fields.filter(e=>2!==e.kind)}bg.UNKNOWN_ID=-1;class Tg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Df(0,lo.min())}}function yE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Wn(t+1,0):new Wn(t,r));return new lo(i,Xe.empty(),e)}function Kb(n){return new lo(n.readTime,n.key,-1)}class lo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new lo(Dt.min(),Xe.empty(),-1)}static max(){return new lo(Dt.max(),Xe.empty(),-1)}}function vE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const wE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class py{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gu(n){return gy.apply(this,arguments)}function gy(){return gy=(0,Ce.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==wE)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),gy.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Sg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ci,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Tf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=EE(r.target.error);this.v.reject(new Tf(e,i))}}static open(e,t,r,i){try{return new Sg(t,e.transaction(i,r))}catch(a){throw new Tf(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new my(t)}}class Ho{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ho.S((0,U.z$)())&&Lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,U.hl)())return!1;if(Ho.C())return!0;const e=(0,U.z$)(),t=Ho.S(e),r=0<t&&t<10,i=Ho.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Tf(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.$(e);const m=Sg.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.P(),D)).catch(D=>(m.abort(D),le.reject(D))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,D="FirebaseError"!==v.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Zb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $s(this.L.delete())}}class Tf extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zu(n){return"IndexedDbTransactionError"===n.name}class my{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$s(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),$s(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const l=EE(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new Zb(h),v=t(h.primaryKey,h.value,m);if(v instanceof le){const D=v.catch(S=>(m.done(),le.reject(S)));r.push(D)}m.isDone?i():null===m.K?h.continue():h.continue(m.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=EE(r.target.error);t(i)}})}let Yb=!1;function EE(n){const e=Ho.S((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yb||(Yb=!0,setTimeout(()=>{throw r},0)),r}}return n}class IE{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){zu(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Gu(r)}yield t.et(6e4)}))}}class Pd{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=Kb(a);vE(l,r)>0&&(r=l)}),new lo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Is=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ag(n){return null==n}function Od(n){return 0===n&&1/n==-1/0}function zM(n){return"number"==typeof n&&Number.isInteger(n)&&!Od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qb(e)),e=WM(n.get(t),e);return Qb(e)}function WM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Qb(n){return n+"\x01\x01"}function _a(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new _n(r)}const Xb=["userId","batchId"];function Sr(n,e){return[n,Cs(e)]}function CE(n,e,t){return[n,Cs(e),t]}const qM={},KM=["prefixPath","collectionGroup","readTime","documentId"],Jb=["prefixPath","collectionGroup","documentId"],ZM=["collectionGroup","readTime","prefixPath","documentId"],eD=["canonicalId","targetId"],tD=["targetId","path"],Sf=["path","targetId"],YM=["collectionId","parent"],QM=["indexId","uid"],nD=["uid","sequenceNumber"],XM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rD=["indexId","uid","orderedDocumentKey"],MO=["userId","collectionPath","documentId"],iD=["userId","collectionPath","largestBatchId"],bE=["userId","collectionGroup","largestBatchId"],ya=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JM=[...ya,"documentOverlays"],sD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],va=sD,wa=[...va,"indexConfiguration","indexState","indexEntries"];class co extends py{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function di(n,e){const t=it(n);return Ho.M(t.ht,e)}function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ec(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class er{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _y(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _y(this.root,e,this.comparator,!1)}getReverseIterator(){return new _y(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _y(this.root,e,this.comparator,!0)}}class _y{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??hi.RED,this.left=i??hi.EMPTY,this.right=a??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new hi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return hi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new hi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aD(this.data.getIterator())}getIteratorFrom(e){return new aD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class aD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kd(n){return n.hasNext()?n.getNext():void 0}class Gs{constructor(e){this.fields=e,e.sort(mr.comparator)}static empty(){return new Gs([])}unionWith(e){let t=new Pn(mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class uD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uD("Invalid base64 string: "+i):i}}(e);return new Zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const yy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tc(n){if(bt(!!n),"string"==typeof n){let e=0;const t=yy.exec(n);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tu(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function Mg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vy(n){const e=n.mapValue.fields.__previous_value__;return Mg(e)?vy(e):e}function Rg(n){const e=tc(n.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}class TE{constructor(e,t,r,i,a,l,h,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xg={nullValue:"NULL_VALUE"};function qu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mg(n)?4:hD(n)?9007199254740991:10:ct()}function Ea(n,e){if(n===e)return!0;const t=qu(n);if(t!==qu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rg(n).isEqual(Rg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=tc(r.timestampValue),l=tc(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,tu(n.bytesValue).isEqual(tu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=_r(r.doubleValue),l=_r(i.doubleValue);return a===l?Od(a)===Od(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Cf(n.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(DE(a)!==DE(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Ea(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function Af(n,e){return void 0!==(n.values||[]).find(t=>Ea(t,e))}function Ku(n,e){if(n===e)return 0;const t=qu(n),r=qu(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=_r(i.integerValue||i.doubleValue),h=_r(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return SE(n.timestampValue,e.timestampValue);case 4:return SE(Rg(n),Rg(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=tu(i),h=tu(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=Wt(l[m],h[m]);if(0!==v)return v}return Wt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Wt(_r(i.latitude),_r(a.latitude));return 0!==l?l:Wt(_r(i.longitude),_r(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=Ku(l[m],h[m]);if(v)return v}return Wt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Wu.mapValue&&a===Wu.mapValue)return 0;if(i===Wu.mapValue)return 1;if(a===Wu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Wt(h[D],v[D]);if(0!==S)return S;const N=Ku(l[h[D]],m[v[D]]);if(0!==N)return N}return Wt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function SE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=tc(n),r=tc(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function Fd(n){return AE(n)}function AE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=tc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tu(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=AE(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${AE(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function Ld(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ME(n){return!!n&&"integerValue"in n}function Ng(n){return!!n&&"arrayValue"in n}function cD(n){return!!n&&"nullValue"in n}function dD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ey(n){return!!n&&"mapValue"in n}function Pg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ec(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function eR(n){return"nullValue"in n?xg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ld(nu.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function tR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ld(nu.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wu:ct()}function fD(n,e){const t=Ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pD(n,e){const t=Ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Wi{constructor(e){this.value=e}static empty(){return new Wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ey(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pg(t)}setAll(e){let t=mr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Pg(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ey(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ey(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ec(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Wi(Pg(this.value))}}function gD(n){const e=[];return ec(n.fields,(t,r)=>{const i=new mr([t]);if(Ey(r)){const a=gD(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Gs(e)}class ar{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new ar(e,0,Dt.min(),Dt.min(),Dt.min(),Wi.empty(),0)}static newFoundDocument(e,t,r,i){return new ar(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new ar(e,2,t,Dt.min(),Dt.min(),Wi.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,Dt.min(),Dt.min(),Wi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nc{constructor(e,t){this.position=e,this.inclusive=t}}function RE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):Ku(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function xE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ea(n.position[t],e.position[t]))return!1;return!0}class Vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function mD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NE{}class ln extends NE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new RO(e,t,r):"array-contains"===t?new vD(e,r):"in"===t?new nR(e,r):"not-in"===t?new Pt(e,r):"array-contains-any"===t?new rR(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new OE(e,r):new xO(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ku(t,this.value)):null!==t&&qu(this.value)===qu(t)&&this.matchesComparison(Ku(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class An extends NE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new An(e,t)}matches(e){return Ud(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ud(n){return"and"===n.op}function Iy(n){return"or"===n.op}function Cy(n){return PE(n)&&Ud(n)}function PE(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function Zu(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+Fd(n.value);if(Cy(n))return n.filters.map(e=>Zu(e)).join(",");{const e=n.filters.map(t=>Zu(t)).join(",");return`${n.op}(${e})`}}function _D(n,e){return n instanceof ln?(t=n,(r=e)instanceof ln&&t.op===r.op&&t.field.isEqual(r.field)&&Ea(t.value,r.value)):n instanceof An?function(t,r){return r instanceof An&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&_D(a,r.filters[l]),!0)}(n,e):void ct();var t,r}function yD(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function Bd(n){return n instanceof ln?`${(e=n).field.canonicalString()} ${e.op} ${Fd(e.value)}`:n instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map(Bd).join(" ,")+"}"}(n):"Filter";var e}class RO extends ln{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class OE extends ln{constructor(e,t){super(e,"in",t),this.keys=kE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xO extends ln{constructor(e,t){super(e,"not-in",t),this.keys=kE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class vD extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ng(t)&&Af(t.arrayValue,this.value)}}class nR extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Af(this.value.arrayValue,t)}}class Pt extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Af(this.value.arrayValue,t)}}class rR extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Af(this.value.arrayValue,r))}}class iR{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.dt=null}}function FE(n,e=null,t=[],r=[],i=null,a=null,l=null){return new iR(n,e,t,r,i,a,l)}function $o(n){const e=it(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zu(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ag(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),e.dt=t}return e.dt}function Og(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_D(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xE(n.startAt,e.startAt)&&xE(n.endAt,e.endAt)}function jd(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hd(n,e){return n.filters.filter(t=>t instanceof ln&&t.field.isEqual(e))}function yr(n,e,t){let r=xg,i=!0;for(const a of Hd(n,e)){let l=xg,h=!0;switch(a.op){case"<":case"<=":l=eR(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=xg}fD({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];fD({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function sR(n,e,t){let r=Wu,i=!0;for(const a of Hd(n,e)){let l=Wu,h=!0;switch(a.op){case">=":case">":l=tR(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Wu}pD({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];pD({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ru{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function LE(n,e,t,r,i,a,l,h){return new ru(n,e,t,r,i,a,l,h)}function Mf(n){return new ru(n)}function VE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function by(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Dy(n){return null!==n.collectionGroup}function $d(n){const e=it(n);if(null===e.wt){e.wt=[];const t=kg(e),r=by(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Vd(t)),e.wt.push(new Vd(mr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Vd(mr.keyField(),a))}}}return e.wt}function bs(n){const e=it(n);if(!e._t)if("F"===e.limitType)e._t=FE(e.path,e.collectionGroup,$d(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of $d(e))t.push(new Vd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new nc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new nc(e.startAt.position,e.startAt.inclusive):null;e._t=FE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function UE(n,e){e.getFirstInequalityField(),kg(n);const t=n.filters.concat([e]);return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rc(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fg(n,e){return Og(bs(n),bs(e))&&n.limitType===e.limitType}function wD(n){return`${$o(bs(n))}|lt:${n.limitType}`}function BE(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Bd(r)).join(", ")}]`),Ag(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),`Target(${t})`}(bs(n))}; limitType=${n.limitType})`}function ic(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of $d(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=RE(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,$d(t),r)||t.endAt&&!function(i,a,l){const h=RE(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,$d(t),r)));var t,r}function jE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HE(n){return(e,t)=>{let r=!1;for(const i of $d(n)){const a=ED(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function ED(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?Ku(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class Yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ec(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return oD(this.inner)}size(){return this.innerSize}}const Lg=new er(Xe.comparator);function Di(){return Lg}const ID=new er(Xe.comparator);function Vg(...n){let e=ID;for(const t of n)e=e.insert(t.key,t);return e}function CD(n){let e=ID;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ia(){return Rf()}function $E(){return Rf()}function Rf(){return new Yu(n=>n.toString(),(n,e)=>n.isEqual(e))}const oR=new er(Xe.comparator),bD=new Pn(Xe.comparator);function Qt(...n){let e=bD;for(const t of n)e=e.add(t);return e}const aR=new Pn(Wt);function DD(){return aR}function uR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function lR(n){return{integerValue:""+n}}function cR(n,e){return zM(e)?lR(e):uR(n,e)}class Ug{constructor(){this._=void 0}}function Ty(n,e,t){return n instanceof Gd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Mg(i)&&(i=vy(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ca?SD(n,e):n instanceof zd?AD(n,e):function(r,i){const a=TD(r,i),l=hR(a)+hR(r.gt);return ME(a)&&ME(r.gt)?lR(l):uR(r.serializer,l)}(n,e)}function dR(n,e,t){return n instanceof Ca?SD(n,e):n instanceof zd?AD(n,e):t}function TD(n,e){return n instanceof xf?ME(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gd extends Ug{}class Ca extends Ug{constructor(e){super(),this.elements=e}}function SD(n,e){const t=MD(e);for(const r of n.elements)t.some(i=>Ea(i,r))||t.push(r);return{arrayValue:{values:t}}}class zd extends Ug{constructor(e){super(),this.elements=e}}function AD(n,e){let t=MD(e);for(const r of n.elements)t=t.filter(i=>!Ea(i,r));return{arrayValue:{values:t}}}class xf extends Ug{constructor(e,t){super(),this.serializer=e,this.gt=t}}function hR(n){return _r(n.integerValue||n.doubleValue)}function MD(n){return Ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nf{constructor(e,t){this.field=e,this.transform=t}}class pR{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Bg{}function RD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pf(n.key,Bn.none()):new sc(n.key,n.data,Bn.none());{const t=n.data,r=Wi.empty();let i=new Pn(mr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Qu(n.key,r,new Gs(i.toArray()),Bn.none())}}function xD(n,e,t){n instanceof sc?function(r,i,a){const l=r.value.clone(),h=zE(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Qu?function(r,i,a){if(!Sy(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=zE(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(GE(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jg(n,e,t,r){return n instanceof sc?function(i,a,l,h){if(!Sy(i.precondition,a))return l;const m=i.value.clone(),v=OD(i.fieldTransforms,h,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qu?function(i,a,l,h){if(!Sy(i.precondition,a))return l;const m=OD(i.fieldTransforms,h,a),v=a.data;return v.setAll(GE(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,Sy(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function ND(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=TD(r.transform,i||null);null!=a&&(null===t&&(t=Wi.empty()),t.set(r.field,a))}return t||null}function PD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Cf(t,r,(i,a)=>function fR(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ca&&r instanceof Ca||t instanceof zd&&r instanceof zd?Cf(t.elements,r.elements,Ea):t instanceof xf&&r instanceof xf?Ea(t.gt,r.gt):t instanceof Gd&&r instanceof Gd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class sc extends Bg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qu extends Bg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zE(n,e,t){const r=new Map;bt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,dR(l,h,t[i]))}return r}function OD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Ty(a,l,e))}return r}class Pf extends Bg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WE extends Bg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&xD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$E();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=RD(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Cf(this.mutations,e.mutations,(t,r)=>PD(t,r))&&Cf(this.baseMutations,e.baseMutations,(t,r)=>PD(t,r))}}class qE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length);let i=oR;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new qE(e,t,r,i)}}class Ay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yr,yn;function kD(n){switch(n){default:return ct();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function FD(n){if(void 0===n)return Lr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Yr.OK:return fe.OK;case Yr.CANCELLED:return fe.CANCELLED;case Yr.UNKNOWN:return fe.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return fe.INTERNAL;case Yr.UNAVAILABLE:return fe.UNAVAILABLE;case Yr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Yr.NOT_FOUND:return fe.NOT_FOUND;case Yr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Yr.ABORTED:return fe.ABORTED;case Yr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Yr.DATA_LOSS:return fe.DATA_LOSS;default:return ct()}}(yn=Yr||(Yr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class KE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return My}static getOrCreateInstance(){return null===My&&(My=new KE),My}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let My=null;function ZE(){return new TextEncoder}const LD=new Ef([4294967295,4294967295],0);function VD(n){const e=ZE().encode(n),t=new UM;return t.update(e),new Uint8Array(t.digest())}function UD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ef([t,r],0),new Ef([i,a],0)]}class Ry{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $g(`Invalid padding: ${t}`);if(r<0)throw new $g(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new $g(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new $g(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ef.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Ef.fromNumber(r)));return 1===i.compare(LD)&&(i=new Ef([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=VD(e),[r,i]=UD(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Ry(a,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=VD(e),[r,i]=UD(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class $g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gg(Dt.min(),i,new er(Wt),Di(),Qt())}}class zg{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zg(r,t,Qt(),Qt(),Qt())}}class Of{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class xy{constructor(e,t){this.targetId=e,this.Vt=t}}class YE{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ny{constructor(){this.St=0,this.Dt=Py(),this.Ct=Zr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Qt(),t=Qt(),r=Qt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new zg(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Py()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _R{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Di(),this.zt=BD(),this.Wt=new er(Wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(jd(l))if(0===i){const h=new Xe(l.path);this.Yt(r,h,ar.newNoDocument(h,Dt.min()))}else bt(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=KE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,D,S){var N,$,Z,se,ce,We;const ot={localCacheCount:D,existenceFilterCount:S.count},He=S.unchangedNames;return He&&(ot.bloomFilter={applied:0===v,hashCount:null!==(N=He?.hashCount)&&void 0!==N?N:0,bitmapLength:null!==(se=null===(Z=null===($=He?.bits)||void 0===$?void 0:$.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==se?se:0,padding:null!==(We=null===(ce=He?.bits)||void 0===ce?void 0:ce.padding)&&void 0!==We?We:0}),ot}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:h=0}=r;let m,v;try{m=tu(a).toUint8Array()}catch(D){if(D instanceof uD)return Hs("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{v=new Ry(m,l,h)}catch(D){return Hs(D instanceof $g?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const h=this.se(l);if(h){if(a.current&&jd(h.target)){const m=new Xe(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,ar.newNoDocument(m,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Qt();this.zt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new Gg(e,t,this.Wt,this.jt,r);return this.jt=Di(),this.zt=BD(),this.Wt=new er(Wt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ny,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Pn(Wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ny),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function BD(){return new er(Xe.comparator)}function Py(){return new er(Xe.comparator)}const yR={asc:"ASCENDING",desc:"DESCENDING"},jD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kf={and:"AND",or:"OR"};class HD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QE(n,e){return n.useProto3Json||Ag(e)?e:{value:e}}function Wg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XE(n,e){return Wg(n,e.toTimestamp())}function Vr(n){return bt(!!n),Dt.fromTimestamp(function(e){const t=tc(e);return new Wn(t.seconds,t.nanos)}(n))}function ky(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function JE(n){const e=_n.fromString(n);return bt(qD(e)),e}function qg(n,e){return ky(n.databaseId,e.path)}function ba(n,e){const t=JE(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(t0(t))}function Kg(n,e){return ky(n.databaseId,e)}function e0(n){const e=JE(n);return 4===e.length?_n.emptyPath():t0(e)}function Ff(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t0(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function n0(n,e,t){return{name:qg(n,e),fields:t.value.mapValue.fields}}function $D(n,e,t){const r=ba(n,e.name),i=Vr(e.updateTime),a=e.createTime?Vr(e.createTime):Dt.min(),l=new Wi({mapValue:{fields:e.fields}}),h=ar.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Zg(n,e){let t;if(e instanceof sc)t={update:n0(n,e.key,e.value)};else if(e instanceof Pf)t={delete:qg(n,e.key)};else if(e instanceof Qu)t={update:n0(n,e.key,e.data),updateMask:bR(e.fieldMask)};else{if(!(e instanceof WE))return ct();t={verify:qg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Gd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ca)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xf)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:XE(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function Fy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Bn.updateTime(Vr(i.updateTime)):void 0!==i.exists?Bn.exists(i.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(bt("REQUEST_TIME"===l.setToServerValue),h=new Gd):"appendMissingElements"in l?h=new Ca(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new zd(l.removeAllFromArray.values||[]):"increment"in l?h=new xf(a,l.increment):ct();const m=mr.fromServerFormat(l.fieldPath);return new Nf(m,h)}(n,i)):[];var i;if(e.update){const i=ba(n,e.update.name),a=new Wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Gs((e.updateMask.fieldPaths||[]).map(v=>mr.fromServerFormat(v)));return new Qu(i,a,l,t,r)}return new sc(i,a,t,r)}if(e.delete){const i=ba(n,e.delete);return new Pf(i,t)}if(e.verify){const i=ba(n,e.verify);return new WE(i,t)}return ct()}function r0(n,e){return{documents:[Kg(n,e.path)]}}function s0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Kg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return WD(An.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:oc((D=v).field),direction:ER(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=QE(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function GD(n){let e=e0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const S=zD(D);return S instanceof An&&Cy(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Vd(Lf((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Ag(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new nc((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new nc(D.values||[],!D.before)}(t.endAt)),LE(e,i,l,a,h,"F",m,v)}function zD(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lf(e.unaryFilter.field);return ln.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Lf(e.unaryFilter.field);return ln.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lf(e.unaryFilter.field);return ln.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Lf(e.unaryFilter.field);return ln.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?ln.create(Lf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(t=>zD(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function ER(n){return yR[n]}function IR(n){return jD[n]}function CR(n){return kf[n]}function oc(n){return{fieldPath:n.canonicalString()}}function Lf(n){return mr.fromServerFormat(n.fieldPath)}function WD(n){return n instanceof ln?function(e){if("=="===e.op){if(dD(e.value))return{unaryFilter:{field:oc(e.field),op:"IS_NAN"}};if(cD(e.value))return{unaryFilter:{field:oc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dD(e.value))return{unaryFilter:{field:oc(e.field),op:"IS_NOT_NAN"}};if(cD(e.value))return{unaryFilter:{field:oc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oc(e.field),op:IR(e.op),value:e.value}}}(n):n instanceof An?function(e){const t=e.getFilters().map(r=>WD(r));return 1===t.length?t[0]:{compositeFilter:{op:CR(e.op),filters:t}}}(n):ct()}function bR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Xu{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),h=Zr.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class KD{constructor(e){this.fe=e}}function Vf(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qg(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Wg(i,a.version.toTimestamp()),createTime:Wg(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ac(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:ac(e.version)}}var i,a;return r}function Yg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ac(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uc(n){const e=new Wn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function lc(n,e){const t=(e.baseMutations||[]).map(a=>Fy(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Fy(n.fe,a)),i=Wn.fromMillis(e.localWriteTimeMs);return new Hg(e.batchId,i,t,r)}function Uf(n){const e=uc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uc(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(bt(1===(i=n.query).documents.length),r=bs(Mf(e0(i.documents[0])))):r=bs(GD(n.query)),new Xu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function ZD(n,e){const t=ac(e.snapshotVersion),r=ac(e.lastLimboFreeSnapshotVersion);let i;i=jd(e.target)?r0(n.fe,e.target):s0(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function o0(n){const e=GD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rc(e,e.limit,"L"):e}function YD(n,e){return new Ay(e.largestBatchId,Fy(n.fe,e.overlayMutation))}function TR(n,e){const t=e.path.lastSegment();return[n,Cs(e.path.popLast()),t]}function QD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ac(r.readTime),documentKey:Cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class SR{getBundleMetadata(e,t){return XD(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:uc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return XD(e).put({bundleId:(r=t).id,createTime:ac(Vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return JD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:o0(i.bundledQuery),readTime:uc(i.readTime)};var i})}saveNamedQuery(e,t){return JD(e).put({name:(r=t).name,readTime:ac(Vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XD(n){return di(n,"bundles")}function JD(n){return di(n,"namedQueries")}class Ly{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Ly(e,t.uid||"")}getOverlay(e,t){return Ju(e).get(TR(this.userId,t)).next(r=>r?YD(this.serializer,r):null)}getOverlays(e,t){const r=Ia();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Ay(t,l);i.push(this.we(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Cs(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Ju(e).J("collectionPathOverlayIndex",h))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ia(),a=Cs(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ju(e).j("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=YD(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ia();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ju(e).X({index:"collectionGroupOverlayIndex",range:h},(m,v,D)=>{const S=YD(this.serializer,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}we(e,t){return Ju(e).put(function(r,i,a){const[l,h,m]=TR(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Zg(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Ju(n){return di(n,"documentOverlays")}class Wd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Od(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(tu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?hD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Xe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function a0(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Da(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=a0(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Wd.Ve=new Wd;class AR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=Da(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=Da(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class u0{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Qg{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Xg{constructor(){this.je=new AR,this.ze=new u0(this.je),this.We=new Qg(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class qd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qd(this.indexId,this.documentKey,this.arrayValue,r)}}function cc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Jg(n.arrayValue,e.arrayValue),0!==t?t:(t=Jg(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Jg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){bt(e.collectionGroup===this.collectionId);const t=Dg(e);if(void 0!==t&&!this.en(t))return!1;const r=Jl(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[a];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tT(n){var e,t;if(bt(n instanceof ln||n instanceof An),n instanceof ln){if(n instanceof nR){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>ln.create(n.field,"==",a)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>tT(i));return An.create(r,n.op)}function MR(n){if(0===n.getFilters().length)return[];const e=Vy(tT(n));return bt(nT(e)),em(e)||l0(e)?[e]:e.getFilters()}function em(n){return n instanceof ln}function l0(n){return n instanceof An&&Cy(n)}function nT(n){return em(n)||l0(n)||function(e){if(e instanceof An&&Iy(e)){for(const t of e.getFilters())if(!em(t)&&!l0(t))return!1;return!0}return!1}(n)}function Vy(n){if(bt(n instanceof ln||n instanceof An),n instanceof ln)return n;if(1===n.filters.length)return Vy(n.filters[0]);const e=n.filters.map(r=>Vy(r));let t=An.create(e,n.op);return t=tm(t),nT(t)?t:(bt(t instanceof An),bt(Ud(t)),bt(t.filters.length>1),t.filters.reduce((r,i)=>c0(r,i)))}function c0(n,e){let t;return bt(n instanceof ln||n instanceof An),bt(e instanceof ln||e instanceof An),t=n instanceof ln?e instanceof ln?An.create([n,e],"and"):rT(n,e):e instanceof ln?rT(e,n):function(r,i){if(bt(r.filters.length>0&&i.filters.length>0),Ud(r)&&Ud(i))return yD(r,i.getFilters());const a=Iy(r)?r:i,l=Iy(r)?i:r,h=a.filters.map(m=>c0(m,l));return An.create(h,"or")}(n,e),tm(t)}function rT(n,e){if(Ud(e))return yD(e,n.getFilters());{const t=e.filters.map(r=>c0(n,r));return An.create(t,"or")}}function tm(n){if(bt(n instanceof ln||n instanceof An),n instanceof ln)return n;const e=n.getFilters();if(1===e.length)return tm(e[0]);if(PE(n))return n;const t=e.map(i=>tm(i)),r=[];return t.forEach(i=>{i instanceof ln?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class Uy{constructor(){this.rn=new d0}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(lo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class d0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(_n.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(_n.comparator)).toArray()}}const By=new Uint8Array(0);class iT{constructor(e,t){this.user=e,this.databaseId=t,this.on=new d0,this.un=new Yu(r=>$o(r),(r,i)=>Og(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Cs(i)};return h0(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Cg(t),""],!1,!0);return h0(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(_a(l.parent))}return r})}addFieldIndex(e,t){const r=nm(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=rm(e);return a.next(h=>{l.put(QD(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=nm(e),i=rm(e),a=Kd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kd(e);let i=!0;const a=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Qt();const h=[];return le.forEach(a,(m,v)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(He=>`${He.fieldPath}:${He.kind}`).join(",")}`} to execute ${$o(t)}`);const S=function(He,at){const Ot=Dg(at);if(void 0===Ot)return null;for(const Zt of Hd(He,Ot.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(v,m),N=function(He,at){const Ot=new Map;for(const Zt of Jl(at))for(const Ri of Hd(He,Zt.fieldPath))switch(Ri.op){case"==":case"in":Ot.set(Zt.fieldPath.canonicalString(),Ri.value);break;case"not-in":case"!=":return Ot.set(Zt.fieldPath.canonicalString(),Ri.value),Array.from(Ot.values())}return null}(v,m),$=function(He,at){const Ot=[];let Zt=!0;for(const Ri of Jl(at)){const Ma=0===Ri.kind?yr(He,Ri.fieldPath,He.startAt):sR(He,Ri.fieldPath,He.startAt);Ot.push(Ma.value),Zt&&(Zt=Ma.inclusive)}return new nc(Ot,Zt)}(v,m),Z=function(He,at){const Ot=[];let Zt=!0;for(const Ri of Jl(at)){const Ma=0===Ri.kind?sR(He,Ri.fieldPath,He.endAt):yr(He,Ri.fieldPath,He.endAt);Ot.push(Ma.value),Zt&&(Zt=Ma.inclusive)}return new nc(Ot,Zt)}(v,m),se=this.hn(m,v,$),ce=this.hn(m,v,Z),We=this.ln(m,v,N),ot=this.fn(m.indexId,S,se,$.inclusive,ce,Z.inclusive,We);return le.forEach(ot,He=>r.H(He,t.limit).next(at=>{at.forEach(Ot=>{const Zt=Xe.fromSegments(Ot.documentKey);l.has(Zt)||(l=l.add(Zt),h.push(Zt))})}))}).next(()=>h)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:MR(An.create(e.filters,"and")).map(r=>FE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const N=t?this.dn(t[S/v]):By,$=this.wn(e,N,r[S%v],i),Z=this._n(e,N,a[S%v],l),se=h.map(ce=>this.wn(e,N,ce,!0));D.push(...this.createRange($,Z,se))}return D}wn(e,t,r,i){const a=new qd(e,Xe.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new qd(e,Xe.empty(),t,r);return i?a.Je():a}an(e,t){const r=new eT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let m=new Pn(mr.comparator),v=!1;for(const D of h.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const D of h.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Xg;for(const i of Jl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);Wd.Ve._e(a,l)}return r.Qe()}dn(e){const t=new Xg;return Wd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Xg;return Wd.Ve._e(Ld(this.databaseId,t),r.He(function(i){const a=Jl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Xg);let a=0;for(const l of Jl(e)){const h=r[a++];for(const m of i)if(this.yn(t,l.fieldPath)&&Ng(h))i=this.pn(i,l,h);else{const v=m.He(l.kind);Wd.Ve._e(h,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new Xg;m.seed(h.Qe()),Wd.Ve._e(l,m.He(t.kind)),a.push(m)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof ln&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=nm(e),i=rm(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return le.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new Df(D.sequenceNumber,new lo(uc(D.readTime),new Xe(_a(D.documentKey)),D.largestBatchId)):Df.empty(),N=v.fields.map(([$,Z])=>new Tg(mr.fromServerFormat($),Z));return new bg(v.indexId,v.collectionGroup,N,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=nm(e),a=rm(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,m=>a.put(QD(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,m=>this.En(e,i,m).next(v=>{const D=this.An(a,m);return v.isEqual(D)?le.resolve():this.vn(e,a,m,v,D)}))))})}Rn(e,t,r,i){return Kd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Kd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Kd(e);let a=new Pn(cc);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{a=a.add(new qd(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}An(e,t){let r=new Pn(cc);const i=this.mn(t,e);if(null==i)return r;const a=Dg(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Ng(l))for(const h of l.arrayValue.values||[])r=r.add(new qd(t.indexId,e.key,this.dn(h),i))}else r=r.add(new qd(t.indexId,e.key,By,i));return r}vn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,D,S){const N=h.getIterator(),$=m.getIterator();let Z=kd(N),se=kd($);for(;Z||se;){let ce=!1,We=!1;if(Z&&se){const ot=v(Z,se);ot<0?We=!0:ot>0&&(ce=!0)}else null!=Z?We=!0:ce=!0;ce?(D(se),se=kd($)):We?(S(Z),Z=kd(N)):(Z=kd(N),se=kd($))}}(i,a,cc,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),le.waitFor(l)}Tn(e){let t=1;return rm(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>cc(l,h)).filter((l,h,m)=>!h||0!==cc(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=cc(l,e),m=cc(l,t);if(0===h)i[0]=e.Je();else if(h>0&&m<0)i.push(l),i.push(l.Je());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,By,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,By,[]]))}return a}bn(e,t){return cc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f0)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ct())).next(f0)}}function h0(n){return di(n,"collectionParents")}function Kd(n){return di(n,"indexEntries")}function nm(n){return di(n,"indexConfiguration")}function rm(n){return di(n,"indexState")}function f0(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new lo(e.readTime,e.documentKey,t)}const p0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:l},(D,S,N)=>(h++,N.delete()));a.push(m.next(()=>{bt(1===h)}));const v=[];for(const D of t.mutations){const S=CE(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return le.waitFor(a).next(()=>v)}function Bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class jf{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){bt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new jf(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iu(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=dc(e),l=iu(e);return l.add({}).next(h=>{bt("number"==typeof h);const m=new Hg(h,t,r,i),v=function(N,$,Z){const se=Z.baseMutations.map(We=>Zg(N.fe,We)),ce=Z.mutations.map(We=>Zg(N.fe,We));return{userId:$,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:se,mutations:ce}}(this.serializer,this.userId,m),D=[];let S=new Pn((N,$)=>Wt(N.canonicalString(),$.canonicalString()));for(const N of i){const $=CE(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(v)),D.push(a.put($,qM))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),le.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return iu(e).get(t).next(r=>r?(bt(r.userId===this.userId),lc(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return iu(e).X({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(bt(h.batchId>=r),a=lc(this.serializer,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return iu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iu(e).j("userMutationsIndex",t).next(r=>r.map(i=>lc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sr(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return dc(e).X({range:i},(l,h,m)=>{const[v,D,S]=l,N=_a(D);if(v===this.userId&&t.path.isEqual(N))return iu(e).get(S).next($=>{if(!$)throw ct();bt($.userId===this.userId),a.push(lc(this.serializer,$))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Wt);const i=[];return t.forEach(a=>{const l=Sr(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=dc(e).X({range:h},(v,D,S)=>{const[N,$,Z]=v,se=_a($);N===this.userId&&a.path.isEqual(se)?r=r.add(Z):S.done()});i.push(m)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Sr(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Pn(Wt);return dc(e).X({range:l},(m,v,D)=>{const[S,N,$]=m,Z=_a(N);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add($)):D.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(iu(e).get(a).next(l=>{if(null===l)throw ct();bt(l.userId===this.userId),r.push(lc(this.serializer,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sT(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return dc(e).X({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=_a(a[1]);i.push(m)}else h.done()}).next(()=>{bt(0===i.length)})})}containsKey(e,t){return g0(e,this.userId,t)}xn(e){return oT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function g0(n,e,t){const r=Sr(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return dc(n).X({range:a,Y:!0},(h,m,v)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function iu(n){return di(n,"mutations")}function dc(n){return di(n,"documentMutations")}function oT(n){return di(n,"mutationQueues")}class Zd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Zd(0)}static Mn(){return new Zd(-1)}}class RR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Zd(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new Wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hf(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Hf(e).X((l,h)=>{const m=Uf(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Hf(e).X((r,i)=>{const a=Uf(i);t(a)})}$n(e){return m0(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}On(e,t){return m0(e).put("targetGlobalKey",t)}Fn(e,t){return Hf(e).put(ZD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$o(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Hf(e).X({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=Uf(h);Og(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=su(e);return t.forEach(l=>{const h=Cs(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=su(e);return le.forEach(t,a=>{const l=Cs(a.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=su(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=su(e);let a=Qt();return i.X({range:r,Y:!0},(l,h,m)=>{const v=_a(l[1]),D=new Xe(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Cs(t.path),i=IDBKeyRange.bound([r],[Cg(r)],!1,!0);let a=0;return su(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}le(e,t){return Hf(e).get(t).next(r=>r?Uf(r):null)}}function Hf(n){return di(n,"targets")}function m0(n){return di(n,"targetGlobal")}function su(n){return di(n,"targetDocuments")}function _0([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class xR{constructor(e){this.Ln=e,this.buffer=new Pn(_0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zu(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Gu(r)}yield t.Qn(3e5)}))}}class aT{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Is.ct);const r=new xR(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(p0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p0):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,h,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),If()<=ys.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class lT{constructor(e,t){this.db=e,this.garbageCollector=function uT(n,e){return new aT(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return im(e,r)}removeReference(e,t,r){return im(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return im(e,t)}Xn(e,t){return function(r,i){let a=!1;return oT(r).Z(l=>g0(r,l,i).next(h=>(h&&(a=!0),le.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,h)=>{if(h<=t){const m=this.Xn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),su(e).delete([0,Cs(l.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return im(e,t)}Yn(e,t){const r=su(e);let i,a=Is.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==Is.ct&&t(new Xe(_a(i)),a),a=v,i=m):a=Is.ct}).next(()=>{a!==Is.ct&&t(new Xe(_a(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function im(n,e){return su(n).put((r=n.currentSequenceNumber,{targetId:0,path:Cs(e.path),sequenceNumber:r}));var r}class cT{constructor(){this.changes=new Yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qd(e).put(r)}removeEntry(e,t,r){return Qd(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Yg(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=ar.newInvalidDocument(t);return Qd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sm(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:ar.newInvalidDocument(t)};return Qd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sm(t))},(i,a)=>{r={document:this.ts(t,a),size:Bf(a)}}).next(()=>r)}getEntries(e,t){let r=Di();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Di(),i=new er(Xe.comparator);return this.ns(e,t,(a,l)=>{const h=this.ts(a,l);r=r.insert(a,h),i=i.insert(a,Bf(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new Pn(PR);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(sm(i.first()),sm(i.last())),l=i.getIterator();let h=l.getNext();return Qd(e).X({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&PR(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.G(sm(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),Yg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qd(e).j(IDBKeyRange.bound(l,h,!0)).next(m=>{let v=Di();for(const D of m){const S=this.ts(Xe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(ic(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=Di();const l=NR(t,r),h=NR(t,lo.max());return Qd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,D)=>{const S=this.ts(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new Ds(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Yd(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Zn(e,t){return Yd(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function DR(n,e){let t;if(e.document)t=$D(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=uc(e.noDocument.readTime);t=ar.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=uc(e.unknownDocument.version);t=ar.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Wn(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return ar.newInvalidDocument(e)}}function hT(n){return new dT(n)}class Ds extends cT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Yu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((a,l)=>Wt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.us.get(a);if(t.push(this.os.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=Vf(this.os.serializer,l);i=i.add(a.path.popLast());const v=Bf(m);r+=v-h.size,t.push(this.os.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=Vf(this.os.serializer,l.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Yd(n){return di(n,"remoteDocumentGlobal")}function Qd(n){return di(n,"remoteDocumentsV14")}function sm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NR(n,e){const t=e.documentKey.path.toArray();return[n,Yg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PR(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Wt(t[a],r[a]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class fT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jy{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&jg(r.mutation,i,Gs.empty(),Wn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=Ia();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Vg();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Di();const l=Rf(),h=Rf();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof Qu)?a=a.insert(v.key,v):void 0!==D?(l.set(v.key,D.mutation.getFieldMask()),jg(D.mutation,v,D.mutation.getFieldMask(),Wn.now())):l.set(v.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new fT(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Rf();let i=new er((l,h)=>l-h),a=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||Gs.empty();D=h.applyToLocalView(v,D),r.set(m,D);const S=(i.get(h.batchId)||Qt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,D=m.value,S=$E();D.forEach(N=>{if(!a.has(N)){const $=RD(t.get(N),r.get(N));null!==$&&S.set(N,$),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Dy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(Ia());let h=-1,m=a;return l.next(v=>le.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?le.resolve():this.remoteDocumentCache.getEntry(e,D).next(N=>{m=m.insert(D,N)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Qt())).next(D=>({batchId:h,changes:CD(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=Vg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Vg();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,h=>{const m=(v=t,D=h.child(i),new ru(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,ar.newInvalidDocument(v)))});let l=Vg();return a.forEach((h,m)=>{const v=i.get(h);void 0!==v&&jg(v.mutation,m,Gs.empty(),Wn.now()),ic(t,m)&&(l=l.insert(h,m))}),l})}}class om{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Vr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:o0(r.bundledQuery),readTime:Vr(r.readTime)}),le.resolve();var r}}class OR{constructor(){this.overlays=new er(Xe.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ia();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Ia(),a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new er((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Ia(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=Ia(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return le.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ay(t,r));let a=this.ls.get(t);void 0===a&&(a=Qt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class am{constructor(){this.fs=new Pn(Ti.ds),this.ws=new Pn(Ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Xe(new _n([])),r=new Ti(t,e),i=new Ti(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xe(new _n([])),r=new Ti(t,e),i=new Ti(t,e+1);let a=Qt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xe.comparator(e.key,t.key)||Wt(e.As,t.As)}static _s(e,t){return Wt(e.As,t.As)||Xe.comparator(e.key,t.key)}}class pT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Pn(Ti.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new Hg(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new Ti(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);a.push(h)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Wt);return t.forEach(i=>{const a=new Ti(i,0),l=new Ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],h=>{r=r.add(h.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Ti(new Xe(a),0);let h=new Pn(Wt);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.As)),!0)},l),le.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){bt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const a=new Ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ti(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kR{constructor(e){this.Ds=e,this.docs=new er(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=Di();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ar.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Di();const l=t.path,h=new Xe(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:D}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||vE(Kb(D),r)<=0||(i.has(D.key)||ic(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ct()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FR(this)}getSize(e){return le.resolve(this.size)}}class FR extends cT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class LR{constructor(e){this.persistence=e,this.xs=new Yu(t=>$o(t),Og),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new am,this.targetCount=0,this.Ms=Zd.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Zd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class um{constructor(e,t){this.$s={},this.overlays={},this.Os=new Is(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new LR(this),this.indexManager=new Uy,this.remoteDocumentCache=new kR(r=>this.referenceDelegate.Ls(r)),this.serializer=new KD(t),this.qs=new om(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new pT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new gT(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class gT extends py{constructor(e){super(),this.currentSequenceNumber=e}}class Hy{constructor(e){this.persistence=e,this.Qs=new am,this.js=null}static zs(e){return new Hy(e)}get Ws(){if(this.js)return this.js;throw ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=Xe.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class v0{constructor(e){this.serializer=e}O(e,t,r,i){const a=new Sg("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xb,{unique:!0}),h.createObjectStore("documentMutations"),VR(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),VR(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xb,{unique:!0});const D=m.store("mutations"),S=v.map(N=>D.put(N));return le.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:MO});m.createIndex("collectionPathOverlayIndex",iD,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",bE,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:KM});m.createIndex("documentKeyIndex",Jb),m.createIndex("collectionGroupIndex",ZM)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:QM}).createIndex("sequenceNumberIndex",nD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:XM}).createIndex("documentKeyIndex",rD,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Bf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>le.forEach(h,m=>{bt(m.userId===a.userId);const v=lc(this.serializer,m);return sT(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,h)=>{const m=new _n(l),v=[0,Cs(m)];a.push(t.get(v).next(D=>D?le.resolve():t.put({targetId:0,path:Cs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:YM});const r=t.store("collectionParents"),i=new d0,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Cs(m)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const m=new _n(l);return a(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,m],v)=>{const D=_a(h);return a(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Uf(i),l=ZD(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Xe(_n.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):ct()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=hT(this.serializer),a=new um(Hy.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(m=>{var v;let D=null!==(v=h.get(m.userId))&&void 0!==v?v:Qt();lc(this.serializer,m).keys().forEach(S=>D=D.add(S)),h.set(m.userId,D)}),le.forEach(h,(m,v)=>{const D=new bi(v),S=Ly.de(this.serializer,D),N=a.getIndexManager(D),$=jf.de(D,this.serializer,N,a.referenceDelegate);return new jy(i,$,S,N).recalculateAndSaveOverlaysForDocumentKeys(new co(t,Is.ct),m).next()})})}}function VR(n){n.createObjectStore("targetDocuments",{keyPath:tD}).createIndex("documentTargetsIndex",Sf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eD,{unique:!0}),n.createObjectStore("targetGlobal")}const $y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class w0{constructor(e,t,r,i,a,l,h,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=h,this.ri=v,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=N=>Promise.resolve(),!w0.D())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lT(this,i),this.di=t+"main",this.serializer=new KD(m),this.wi=new Ho(this.di,this.ui,new v0(this.serializer)),this.Bs=new RR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hT(this.serializer),this.qs=new SR,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,$y);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Is(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>el(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(zu(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return $f(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return el(e).delete(this.clientId)}bi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return le.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):$f(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,$y);return!1}}return!(!this.networkEnabled||!this.inForeground)||el(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new co(t,Is.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>el(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return jf.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iT(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Ly.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?wa:14===l?va:13===l?sD:12===l?JM:11===l?ya:void ct();var l;let h;return this.wi.runTransaction(e,i,a,m=>(h=new co(m,this.Os?this.Os.next():Is.ct),"readwrite-primary"===t?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw Lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Pe(fe.FAILED_PRECONDITION,wE);return r(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return $f(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,$y)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $f(e).put("owner",t)}static D(){return Ho.D()}Ai(e){const t=$f(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,U.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Lr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $f(n){return di(n,"owner")}function el(n){return di(n,"clientMetadata")}function E0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Qt(),i=Qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Gy(e,t.fromCache,r,i)}}class zy{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(VE(t))return le.resolve(null);let r=bs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=rc(t,null,"F"),r=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Qt(...a);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,h);return this.zi(t,v,l,m.readTime)?this.Ki(e,rc(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return VE(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(If()<=ys.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),BE(t)),this.Wi(e,l,t,yE(i,-1)))})}ji(e,t){let r=new Pn(HE(e));return t.forEach((i,a)=>{ic(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return If()<=ys.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",BE(t)),this.Ui.getDocumentsMatchingQuery(e,t,lo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class OO{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new er(Wt),this.Yi=new Yu(a=>$o(a),Og),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jy(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function mT(n,e,t,r){return new OO(n,e,t,r)}function UR(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,Ce.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=Qt();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:l,addedBatchIds:h}))})})}),I0.apply(this,arguments)}function _T(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function C0(n,e,t){let r=Qt(),i=Qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Di();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Dt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{nr:l,sr:i}})}function jR(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jd(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Xu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function eh(n,e,t){return b0.apply(this,arguments)}function b0(){return b0=(0,Ce.Z)(function*(n,e,t){const r=it(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!zu(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),b0.apply(this,arguments)}function Wy(n,e,t){const r=it(n);let i=Dt.min(),a=Qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=it(h),S=D.Yi.get(v);return void 0!==S?le.resolve(D.Ji.get(S)):D.Bs.getTargetData(m,v)}(r,l,bs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?a:Qt())).next(h=>(T0(r,jE(e),h),{documents:h,ir:a})))}function D0(n,e){const t=it(n),r=it(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function vT(n,e){const t=it(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,yE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(T0(t,e,i),i))}function T0(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function qy(){return qy=(0,Ce.Z)(function*(n,e,t,r){const i=it(n);let a=Qt(),l=Di();for(const v of t){const D=e.rr(v.metadata.name);v.document&&(a=a.add(D));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),l=l.insert(D,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield Jd(i,(v=r,bs(Mf(_n.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>C0(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.nr,D.sr)).next(()=>D.nr)))}),qy.apply(this,arguments)}function ET(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,Ce.Z)(function*(n,e,t=Qt()){const r=yield Jd(n,bs(o0(e.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Vr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const h=r.withResumeToken(Zr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(a,h).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),S0.apply(this,arguments)}function IT(n,e){return`firestore_clients_${n}_${e}`}function HR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ky(n,e){return`firestore_targets_${n}_${e}`}class A0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Pe(i.error.code,i.error.message))),l?new A0(e,t,i.state,a):(Lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new Zy(e,r.state,i):(Lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class M0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=DD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=zM(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new M0(e,a):(Lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class CT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new CT(t.clientId,t.onlineState):(Lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bT{constructor(){this.activeTargetIds=DD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DT{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new er(Wt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=IT(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new bT),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(IT(e.persistenceKey,i));if(a){const l=M0.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ky(this.persistenceKey,e));if(r){const i=Zy.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ky(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=Is.ct;if(null!=a)try{const h=JSON.parse(a);bt("number"==typeof h),l=h}catch(h){Lr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Is.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new A0(this.currentUser,e,t,r),a=HR(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=HR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Ky(this.persistenceKey,e),a=new Zy(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return M0.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return A0.ar(new bi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Zy.ar(i,t)}br(e){return CT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=DD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $R{constructor(){this.Hr=new bT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new bT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kO{Yr(e){}shutdown(){}}class GR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lm=null;function cm(){return null===lm?lm=268435456+Math.round(2147483648*Math.random()):lm++,"0x"+lm.toString(16)}const TT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zR{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fi="WebChannelConnection";class WR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=cm(),h=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const m={};return this.Eo(m,i,a),this.Ao(e,h,m,r).then(v=>(Be("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw Hs("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${TT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=cm();return new Promise((l,h)=>{const m=new Eg;m.setWithCredentials(!0),m.listenOnce(dy.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wg.NO_ERROR:const D=m.getResponseJson();Be(fi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),l(D);break;case wg.TIMEOUT:Be(fi,`RPC '${e}' ${a} timed out`),h(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case wg.HTTP_ERROR:const S=m.getStatus();if(Be(fi,`RPC '${e}' ${a} failed with status:`,S,"response text:",m.getResponseText()),S>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const $=N?.error;if($&&$.status&&$.message){const Z=function(se){const ce=se.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ce)>=0?ce:fe.UNKNOWN}($.status);h(new Pe(Z,$.message))}else h(new Pe(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Be(fi,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);Be(fi,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=cm(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=pE(),h=vg(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new Bb({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const D=a.join("");Be(fi,`Creating RPC '${e}' stream ${i}: ${D}`,m);const S=l.createWebChannel(D,m);let N=!1,$=!1;const Z=new zR({ro:ce=>{$?Be(fi,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(N||(Be(fi,`Opening RPC '${e}' stream ${i} transport.`),S.open(),N=!0),Be(fi,`RPC '${e}' stream ${i} sending:`,ce),S.send(ce))},oo:()=>S.close()}),se=(ce,We,ot)=>{ce.listen(We,He=>{try{ot(He)}catch(at){setTimeout(()=>{throw at},0)}})};return se(S,hy.EventType.OPEN,()=>{$||Be(fi,`RPC '${e}' stream ${i} transport opened.`)}),se(S,hy.EventType.CLOSE,()=>{$||($=!0,Be(fi,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),se(S,hy.EventType.ERROR,ce=>{$||($=!0,Hs(fi,`RPC '${e}' stream ${i} transport errored:`,ce),Z.wo(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),se(S,hy.EventType.MESSAGE,ce=>{var We;if(!$){const ot=ce.data[0];bt(!!ot);const at=ot.error||(null===(We=ot[0])||void 0===We?void 0:We.error);if(at){Be(fi,`RPC '${e}' stream ${i} received error:`,at);const Ot=at.status;let Zt=function(Ma){const Bv=Yr[Ma];if(void 0!==Bv)return FD(Bv)}(Ot),Ri=at.message;void 0===Zt&&(Zt=fe.INTERNAL,Ri="Unknown error status: "+Ot+" with message "+at.message),$=!0,Z.wo(new Pe(Zt,Ri)),S.close()}else Be(fi,`RPC '${e}' stream ${i} received:`,ot),Z._o(ot)}}),se(h,Ub.STAT_EVENT,ce=>{ce.stat===wf.PROXY?Be(fi,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===wf.NOPROXY&&Be(fi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function qR(){return typeof window<"u"?window:null}function R0(){return typeof document<"u"?document:null}function Yy(n){return new HD(n,!0)}class Qy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class ST{constructor(e,t,r,i,a,l,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Qy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ce.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ce.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KR extends ST{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function wR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(bt(void 0===v||"string"==typeof v),Zr.fromBase64String(v||"")):(bt(void 0===v||v instanceof Uint8Array),Zr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?fe.UNKNOWN:FD(m.code);return new Pe(v,m.message||"")}(l);t=new YE(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ba(n,r.document.name),a=Vr(r.document.updateTime),l=r.document.createTime?Vr(r.document.createTime):Dt.min(),h=new Wi({mapValue:{fields:r.document.fields}}),m=ar.newFoundDocument(i,a,l,h);t=new Of(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=ba(n,r.document),a=r.readTime?Vr(r.readTime):Dt.min(),l=ar.newNoDocument(i,a);t=new Of([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ba(n,r.document);t=new Of([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new mR(i,a);t=new xy(r.targetId,l)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Vr(a.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ff(this.serializer),t.addTarget=function(i,a){let l;const h=a.target;if(l=jd(h)?{documents:r0(i,h)}:{query:s0(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Oy(i,a.resumeToken);const m=QE(i,a.expectedCount);null!==m&&(l.expectedCount=m)}else if(a.snapshotVersion.compareTo(Dt.min())>0){l.readTime=Wg(i,a.snapshotVersion.toTimestamp());const m=QE(i,a.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const r=function PO(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ff(this.serializer),t.removeTarget=e,this.Wo(t)}}class ZR extends ST{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function NO(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,i){let a=Vr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Vr(i)),new pR(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.cu(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ff(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zg(this.serializer,r))};this.Wo(t)}}class FO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Pe(fe.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class AT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Lr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class LO{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,Ce.Z)(function*(){var m;tl(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(v){const D=it(v);D.vu.add(4),yield Gf(D),D.bu.set("Unknown"),D.vu.delete(4),yield Ts(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.bu=new AT(r,i)}}function Ts(n){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,Ce.Z)(function*(n){if(tl(n))for(const e of n.Ru)yield e(!0)}),Jy.apply(this,arguments)}function Gf(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ce.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),MT.apply(this,arguments)}function Si(n,e){const t=it(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),fm(t)?x0(t):th(t).Ko()&&hm(t,e))}function dm(n,e){const t=it(n),r=th(t);t.Au.delete(e),r.Ko()&&RT(t,e),0===t.Au.size&&(r.Ko()?r.jo():tl(t)&&t.bu.set("Unknown"))}function hm(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}th(n).su(e)}function RT(n,e){n.Vu.qt(e),th(n).iu(e)}function x0(n){n.Vu=new _R({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),th(n).start(),n.bu.gu()}function fm(n){return tl(n)&&!th(n).Uo()&&n.Au.size>0}function tl(n){return 0===it(n).vu.size}function N0(n){n.Vu=void 0}function QR(n){return ev.apply(this,arguments)}function ev(){return ev=(0,Ce.Z)(function*(n){n.Au.forEach((e,t)=>{hm(n,e)})}),ev.apply(this,arguments)}function xT(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,Ce.Z)(function*(n,e){N0(n),fm(n)?(n.bu.Iu(e),x0(n)):n.bu.set("Unknown")}),tv.apply(this,arguments)}function NT(n,e,t){return P0.apply(this,arguments)}function P0(){return P0=(0,Ce.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof YE&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pm(n,r)}else if(e instanceof Of?n.Vu.Ht(e):e instanceof xy?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield _T(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,m)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(Zr.EMPTY_BYTE_STRING,v.snapshotVersion)),RT(i,h);const D=new Xu(v.target,h,m,v.sequenceNumber);hm(i,D)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield pm(n,r)}var r}),P0.apply(this,arguments)}function pm(n,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,Ce.Z)(function*(n,e,t){if(!zu(e))throw e;n.vu.add(1),yield Gf(n),n.bu.set("Offline"),t||(t=()=>_T(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Ts(n)}))}),O0.apply(this,arguments)}function nv(n,e){return e().catch(t=>pm(n,t,e))}function ho(n){return rv.apply(this,arguments)}function rv(){return rv=(0,Ce.Z)(function*(n){const e=it(n),t=nl(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;k0(e);)try{const i=yield jR(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,F0(e,i)}catch(i){yield pm(e,i)}PT(e)&&XR(e)}),rv.apply(this,arguments)}function k0(n){return tl(n)&&n.Eu.length<10}function F0(n,e){n.Eu.push(e);const t=nl(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function PT(n){return tl(n)&&!nl(n).Uo()&&n.Eu.length>0}function XR(n){nl(n).start()}function OT(n){return L0.apply(this,arguments)}function L0(){return L0=(0,Ce.Z)(function*(n){nl(n).hu()}),L0.apply(this,arguments)}function JR(n){return V0.apply(this,arguments)}function V0(){return V0=(0,Ce.Z)(function*(n){const e=nl(n);for(const t of n.Eu)e.uu(t.mutations)}),V0.apply(this,arguments)}function ex(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,Ce.Z)(function*(n,e,t){const r=n.Eu.shift(),i=qE.from(r,e,t);yield nv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ho(n)}),iv.apply(this,arguments)}function VO(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,Ce.Z)(function*(n,e){var t;e&&nl(n).ou&&(yield(t=(0,Ce.Z)(function*(r,i){if(kD(a=i.code)&&a!==fe.ABORTED){const l=r.Eu.shift();nl(r).Qo(),yield nv(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield ho(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),PT(n)&&XR(n)}),sv.apply(this,arguments)}function kT(n,e){return ov.apply(this,arguments)}function ov(){return ov=(0,Ce.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=tl(t);t.vu.add(3),yield Gf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Ts(t)}),ov.apply(this,arguments)}function FT(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Ce.Z)(function*(n,e){const t=it(n);e?(t.vu.delete(2),yield Ts(t)):e||(t.vu.add(2),yield Gf(t),t.bu.set("Unknown"))}),gm.apply(this,arguments)}function th(n){return n.Su||(n.Su=function(e,t,r){const i=it(e);return i.fu(),new KR(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:QR.bind(null,n),ao:xT.bind(null,n),nu:NT.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Su.Qo(),fm(n)?x0(n):n.bu.set("Unknown")):(yield n.Su.stop(),N0(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function nl(n){return n.Du||(n.Du=function(e,t,r){const i=it(e);return i.fu(),new ZR(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:OT.bind(null,n),ao:VO.bind(null,n),au:JR.bind(null,n),cu:ex.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Du.Qo(),yield ho(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class U0{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new U0(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),zu(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class rh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Vg(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new rh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new rh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ih{constructor(){this.Cu=new er(Xe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class rl{constructor(e,t,r,i,a,l,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new rl(e,t,rh.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class LT{constructor(){this.Nu=void 0,this.listeners=[]}}class VT{constructor(){this.queries=new Yu(e=>wD(e),Fg),this.onlineState="Unknown",this.ku=new Set}}function B0(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,Ce.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new LT),i)try{a.Nu=yield t.onListen(r)}catch(l){const h=nh(l,`Initialization of query '${BE(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&BT(t)}),j0.apply(this,arguments)}function UT(n,e){return av.apply(this,arguments)}function av(){return av=(0,Ce.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),av.apply(this,arguments)}function tx(n,e){const t=it(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&BT(t)}function nx(n,e,t){const r=it(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function BT(n){n.ku.forEach(e=>{e.next()})}class jT{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class UO{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class H0{constructor(e){this.serializer=e}rr(e){return ba(this.serializer,e)}ur(e){return e.metadata.exists?$D(this.serializer,e.document,!1):ar.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Vr(e)}}class rx{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HT(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=_n.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new H0(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Qt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function wT(n,e,t,r){return qy.apply(this,arguments)}(e.localStore,new H0(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield ET(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function HT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $T{constructor(e){this.key=e}}class ix{constructor(e){this.key=e}}class sx{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Qt(),this.mutatedKeys=Qt(),this.tc=HE(e),this.ec=new rh(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new ih,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),$=ic(this.query,S)?S:null,Z=!!N&&this.mutatedKeys.has(N.key),se=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let ce=!1;N&&$?N.data.isEqual($.data)?Z!==se&&(r.track({type:3,doc:$}),ce=!0):this.rc(N,$)||(r.track({type:2,doc:$}),ce=!0,(m&&this.tc($,m)>0||v&&this.tc($,v)<0)&&(h=!0)):!N&&$?(r.track({type:0,doc:$}),ce=!0):N&&!$&&(r.track({type:1,doc:N}),ce=!0,(m||v)&&(h=!0)),ce&&($?(l=l.add($),a=se?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,D)=>function(S,N){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return $(S)-$(N)}(v.type,D.type)||this.tc(v.doc,D.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==a.length||m?{snapshot:new rl(this.query,e.ec,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ih,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new ix(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new $T(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return rl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class BO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jO{constructor(e){this.key=e,this.fc=!1}}class HO{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Yu(h=>wD(h),Fg),this._c=new Map,this.mc=new Set,this.gc=new er(Xe.comparator),this.yc=new Map,this.Ic=new am,this.Tc={},this.Ec=new Map,this.Ac=Zd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ox(n,e){return zf.apply(this,arguments)}function zf(){return zf=(0,Ce.Z)(function*(n,e){const t=ym(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield Jd(t.localStore,bs(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield $0(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&Si(t.remoteStore,l)}return i}),zf.apply(this,arguments)}function $0(n,e,t,r,i){return G0.apply(this,arguments)}function G0(){return G0=(0,Ce.Z)(function*(n,e,t,r,i){n.Rc=(S,N,$)=>{return(Z=(0,Ce.Z)(function*(se,ce,We,ot){let He=ce.view.sc(We);He.zi&&(He=yield Wy(se.localStore,ce.query,!1).then(({documents:Zt})=>ce.view.sc(Zt,He)));const at=ot&&ot.targetChanges.get(ce.targetId),Ot=ce.view.applyChanges(He,se.isPrimaryClient,at);return dv(se,ce.targetId,Ot.cc),Ot.snapshot}),function(se,ce,We,ot){return Z.apply(this,arguments)})(n,S,N,$);var Z};const a=yield Wy(n.localStore,e,!0),l=new sx(e,a.ir),h=l.sc(a.documents),m=zg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(h,n.isPrimaryClient,m);dv(n,t,v.cc);const D=new BO(e,t,l);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),G0.apply(this,arguments)}function GT(n,e){return il.apply(this,arguments)}function il(){return il=(0,Ce.Z)(function*(n,e){const t=it(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Fg(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield eh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dm(t.remoteStore,r.targetId),sh(t,r.targetId)}).catch(Gu))):(sh(t,r.targetId),yield eh(t.localStore,r.targetId,!0))}),il.apply(this,arguments)}function mm(){return mm=(0,Ce.Z)(function*(n,e,t){const r=sI(n);try{const i=yield function(a,l){const h=it(a),m=Wn.now(),v=l.reduce((N,$)=>N.add($.key),Qt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let $=Di(),Z=Qt();return h.Zi.getEntries(N,v).next(se=>{$=se,$.forEach((ce,We)=>{We.isValidDocument()||(Z=Z.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,$)).next(se=>{D=se;const ce=[];for(const We of l){const ot=ND(We,D.get(We.key).overlayedDocument);null!=ot&&ce.push(new Qu(We.key,ot,gD(ot.value.mapValue),Bn.exists(!0)))}return h.mutationQueue.addMutationBatch(N,m,ce,l)}).next(se=>{S=se;const ce=se.applyToLocalDocumentSet(D,Z);return h.documentOverlayCache.saveOverlays(N,se.batchId,ce)})}).then(()=>({batchId:S.batchId,changes:CD(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.Tc[a.currentUser.toKey()];m||(m=new er(Wt)),m=m.insert(l,h),a.Tc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield ou(r,i.changes),yield ho(r.remoteStore)}catch(i){const a=nh(i,"Failed to persist write");t.reject(a)}}),mm.apply(this,arguments)}function uv(n,e){return z0.apply(this,arguments)}function z0(){return z0=(0,Ce.Z)(function*(n,e){const t=it(n);try{const r=yield function yT(n,e){const t=it(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((D,S)=>{const N=i.get(S);if(!N)return;h.push(t.Bs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,D.addedDocuments,S)));let $=N.withSequenceNumber(a.currentSequenceNumber);var Z,se,ce;null!==e.targetMismatches.get(S)?$=$.withResumeToken(Zr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):D.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(D.resumeToken,r)),i=i.insert(S,$),se=$,ce=D,(0===(Z=N).resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,$))});let m=Di(),v=Qt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(C0(a,l,e.documentUpdates).next(D=>{m=D.nr,v=D.sr})),!r.isEqual(Dt.min())){const D=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return le.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?bt(l.fc):i.removedDocuments.size>0&&(bt(l.fc),l.fc=!1))}),yield ou(t,r,e)}catch(r){yield Gu(r)}}),z0.apply(this,arguments)}function lv(n,e,t){const r=it(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=it(a);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Mu(l)&&(m=!0)}),m&&BT(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function W0(n,e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ce.Z)(function*(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new er(Xe.comparator);l=l.insert(a,ar.newNoDocument(a,Dt.min()));const h=Qt().add(a),m=new Gg(Dt.min(),new Map,new er(Wt),l,h);yield uv(r,m),r.gc=r.gc.remove(a),r.yc.delete(e),Q0(r)}else yield eh(r.localStore,e,!1).then(()=>sh(r,e,t)).catch(Gu)}),Wf.apply(this,arguments)}function $O(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,Ce.Z)(function*(n,e){const t=it(n),r=e.batch.batchId;try{const i=yield function BR(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let N=le.resolve();return S.forEach($=>{N=N.next(()=>v.getEntry(h,$)).next(Z=>{const se=m.docVersions.get($);bt(null!==se),Z.version.compareTo(se)<0&&(D.applyToRemoteDocument(Z,m),Z.isValidDocument()&&(Z.setReadTime(m.commitVersion),v.addEntry(Z)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Qt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Z0(t,r,null),K0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ou(t,i)}catch(i){yield Gu(i)}}),WT.apply(this,arguments)}function GO(n,e,t){return cv.apply(this,arguments)}function cv(){return cv=(0,Ce.Z)(function*(n,e,t){const r=it(n);try{const i=yield function(a,l){const h=it(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(bt(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);Z0(r,e,t),K0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ou(r,i)}catch(i){yield Gu(i)}}),cv.apply(this,arguments)}function q0(){return q0=(0,Ce.Z)(function*(n,e){const t=it(n);tl(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=it(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=nh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),q0.apply(this,arguments)}function K0(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Z0(n,e,t){const r=it(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function sh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Y0(n,r)})}function Y0(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(dm(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Q0(n))}function dv(n,e,t){for(const r of t)r instanceof $T?(n.Ic.addReference(r.key,e),ux(n,r)):r instanceof ix?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Y0(n,r.key)):ct()}function ux(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),Q0(n))}function Q0(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Xe(_n.fromString(e)),r=n.Ac.next();n.yc.set(r,new jO(t)),n.gc=n.gc.insert(t,r),Si(n.remoteStore,new Xu(bs(Mf(t.path)),r,"TargetPurposeLimboResolution",Is.ct))}}function ou(n,e,t){return _m.apply(this,arguments)}function _m(){return _m=(0,Ce.Z)(function*(n,e,t){const r=it(n),i=[],a=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{l.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const D=Gy.Li(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,Ce.Z)(function*(m,v){const D=it(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(v,N=>le.forEach(N.Fi,$=>D.persistence.referenceDelegate.addReference(S,N.targetId,$)).next(()=>le.forEach(N.Bi,$=>D.persistence.referenceDelegate.removeReference(S,N.targetId,$)))))}catch(S){if(!zu(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const $=D.Ji.get(N),se=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);D.Ji=D.Ji.insert(N,se)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),_m.apply(this,arguments)}function zO(n,e){return hv.apply(this,arguments)}function hv(){return hv=(0,Ce.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield UR(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ou(t,r.er)}var i}),hv.apply(this,arguments)}function X0(n,e){const t=it(n),r=t.yc.get(e);if(r&&r.fc)return Qt().add(r.key);{let i=Qt();const a=t._c.get(e);if(!a)return i;for(const l of a){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function lx(n,e){return J0.apply(this,arguments)}function J0(){return J0=(0,Ce.Z)(function*(n,e){const t=it(n),r=yield Wy(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&dv(t,e.targetId,i.cc),i}),J0.apply(this,arguments)}function WO(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,Ce.Z)(function*(n,e){const t=it(n);return vT(t.localStore,e).then(r=>ou(t,r))}),qT.apply(this,arguments)}function cx(n,e,t,r){return eI.apply(this,arguments)}function eI(){return eI=(0,Ce.Z)(function*(n,e,t,r){const i=it(n),a=yield function(l,h){const m=it(l),v=it(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Sn(D,h).next(S=>S?m.localDocuments.getDocuments(D,S):le.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield ho(i.remoteStore):"acknowledged"===t||"rejected"===t?(Z0(i,e,r||null),K0(i,e),h=e,it(it(i.localStore).mutationQueue).Cn(h)):ct(),yield ou(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),eI.apply(this,arguments)}function tI(){return tI=(0,Ce.Z)(function*(n,e){const t=it(n);if(ym(t),sI(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nI(t,r.toArray());t.vc=!0,yield FT(t.remoteStore,!0);for(const a of i)Si(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(sh(t,l),eh(t.localStore,l,!0))),dm(t.remoteStore,l)}),yield i,yield nI(t,r),function(a){const l=it(a);l.yc.forEach((h,m)=>{dm(l.remoteStore,m)}),l.Ic.Ts(),l.yc=new Map,l.gc=new er(Xe.comparator)}(t),t.vc=!1,yield FT(t.remoteStore,!1)}}),tI.apply(this,arguments)}function nI(n,e,t){return fv.apply(this,arguments)}function fv(){return fv=(0,Ce.Z)(function*(n,e,t){const r=it(n),i=[],a=[];for(const l of e){let h;const m=r._c.get(l);if(m&&0!==m.length){h=yield Jd(r.localStore,bs(m[0]));for(const v of m){const D=r.wc.get(v),S=yield lx(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield D0(r.localStore,l);h=yield Jd(r.localStore,v),yield $0(r,hx(v),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(a),i}),fv.apply(this,arguments)}function hx(n){return LE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fx(n){const e=it(n);return it(it(e.localStore).persistence).$i()}function rI(n,e,t,r){return pv.apply(this,arguments)}function pv(){return pv=(0,Ce.Z)(function*(n,e,t,r){const i=it(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield vT(i.localStore,jE(a[0])),h=Gg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Zr.EMPTY_BYTE_STRING);yield ou(i,l,h);break}case"rejected":yield eh(i.localStore,e,!0),sh(i,e,r);break;default:ct()}}),pv.apply(this,arguments)}function KT(n,e,t){return iI.apply(this,arguments)}function iI(){return iI=(0,Ce.Z)(function*(n,e,t){const r=ym(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield D0(r.localStore,i),l=yield Jd(r.localStore,a);yield $0(r,hx(a),l.targetId,!1,l.resumeToken),Si(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield eh(r.localStore,i,!1).then(()=>{dm(r.remoteStore,i),sh(r,i)}).catch(Gu))}}),iI.apply(this,arguments)}function ym(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W0.bind(null,e),e.dc.nu=tx.bind(null,e.eventManager),e.dc.Pc=nx.bind(null,e.eventManager),e}function sI(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GO.bind(null,e),e}class qf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.serializer=Yy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mT(this.persistence,new zy,e.initialUser,this.serializer)}createPersistence(e){return new um(Hy.zs,this.serializer)}createSharedClientState(e){return new $R}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YT extends qf{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield sI(r.Vc.syncEngine),yield ho(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return mT(this.persistence,new zy,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new y0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Pd(t,this.persistence);return new IE(e.asyncQueue,r)}createPersistence(e){const t=E0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new w0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qR(),R0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $R}}class QT extends YT{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof DT&&(r.sharedClientState.syncEngine={jr:cx.bind(null,i),zr:rI.bind(null,i),Wr:KT.bind(null,i),$i:fx.bind(null,i),Qr:WO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,Ce.Z)(function*(l){yield function dx(n,e){return tI.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=qR();if(!DT.D(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=E0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sl{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zO.bind(null,r.syncEngine),yield FT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VT}createDatastore(e){const t=Yy(e.databaseInfo.databaseId),r=new WR(e.databaseInfo);return new FO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>lv(this.syncEngine,h,0),l=GR.D()?new GR:new kO,new LO(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const D=new HO(r,i,a,l,h,m);return v&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=it(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Gf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gx(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qO{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ci,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new UO(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class KO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,l){const h=it(a),m=Ff(h.serializer)+"/documents",v={documents:l.map($=>qg(h.serializer,$))},D=yield h.vo("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach($=>{const Z=function vR(n,e){return"found"in e?function(t,r){bt(!!r.found);const i=ba(t,r.found.name),a=Vr(r.found.updateTime),l=r.found.createTime?Vr(r.found.createTime):Dt.min(),h=new Wi({mapValue:{fields:r.found.fields}});return ar.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const i=ba(t,r.missing),a=Vr(r.readTime);return ar.newNoDocument(i,a)}(n,e):ct()}(h.serializer,$);S.set(Z.key.toString(),Z)});const N=[];return l.forEach($=>{const Z=S.get($.toString());bt(!!Z),N.push(Z)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new WE(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const l=it(i),h=Ff(l.serializer)+"/documents",m={writes:a.map(v=>Zg(l.serializer,v))};yield l.Io("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mx{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Qy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ce.Z)(function*(){const t=new KO(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Ag(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kD(t)}return!1}}class ZO{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=Wb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ce.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=nh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function oI(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield UR(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),XT.apply(this,arguments)}function JT(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nS(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>kT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>kT(e.remoteStore,a)),n._onlineComponents=e}),eS.apply(this,arguments)}function tS(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function nS(n){return rS.apply(this,arguments)}function rS(){return rS=(0,Ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!tS(t))throw t;Hs("Error using user provided cache. Falling back to memory cache: "+t),yield oI(n,new qf)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield oI(n,new qf);return n._offlineComponents}),rS.apply(this,arguments)}function aI(n){return iS.apply(this,arguments)}function iS(){return iS=(0,Ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield JT(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield JT(n,new sl))),n._onlineComponents}),iS.apply(this,arguments)}function _x(n){return nS(n).then(e=>e.persistence)}function mv(n){return nS(n).then(e=>e.localStore)}function yx(n){return aI(n).then(e=>e.remoteStore)}function s(n){return aI(n).then(e=>e.syncEngine)}function u(n){return c.apply(this,arguments)}function c(){return c=(0,Ce.Z)(function*(n){const e=yield aI(n),t=e.eventManager;return t.onListen=ox.bind(null,e.syncEngine),t.onUnlisten=GT.bind(null,e.syncEngine),t}),c.apply(this,arguments)}function E(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,h,m){const v=new gv({next:S=>{a.enqueueAndForget(()=>UT(i,D));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?m.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new jT(Mf(l.path),v,{includeMetadataChanges:!0,Ku:!0});return B0(i,D)}(yield u(n),n.asyncQueue,e,t,r)})),r.promise}function A(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,h,m){const v=new gv({next:S=>{a.enqueueAndForget(()=>UT(i,D)),S.fromCache&&"server"===h.source?m.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new jT(l,v,{includeMetadataChanges:!0,Ku:!0});return B0(i,D)}(yield u(n),n.asyncQueue,e,t,r)})),r.promise}function Te(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Ue=new Map;function tt(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vt(n,e,t,r){if(!0===e&&!0===r)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Me(n){if(!Xe.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $t(n){if(Xe.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rn(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function dt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rn(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qi(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vm{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vt("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Te(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jM;switch(t.type){case"firstParty":return new HM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ue.get(e);t&&(Be("ComponentProvider","Removing Datastore"),Ue.delete(e),t.terminate())}(this),Promise.resolve()}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class Ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class hc extends Ss{constructor(e,t,r){super(e,t,Mf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Xe(e))}withConverter(e){return new hc(this.firestore,e,this._path)}}function YO(n,e,...t){if(n=(0,U.m9)(n),tt("collection","path",e),n instanceof wm){const r=_n.fromString(e,...t);return $t(r),new hc(n,null,r)}{if(!(n instanceof vr||n instanceof hc))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return $t(r),new hc(n.firestore,null,r)}}function oS(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=Wb.A()),tt("doc","path",e),n instanceof wm){const r=_n.fromString(e,...t);return Me(r),new vr(n,null,new Xe(r))}{if(!(n instanceof vr||n instanceof hc))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return Me(r),new vr(n.firestore,n instanceof hc?n.converter:null,new Xe(r))}}function QO(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof vr||n instanceof hc)&&(e instanceof vr||e instanceof hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vx(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof Ss&&e instanceof Ss&&n.firestore===e.firestore&&Fg(n._query,e._query)&&n.converter===e.converter}class OU{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Qy(this,"async_queue_retry"),this.Xc=()=>{const t=R0();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=R0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=R0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ci;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!zu(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Lr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=U0.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function wx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kU{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wr extends wm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XO(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||XO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XO(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TE(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Te(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new ZO(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function JO(n,e,t){const r=new ci;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield oI(n,t),yield JT(n,e),r.resolve()}catch(i){const a=i;if(!tS(a))throw a;Hs("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function ek(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(Zr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Em{constructor(e){this._methodName=e}}class aS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const WU=/^__.*__$/;class qU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new sc(e,this.data,t,this.fieldTransforms)}}class tk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class uS{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new uS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return dS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(nk(this.ca)&&WU.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class KU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yy(e)}ya(e,t,r,i=!1){return new uS({ca:e,methodName:t,ga:r,path:mr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Im(n){const e=n._freezeSettings(),t=Yy(n._databaseId);return new KU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lS(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);bx("Data must be an object, but it was:",l,r);const h=sk(r,l);let m,v;if(a.merge)m=new Gs(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=cI(e,S,t);if(!l.contains(N))throw new Pe(fe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);ak(D,N)||D.push(N)}m=new Gs(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new qU(new Wi(h),m,v)}class lI extends Em{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lI}}function rk(n,e,t){return new uS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ex extends Em{_toFieldTransform(e){return new Nf(e.path,new Gd)}isEqual(e){return e instanceof Ex}}class ZU extends Em{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rk(this,e,!0),r=this.pa.map(a=>Cm(a,t)),i=new Ca(r);return new Nf(e.path,i)}isEqual(e){return this===e}}class YU extends Em{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rk(this,e,!0),r=this.pa.map(a=>Cm(a,t)),i=new zd(r);return new Nf(e.path,i)}isEqual(e){return this===e}}class QU extends Em{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xf(e.serializer,cR(e.serializer,this.Ia));return new Nf(e.path,t)}isEqual(e){return this===e}}function Ix(n,e,t,r){const i=n.ya(1,e,t);bx("Data must be an object, but it was:",i,r);const a=[],l=Wi.empty();ec(r,(m,v)=>{const D=cS(e,m,t);v=(0,U.m9)(v);const S=i.da(D);if(v instanceof lI)a.push(D);else{const N=Cm(v,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new Gs(a);return new tk(l,h,i.fieldTransforms)}function Cx(n,e,t,r,i,a){const l=n.ya(1,e,t),h=[cI(e,r,t)],m=[i];if(a.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(cI(e,a[N])),m.push(a[N+1]);const v=[],D=Wi.empty();for(let N=h.length-1;N>=0;--N)if(!ak(v,h[N])){const $=h[N];let Z=m[N];Z=(0,U.m9)(Z);const se=l.da($);if(Z instanceof lI)v.push($);else{const ce=Cm(Z,se);null!=ce&&(v.push($),D.set($,ce))}}const S=new Gs(v);return new tk(D,S,l.fieldTransforms)}function ik(n,e,t,r=!1){return Cm(t,n.ya(r?4:3,e))}function Cm(n,e){if(ok(n=(0,U.m9)(n)))return bx("Unsupported field value:",e,n),sk(n,e);if(n instanceof Em)return function(t,r){if(!nk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Cm(l,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cR(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Wn.fromDate(t);return{timestampValue:Wg(r.serializer,i)}}if(t instanceof Wn){const i=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wg(r.serializer,i)}}if(t instanceof aS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fc)return{bytesValue:Oy(r.serializer,t._byteString)};if(t instanceof vr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ky(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${rn(t)}`)}(n,e)}function sk(n,e){const t={};return oD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ec(n,(r,i)=>{const a=Cm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ok(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wn||n instanceof aS||n instanceof fc||n instanceof vr||n instanceof Em)}function bx(n,e,t){if(!ok(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rn(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function cI(n,e,t){if((e=(0,U.m9)(e))instanceof oh)return e._internalPath;if("string"==typeof e)return cS(n,e);throw dS("Field path arguments must be of type string or ",n,!1,void 0,t)}const XU=new RegExp("[~\\*/\\[\\]]");function cS(n,e,t){if(e.search(XU)>=0)throw dS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw dS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dS(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Pe(fe.INVALID_ARGUMENT,h+n+m)}function ak(n,e){return n.some(t=>t.isEqual(e))}class dI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JU extends dI{data(){return super.data()}}function hS(n,e){return"string"==typeof e?cS(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}function uk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dx{}class hI extends Dx{}function Kf(n,e,...t){let r=[];e instanceof Dx&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof _v).length,l=i.filter(h=>h instanceof fI).length;if(a>1||a>0&&l>0)throw new Pe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fI extends hI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fI(e,t,r)}_apply(e){const t=this._parse(e);return hk(e._query,t),new Ss(e.firestore,e.converter,UE(e._query,t))}_parse(e){const t=Im(e.firestore);return function(i,a,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){dk(D,v);const N=[];for(const $ of D)N.push(ck(h,i,$));S={arrayValue:{values:N}}}else S=ck(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||dk(D,v),S=ik(l,"where",D,"in"===v||"not-in"===v);return ln.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class _v extends Dx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _v(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)hk(a,h),a=UE(a,h)}(e._query,t),new Ss(e.firestore,e.converter,UE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tx extends hI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tx(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Vd(i,a);return function(h,m){if(null===by(h)){const v=kg(h);null!==v&&fk(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new ru(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fS extends hI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fS(e,t,r)}_apply(e){return new Ss(e.firestore,e.converter,rc(e._query,this._limit,this._limitType))}}class pS extends hI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pS(e,t,r)}_apply(e){const t=lk(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(i=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class gS extends hI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gS(e,t,r)}_apply(e){const t=lk(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(i=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function lk(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof dI)return function(i,a,l,h,m){if(!h)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of $d(i))if(D.field.isKeyField())v.push(Ld(a,h.key));else{const S=h.data.field(D.field);if(Mg(S))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new nc(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Im(n.firestore);return function(a,l,h,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let $=0;$<v.length;$++){const Z=v[$];if(S[$].field.isKeyField()){if("string"!=typeof Z)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Z}`);if(!Dy(a)&&-1!==Z.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Z}' contains a slash.`);const se=a.path.child(_n.fromString(Z));if(!Xe.isDocumentKey(se))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const ce=new Xe(se);N.push(Ld(l,ce))}else{const se=ik(h,m,Z);N.push(se)}}return new nc(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ck(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dy(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!Xe.isDocumentKey(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ld(n,new Xe(r))}if(t instanceof vr)return Ld(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rn(t)}.`)}function dk(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hk(n,e){if(e.isInequality()){const r=kg(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=by(n);null!==a&&fk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function fk(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Sx{convertValue(e,t="none"){switch(qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ec(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new aS(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rg(e));default:return null}}convertTimestamp(e){const t=tc(e);return new Wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);bt(qD(r));const i=new nu(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||Lr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function mS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u2 extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class bm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends dI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pI extends ah{data(e={}){return super.data(e)}}class Zf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pI(this._firestore,this._userDataWriter,r.key,r,new bm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new pI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new pI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:c2(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function gk(n,e){return n instanceof ah&&e instanceof ah?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zf&&e instanceof Zf&&n._firestore===e._firestore&&vx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yf extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function mk(n,e,t){n=dt(n,vr);const r=dt(n.firestore,wr),i=mS(n.converter,e,t);return yv(r,[lS(Im(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Bn.none())])}function _k(n,e,t,...r){n=dt(n,vr);const i=dt(n.firestore,wr),a=Im(i);let l;return l="string"==typeof(e=(0,U.m9)(e))||e instanceof oh?Cx(a,"updateDoc",n._key,e,t,r):Ix(a,"updateDoc",n._key,e),yv(i,[l.toMutation(n._key,Bn.exists(!0))])}function yk(n,...e){var t,r,i;n=(0,U.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||wx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(wx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof vr)v=dt(n.firestore,wr),D=Mf(n._key.path),m={next:S=>{e[l]&&e[l](Ax(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=dt(n,Ss);v=dt(S.firestore,wr),D=S._query;const N=new Yf(v);m={next:$=>{e[l]&&e[l](new Zf(v,N,S,$))},error:e[l+1],complete:e[l+2]},uk(n._query)}return function(S,N,$,Z){const se=new gv(Z),ce=new jT(N,se,$);return S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return B0(yield u(S),ce)})),()=>{se.Dc(),S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return UT(yield u(S),ce)}))}}(pi(v),D,h,m)}function yv(n,e){return function(t,r){const i=new ci;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function zT(n,e,t){return mm.apply(this,arguments)}(yield s(t),r,i)})),i.promise}(pi(n),e)}function Ax(n,e,t){const r=t.docs.get(e._key),i=new Yf(n);return new ah(n,i,e._key,r,new bm(t.hasPendingWrites,t.fromCache),e.converter)}const A2={maxAttempts:5};class vk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Im(e)}set(e,t,r){this._verifyNotCommitted();const i=Qf(e,this._firestore),a=mS(i.converter,t,r),l=lS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Bn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Qf(e,this._firestore);let l;return l="string"==typeof(t=(0,U.m9)(t))||t instanceof oh?Cx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Ix(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qf(e,this._firestore);return this._mutations=this._mutations.concat(new Pf(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qf(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class M2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Im(e)}get(e){const t=Qf(e,this._firestore),r=new u2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new dI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new dI(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Qf(e,this._firestore),a=mS(i.converter,t,r),l=lS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Qf(e,this._firestore);let l;return l="string"==typeof(t=(0,U.m9)(t))||t instanceof oh?Cx(this._dataReader,"Transaction.update",a._key,t,r,i):Ix(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Qf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qf(e,this._firestore),r=new Yf(this._firestore);return super.get(e).then(i=>new ah(this._firestore,r,t._key,i._document,new bm(!1,!1),t.converter))}}function Mx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ek(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function Ik(){if(!function lD(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xl=$i.SDK_VERSION,(0,$i._registerComponent)(new oo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new wr(new mE(t.getProvider("auth-internal")),new fy(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(jb,"3.13.0",n),(0,$i.registerVersion)(jb,"3.13.0","esm2017")}();class gI{constructor(e){this._delegate=e}static fromBase64String(e){return Ik(),new gI(fc.fromBase64String(e))}static fromUint8Array(e){return Ek(),new gI(fc.fromUint8Array(e))}toBase64(){return Ik(),this._delegate.toBase64()}toUint8Array(){return Ek(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rx(n){return function V2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class U2{enableIndexedDbPersistence(e,t){return function LU(n,e){ek(n=dt(n,wr));const t=pi(n);if(t._uninitializedComponentsProvider)throw new Pe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new sl;return JO(t,i,new YT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VU(n){ek(n=dt(n,wr));const e=pi(n);if(e._uninitializedComponentsProvider)throw new Pe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new sl;return JO(e,r,new QT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UU(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Ho.D())return Promise.resolve();const i=r+"main";yield Ho.delete(i)}),function(r){return t.apply(this,arguments)})(E0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ck{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sS(n,e,t,r={}){var i;const a=(n=dt(n,wm))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=bi.MOCK_USER;else{h=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new bi(v)}n._authCredentials=new $b(new Hb(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function jU(n){return function d(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield _x(n),t=yield yx(n);return e.setNetworkEnabled(!0),function(r){const i=it(r);return i.vu.delete(0),Ts(i)}(t)}))}(pi(n=dt(n,wr)))}(this._delegate)}disableNetwork(){return function HU(n){return function p(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield _x(n),t=yield yx(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=it(i);a.vu.add(0),yield Gf(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(pi(n=dt(n,wr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vt("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BU(n){return function(e){const t=new ci;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function ax(n,e){return q0.apply(this,arguments)}(yield s(e),t)})),t.promise}(pi(n=dt(n,wr)))}(this._delegate)}onSnapshotsInSync(e){return function v2(n,e){return function x(n,e){const t=new gv(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield u(n),i=t,it(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield u(n),i=t,void it(r).ku.delete(i);var r,i}))}}(pi(n=dt(n,wr)),wx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vv(this,YO(this._delegate,e))}catch(t){throw fo(t,"collection()","Firestore.collection()")}}doc(e){try{return new au(this,oS(this._delegate,e))}catch(t){throw fo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new po(this,function PU(n,e){if(n=dt(n,wm),tt("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ss(n,null,(t=e,new ru(_n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function R2(n,e,t){n=dt(n,wr);const r=Object.assign(Object.assign({},A2),t);return function(i){if(i.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new ci;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const m=yield function o(n){return aI(n).then(e=>e.datastore)}(i);new mx(i.asyncQueue,m,l,a,h).run()})),h.promise}(pi(n),i=>e(new M2(n,i)),r)}(this._delegate,t=>e(new bk(this,t)))}batch(){return pi(this._delegate),new Dk(new vk(this._delegate,e=>yv(this._delegate,e)))}loadBundle(e){return function $U(n,e){const t=pi(n=dt(n,wr)),r=new kU;return function j(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?ZE().encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return gx(m,v);if(m instanceof ArrayBuffer)return gx(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new qO(m,l);var m}(t,Yy(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function px(n,e,t){const r=it(n);var i;(i=(0,Ce.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(N,$){const Z=it(N),se=Vr($.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",ce=>Z.qs.getBundleMetadata(ce,$.id)).then(ce=>!!ce&&ce.createTime.compareTo(se)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(HT(m));const v=new rx(m,a.localStore,l.serializer);let D=yield l.bc();for(;D;){const N=yield v.zu(D);N&&h._updateProgress(N),D=yield l.bc()}const S=yield v.complete();return yield ou(a,S.Ju,void 0),yield function(N,$){const Z=it(N);return Z.persistence.runTransaction("Save bundle","readwrite",se=>Z.qs.saveBundleMetadata(se,$))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return Hs("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield s(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GU(n,e){return function Y(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=it(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield mv(n),e)}))}(pi(n=dt(n,wr)),e).then(t=>t?new Ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new po(this,t):null)}}class _S extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new gI(new fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return au.forKey(t,this.firestore,null)}}class bk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}get(e){const t=Tm(e);return this._delegate.get(t).then(r=>new mI(this._firestore,new ah(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tm(e);return r?(Mx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}}class Dk{constructor(e){this._delegate=e}set(e,t,r){const i=Tm(e);return r?(Mx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _I(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Dm(e,new _S(e),t),i.set(t,a)),a}}Dm.INSTANCES=new WeakMap;class au{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new au(t,new vr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new au(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vv(this.firestore,YO(this._delegate,e))}catch(t){throw fo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof vr&&QO(this._delegate,e)}set(e,t){t=Mx("DocumentReference.set",t);try{return t?mk(this._delegate,e,t):mk(this._delegate,e)}catch(r){throw fo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_k(this._delegate,e):_k(this._delegate,e,t,...r)}catch(i){throw fo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _2(n){return yv(dt(n.firestore,wr),[new Pf(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=Tk(e),r=Sk(e,i=>new mI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function h2(n){n=dt(n,vr);const e=dt(n.firestore,wr),t=pi(e),r=new Yf(e);return function y(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const h=yield function(m,v){const D=it(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=nh(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield mv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ah(e,r,n._key,i,new bm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function f2(n){n=dt(n,vr);const e=dt(n.firestore,wr);return E(pi(e),n._key,{source:"server"}).then(t=>Ax(e,n,t))}(this._delegate):function d2(n){n=dt(n,vr);const e=dt(n.firestore,wr);return E(pi(e),n._key).then(t=>Ax(e,n,t))}(this._delegate),t.then(r=>new mI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new au(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function fo(n,e,t){return n.message=n.message.replace(e,t),n}function Tk(n){for(const e of n)if("object"==typeof e&&!Rx(e))return e;return{}}function Sk(n,e){var t,r;let i;return i=Rx(n[0])?n[0]:Rx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new au(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gk(this._delegate,e._delegate)}}class _I extends mI{data(e){const t=this._delegate.data(e);return function BM(n,e){n||ct()}(void 0!==t),t}}class po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}where(e,t,r){try{return new po(this.firestore,Kf(this._delegate,function e2(n,e,t){const r=e,i=hS("where",n);return fI._create(i,r,t)}(e,t,r)))}catch(i){throw fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new po(this.firestore,Kf(this._delegate,function t2(n,e="asc"){const t=e,r=hS("orderBy",n);return Tx._create(r,t)}(e,t)))}catch(r){throw fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new po(this.firestore,Kf(this._delegate,function n2(n){return qi("limit",n),fS._create("limit",n,"F")}(e)))}catch(t){throw fo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new po(this.firestore,Kf(this._delegate,function r2(n){return qi("limitToLast",n),fS._create("limitToLast",n,"L")}(e)))}catch(t){throw fo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new po(this.firestore,Kf(this._delegate,function i2(...n){return pS._create("startAt",n,!0)}(...e)))}catch(t){throw fo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new po(this.firestore,Kf(this._delegate,function s2(...n){return pS._create("startAfter",n,!1)}(...e)))}catch(t){throw fo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new po(this.firestore,Kf(this._delegate,function o2(...n){return gS._create("endBefore",n,!1)}(...e)))}catch(t){throw fo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new po(this.firestore,Kf(this._delegate,function a2(...n){return gS._create("endAt",n,!0)}(...e)))}catch(t){throw fo(t,"endAt()","Query.endAt()")}}isEqual(e){return vx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function g2(n){n=dt(n,Ss);const e=dt(n.firestore,wr),t=pi(e),r=new Yf(e);return function b(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const h=yield Wy(i,a,!0),m=new sx(a,h.ir),v=m.sc(h.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const m=nh(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield mv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate):"server"===e?.source?function m2(n){n=dt(n,Ss);const e=dt(n.firestore,wr),t=pi(e),r=new Yf(e);return A(t,n._query,{source:"server"}).then(i=>new Zf(e,r,n,i))}(this._delegate):function p2(n){n=dt(n,Ss);const e=dt(n.firestore,wr),t=pi(e),r=new Yf(e);return uk(n._query),A(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate),t.then(r=>new xx(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Tk(e),r=Sk(e,i=>new xx(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yk(this._delegate,t,r)}withConverter(e){return new po(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}class j2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _I(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _I(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new j2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _I(this._firestore,r))})}isEqual(e){return gk(this._delegate,e._delegate)}}class vv extends po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new au(this.firestore,e):null}doc(e){try{return new au(this.firestore,void 0===e?oS(this._delegate):oS(this._delegate,e))}catch(t){throw fo(t,"doc()","CollectionReference.doc()")}}add(e){return function y2(n,e){const t=dt(n.firestore,wr),r=oS(n),i=mS(n.converter,e);return yv(t,[lS(Im(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new au(this.firestore,t))}isEqual(e){return QO(this._delegate,e._delegate)}withConverter(e){return new vv(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function Tm(n){return dt(n,vr)}class Nx{constructor(...e){this._delegate=new oh(...e)}static documentId(){return new Nx(mr.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof oh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function N2(){return new Ex("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sm(e)}static delete(){const e=function x2(){return new lI("deleteField")}();return e._methodName="FieldValue.delete",new Sm(e)}static arrayUnion(...e){const t=function P2(...n){return new ZU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sm(t)}static arrayRemove(...e){const t=function O2(...n){return new YU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sm(t)}static increment(e){const t=function k2(n){return new QU("increment",n)}(e);return t._methodName="FieldValue.increment",new Sm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const H2={Firestore:Ck,GeoPoint:aS,Timestamp:Wn,Blob:gI,Transaction:bk,WriteBatch:Dk,DocumentReference:au,DocumentSnapshot:mI,Query:po,QueryDocumentSnapshot:_I,QuerySnapshot:xx,CollectionReference:vv,FieldPath:Nx,FieldValue:Sm,setLogLevel:function B2(n){!function AO(n){ma.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function G2(n){(function $2(n,e){n.INTERNAL.registerComponent(new oo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},H2)))})(n,(e,t)=>new Ck(e,t,new U2)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(yw.Z);var Px=L(3019),yS=L(3093),z2=L(4552);class W2 extends Oo.x{constructor(e=1/0,t=1/0,r=z2.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var Ak=L(3020);function Mk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Ak.B)({connector:()=>new W2(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Rk(n,e){return(0,Ro.m)(e)?(0,Gn.w)(()=>n,e):(0,Gn.w)(()=>n)}var Ox=L(5137);L(3182);const Fx=new Map,Nk={activated:!1,tokenObservers:[]},Q2={initialized:!1,enabled:!1};function Qr(n){return Fx.get(n)||Object.assign({},Nk)}function wS(){return Q2}const Lx="https://content-firebaseappcheck.googleapis.com/v1",tB="exchangeDebugToken",Pk={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class rB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function iB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vx(n){if(!Qr(n).activated)throw As.create("use-before-activation",{appName:n.name})}function CS(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw As.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw As.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw As.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}}),Bx.apply(this,arguments)}function Ok(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Lx}/projects/${t}/apps/${r}:${tB}?key=${i}`,body:{debug_token:e}}}const uB="firebase-app-check-database",lB=1,yI="firebase-app-check-store";let bS=null;function jx(){return jx=(0,Ce.Z)(function*(n,e){const r=(yield function Fk(){return bS||(bS=new Promise((n,e)=>{try{const t=indexedDB.open(uB,lB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(As.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yI,{keyPath:"compositeKey"})}}catch(t){e(As.create("storage-open",{originalErrorMessage:t?.message}))}}),bS)}()).transaction(yI,"readwrite"),a=r.objectStore(yI).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(As.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),jx.apply(this,arguments)}const vI=new ys.Yd("@firebase/app-check");function Gx(n,e){return(0,U.hl)()?function dB(n,e){return function Lk(n,e){return jx.apply(this,arguments)}(function Uk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Wx(){return wS().enabled}function qx(){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ce.Z)(function*(){const n=wS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Kx.apply(this,arguments)}const _B={error:"UNKNOWN_ERROR"};function yB(n){return U.US.encodeString(JSON.stringify(n),!1)}function DS(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ce.Z)(function*(n,e=!1){const t=n.app;Vx(t);const r=Qr(t);let a,i=r.token;if(i&&!wv(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(wv(m)?i=m:yield Gx(t,void 0))}if(!e&&i&&wv(i))return{token:i.token};let h,l=!1;if(Wx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CS(Ok(t,yield qx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Gx(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Qr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?vI.warn(m.message):vI.error(m),a=m}return i?a?h=wv(i)?{token:i.token,internalError:a}:$k(a):(h={token:i.token},r.token=i,yield Gx(t,i)):h=$k(a),l&&function Hk(n,e){const t=Qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h}),Zx.apply(this,arguments)}function Yx(){return Yx=(0,Ce.Z)(function*(n){const e=n.app;Vx(e);const{provider:t}=Qr(e);if(Wx()){const r=yield qx(),{token:i}=yield CS(Ok(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),Yx.apply(this,arguments)}function Xx(n,e){const t=Qr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jk(n){const{app:e}=n,t=Qr(e);let r=t.tokenRefresher;r||(r=function vB(n){const{app:e}=n;return new rB((0,Ce.Z)(function*(){let r;if(r=Qr(e).token?yield DS(n,!0):yield DS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Pk.RETRIAL_MIN_WAIT,Pk.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wv(n){return n.expireTimeMillis-Date.now()>0}function $k(n){return{token:yB(_B),error:n}}class wB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qr(this.app);for(const t of e)Xx(this.app,t.next);return Promise.resolve()}}const Qk="app-check-internal";!function OB(){(0,$i._registerComponent)(new oo.wA("app-check",n=>function EB(n,e){return new wB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Qk).initialize()})),(0,$i._registerComponent)(new oo.wA(Qk,n=>function IB(n){return{getToken:e=>DS(n,e),getLimitedUseToken:()=>function Bk(n){return Yx.apply(this,arguments)}(n),addTokenListener:e=>function Qx(n,e,t,r){const{app:i}=n,a=Qr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&wv(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),jk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>jk(n))}(n,"INTERNAL",e),removeTokenListener:e=>Xx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$i.registerVersion)("@firebase/app-check","0.8.0")}();class wI{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var SS=L(7142);const rN=new f.OlP("angularfire2.auth.use-emulator"),iN=new f.OlP("angularfire2.auth.settings"),sN=new f.OlP("angularfire2.auth.tenant-id"),oN=new f.OlP("angularfire2.auth.langugage-code"),aN=new f.OlP("angularfire2.auth.use-device-language"),uN=new f.OlP("angularfire.auth.persistence"),lN=(n,e,t,r,i,a,l,h)=>(0,Ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Ev=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,$){const Z=new Oo.x,se=(0,gt.of)(void 0).pipe((0,yS.Q)(l.outsideAngular),(0,Gn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,6365)))),(0,St.U)(()=>(0,Ei.on)(t,a,r)),(0,St.U)(ce=>lN(ce,a,h,v,D,S,m,N)),Mk({bufferSize:1,refCount:!1}));if(ls(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,gt.of)(null);else{se.pipe(Bs()).subscribe();const We=se.pipe((0,Gn.w)(at=>at.getRedirectResult().then(Ot=>Ot,()=>null)),Cn.iC,Mk({bufferSize:1,refCount:!1})),ot=se.pipe((0,Gn.w)(at=>new si.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>at.onAuthStateChanged(Zt=>Ot.next(Zt),Zt=>Ot.error(Zt),()=>Ot.complete()))})))),He=se.pipe((0,Gn.w)(at=>new si.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>at.onIdTokenChanged(Zt=>Ot.next(Zt),Zt=>Ot.error(Zt),()=>Ot.complete()))}))));this.authState=We.pipe(Rk(ot),(0,Ox.R)(l.outsideAngular),(0,yS.Q)(l.insideAngular)),this.user=We.pipe(Rk(He),(0,Ox.R)(l.outsideAngular),(0,yS.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Gn.w)(at=>at?(0,un.D)(at.getIdToken()):(0,gt.of)(null))),this.idTokenResult=this.user.pipe((0,Gn.w)(at=>at?(0,un.D)(at.getIdTokenResult()):(0,gt.of)(null))),this.credential=(0,Px.T)(We,Z,this.authState.pipe(es(at=>!at))).pipe((0,St.U)(at=>at?.user?at:null),(0,Ox.R)(l.outsideAngular),(0,yS.Q)(l.insideAngular))}return(0,Ei.pX)(this,se,a,{spy:{apply:(ce,We,ot)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&ot.then(He=>Z.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei.Dh),f.LFG(Ei.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(rN,8),f.LFG(iN,8),f.LFG(sN,8),f.LFG(oN,8),f.LFG(aN,8),f.LFG(uN,8),f.LFG(wI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BB=(()=>{class n{constructor(){SS.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Ev]}),n})();function Jk(n,e){return function jB(n,e=zC.z){return new si.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cN(n,e){return Jk(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function AS(n,e){return cN(n,e).pipe(Js(void 0),mw(),(0,St.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function e1(n,e,t){return AS(n,t).pipe(ts((r,i)=>function $B(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function GB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,yM.x)(),(0,St.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function dN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function t1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class n1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=AS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Js(void 0),mw(),es(([r,i])=>i.length>0||!r),(0,St.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t1(e);return e1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return cN(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new r1(this.ref.doc(e),this.afs)}}class r1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=o1(r,t);return new n1(i,a,this.afs)}snapshotChanges(){return function HB(n,e){return Jk(n,e).pipe(Js(void 0),mw(),(0,St.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(Cn.iC)}}class zB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),es(t=>t.length>0),Cn.iC):AS(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t1(e);return e1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return cN(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Cn.iC)}}const i1=new f.OlP("angularfire2.enableFirestorePersistence"),s1=new f.OlP("angularfire2.firestore.persistenceSettings"),WB=new f.OlP("angularfire2.firestore.settings"),qB=new f.OlP("angularfire2.firestore.use-emulator");function o1(n,e=(t=>t)){return{query:e(n),ref:n}}let hN=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,$,Z,se,ce,We,ot){this.schedulers=m;const He=(0,Ei.on)(t,h,r),at=D;S&&lN(He,h,N,Z,se,ce,$,We),[this.firestore,this.persistenceEnabled$]=(0,Ei.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const Ot=h.runOutsideAngular(()=>He.firestore());if(a&&Ot.settings(a),at&&Ot.useEmulator(...at),i&&!ls(l)){const Zt=()=>{try{return(0,un.D)(Ot.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Ri){return typeof console<"u"&&console.warn(Ri),(0,gt.of)(!1)}};return[Ot,h.runOutsideAngular(Zt)]}return[Ot,(0,gt.of)(!1)]},[a,at,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=o1(i,r),h=this.schedulers.ngZone.run(()=>a);return new n1(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new zB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new r1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei.Dh),f.LFG(Ei.xv,8),f.LFG(i1,8),f.LFG(WB,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(s1,8),f.LFG(qB,8),f.LFG(Ev,8),f.LFG(rN,8),f.LFG(iN,8),f.LFG(sN,8),f.LFG(oN,8),f.LFG(aN,8),f.LFG(uN,8),f.LFG(wI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KB=(()=>{class n{constructor(){SS.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:i1,useValue:!0},{provide:s1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[hN]}),n})(),Iv=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){var t=this;return(0,Ce.Z)(function*(){return t.afAuth.signOut().then(()=>{localStorage.removeItem("user"),t.router.navigate(["/sign-in"])})})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hN),f.LFG(Ev),f.LFG(Hi),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Iv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:17,vars:0,consts:[[1,"container"],[1,"image-container"],["src","assets/AH.png",1,"imgClass"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"img",2),f.qZA(),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5),f._UZ(6,"br"),f.TgZ(7,"h3"),f._uU(8,"Sign In"),f.qZA(),f.TgZ(9,"div",6),f._UZ(10,"input",7,8),f.qZA(),f.TgZ(12,"div",6),f._UZ(13,"input",9,10),f.qZA(),f.TgZ(15,"div",6)(16,"input",11),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(11),h=f.MAs(14);return f.KtG(r.authService.SignIn(l.value,h.value))}),f.qZA()()()()()()}},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.image-container[_ngcontent-%COMP%]{position:absolute;top:30px;left:50%;transform:translate(-50%)}.imgClass[_ngcontent-%COMP%]{max-width:400px;height:auto}.displayTable[_ngcontent-%COMP%]{display:table;width:100%;height:100vh}.displayTableCell[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;text-align:center}.authBlock[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f2f2f2;border-radius:4px;box-shadow:0 0 5px #0000004d}h3[_ngcontent-%COMP%]{margin-top:0}.formGroup[_ngcontent-%COMP%]{margin-bottom:20px}.formControl[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:16px;border:1px solid #ccc;border-radius:4px}.btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.btnPrimary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btnPrimary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.or[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px;color:#aaa}.orInner[_ngcontent-%COMP%]{padding:0 10px}.forgotPassword[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:14px;color:#007bff;cursor:pointer;transition:color .3s ease}.forgotPassword[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#0056b3}.redirectToLogin[_ngcontent-%COMP%]{margin-top:20px;font-size:14px;color:#888}.redirect[_ngcontent-%COMP%]{margin-left:5px;color:#007bff;cursor:pointer;transition:color .3s ease}.redirect[_ngcontent-%COMP%]:hover{color:#0056b3}"]}),n})(),YB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Iv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:19,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["src","./A & H.png"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._UZ(3,"img",3)(4,"br"),f.TgZ(5,"h3"),f._uU(6,"Sign Ajeeth Up"),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4),f._UZ(11,"input",7,8),f.qZA(),f.TgZ(13,"div",4)(14,"input",9),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(9),h=f.MAs(12);return f.KtG(r.authService.SignUp(l.value,h.value))}),f.qZA()(),f.TgZ(15,"div",4)(16,"span",10)(17,"span",11),f._uU(18,"Or"),f.qZA()()()()()()}}}),n})();var QB=L(6878);let XB=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(i=>{localStorage.setItem("token","true"),this.router.navigate(1==i.user?.emailVerified?["dashboard"]:["/varify-email"])},i=>{alert(i.message),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(i=>{alert("Registration Successful"),this.sendEmailForVarification(i.user),this.router.navigate(["/login"])},i=>{alert(i.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/varify-email"])},r=>{alert("Something went wrong")})}sendEmailForVarification(t){console.log(t),t.sendEmailVerification().then(r=>{this.router.navigate(["/varify-email"])},r=>{alert("Something went wrong. Not able to send mail to your email.")})}googleSignIn(){return this.fireauth.signInWithPopup(new QB.V).then(t=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(t.user?.uid))},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ev),f.LFG(Hi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a1="firebasestorage.googleapis.com",u1="storageBucket";class Ur extends U.ZR{constructor(e,t,r=0){super(fN(e),`Firebase Storage: ${t} (${fN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Vt=(()=>((Vt=Vt||{}).UNKNOWN="unknown",Vt.OBJECT_NOT_FOUND="object-not-found",Vt.BUCKET_NOT_FOUND="bucket-not-found",Vt.PROJECT_NOT_FOUND="project-not-found",Vt.QUOTA_EXCEEDED="quota-exceeded",Vt.UNAUTHENTICATED="unauthenticated",Vt.UNAUTHORIZED="unauthorized",Vt.UNAUTHORIZED_APP="unauthorized-app",Vt.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Vt.INVALID_CHECKSUM="invalid-checksum",Vt.CANCELED="canceled",Vt.INVALID_EVENT_NAME="invalid-event-name",Vt.INVALID_URL="invalid-url",Vt.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Vt.NO_DEFAULT_BUCKET="no-default-bucket",Vt.CANNOT_SLICE_BLOB="cannot-slice-blob",Vt.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Vt.NO_DOWNLOAD_URL="no-download-url",Vt.INVALID_ARGUMENT="invalid-argument",Vt.INVALID_ARGUMENT_COUNT="invalid-argument-count",Vt.APP_DELETED="app-deleted",Vt.INVALID_ROOT_OPERATION="invalid-root-operation",Vt.INVALID_FORMAT="invalid-format",Vt.INTERNAL_ERROR="internal-error",Vt.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Vt))();function fN(n){return"storage/"+n}function pN(){return new Ur(Vt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function l1(){return new Ur(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c1(){return new Ur(Vt.CANCELED,"User canceled the upload/download.")}function d1(){return new Ur(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Cv(n){return new Ur(Vt.INVALID_ARGUMENT,n)}function h1(){return new Ur(Vt.APP_DELETED,"The Firebase app was deleted.")}function f1(n){return new Ur(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function EI(n,e){return new Ur(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function II(n){throw new Ur(Vt.INTERNAL_ERROR,"Internal error: "+n)}class zs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zs.makeFromUrl(e,t)}catch{return new zs(e,"")}if(""===r.path)return r;throw function lj(n){return new Ur(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(at){at.path_=decodeURIComponent(at.path)}const S=t.replace(/[.]/g,"\\."),He=[{regex:h,indices:{bucket:1,path:3},postModify:function a(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===a1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let at=0;at<He.length;at++){const Ot=He[at],Zt=Ot.regex.exec(e);if(Zt){let Ma=Zt[Ot.indices.path];Ma||(Ma=""),r=new zs(Zt[Ot.indices.bucket],Ma),Ot.postModify(r);break}}if(null==r)throw function uj(n){return new Ur(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class pj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MS(n){return"string"==typeof n||n instanceof String}function p1(n){return gN()&&n instanceof Blob}function gN(){return typeof Blob<"u"&&!(0,U.UG)()}function mN(n,e,t,r){if(r<e)throw Cv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cv(`Invalid value for '${n}'. Expected ${t} or less.`)}function uh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function g1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Go=(()=>((Go=Go||{})[Go.NO_ERROR=0]="NO_ERROR",Go[Go.NETWORK_ERROR=1]="NETWORK_ERROR",Go[Go.ABORT=2]="ABORT",Go))();function m1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class wj{constructor(e,t,r,i,a,l,h,m,v,D,S,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,Z)=>{this.resolve_=$,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function _j(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=pN();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?h1():c1():l1())};this.canceled_?t(0,new RS(!1,null,!0)):this.backoffId_=function gj(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...ce){v||(v=!0,e.apply(null,ce))}function S(ce){i=setTimeout(()=>{i=null,n($,m())},ce)}function N(){a&&clearTimeout(a)}function $(ce,...We){if(v)return void N();if(ce)return N(),void D.call(null,ce,...We);if(m()||l)return N(),void D.call(null,ce,...We);let He;r<64&&(r*=2),1===h?(h=2,He=0):He=1e3*(r+Math.random()),S(He)}let Z=!1;function se(ce){Z||(Z=!0,N(),!v&&(null!==i?(ce||(h=2),clearTimeout(i),S(0)):ce||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new RS(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Go.NO_ERROR,m=a.getStatus();if(!h||m1(m,this.additionalRetryCodes_)&&this.retry){const D=a.getErrorCode()===Go.ABORT;return void r(!1,new RS(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new RS(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class RS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Sj(...n){const e=function Tj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(gN())return new Blob(n);throw new Ur(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _N{constructor(e,t){this.data=e,this.contentType=t||null}}function yN(n,e){switch(n){case Ta.RAW:return new _N(_1(e));case Ta.BASE64:case Ta.BASE64URL:return new _N(y1(n,e));case Ta.DATA_URL:return new _N(function xj(n){const e=new v1(n);return e.base64?y1(Ta.BASE64,e.rest):function Rj(n){let e;try{e=decodeURIComponent(n)}catch{throw EI(Ta.DATA_URL,"Malformed data URL.")}return _1(e)}(e.rest)}(e),function Nj(n){return new v1(n).contentType}(e))}throw pN()}function _1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function y1(n,e){switch(n){case Ta.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw EI(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ta.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw EI(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Mj(n){if(typeof atob>"u")throw function fj(n){return new Ur(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:EI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class v1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw EI(Ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Pj(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class pc{constructor(e,t){let r=0,i="";p1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(p1(this.data_)){const i=function Aj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new pc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new pc(r,!0)}}static getBlob(...e){if(gN()){const t=e.map(r=>r instanceof pc?r.data_:r);return new pc(Sj.apply(null,t))}{const t=e.map(l=>MS(l)?yN(Ta.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new pc(i,!0)}}uploadData(){return this.data_}}function vN(n){let e;try{e=JSON.parse(n)}catch{return null}return function vj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function w1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Fj(n,e){return e}class go{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Fj}}let xS=null;function CI(){if(xS)return xS;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const t=new go("name");t.xform=function e(a,l){return function Lj(n){return!MS(n)||n.length<2?n:w1(n)}(l)},n.push(t);const i=new go("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),xS=n,xS}function E1(n,e,t){const r=vN(e);return null===r?null:function Uj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Vj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new zs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function wN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const I1="prefixes",C1="items";class gc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mc(n){if(!n)throw pN()}function NS(n,e){return function t(r,i){const a=E1(n,i,e);return mc(null!==a),a}}function bv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oj(){return new Ur(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sj(){return new Ur(Vt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ij(n){return new Ur(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aj(n){return new Ur(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function bI(n){const e=bv(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function rj(n){return new Ur(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function b1(n,e,t){const i=uh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new gc(i,"GET",NS(n,t),l);return h.errorHandler=bI(e),h}function zj(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=uh(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new gc(h,"GET",function $j(n,e){return function t(r,i){const a=function Hj(n,e,t){const r=vN(t);return null===r?null:function jj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[I1])for(const i of t[I1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new zs(e,a));r.prefixes.push(l)}if(t[C1])for(const i of t[C1]){const a=n._makeStorageReference(new zs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return mc(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=bv(e),D}function T1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Zj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class PS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function EN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{mc(!1)}return mc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Jj={STATE_CHANGED:"state_changed"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function IN(n){switch(n){case"running":case"pausing":case"canceling":return mo.RUNNING;case"paused":return mo.PAUSED;case"success":return mo.SUCCESS;case"canceled":return mo.CANCELED;default:return mo.ERROR}}class eH{constructor(e,t,r){if(function yj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Dv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let M1=null;class tH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Go.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Go.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Go.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw II("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw II("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw II("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw II("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw II("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class nH extends tH{initXhr(){this.xhr_.responseType="text"}}function ol(){return M1?M1():new nH}class R1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=CI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(m1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=l1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Vt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Yj(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=T1(e,r,i),h={name:l.fullPath},m=uh(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=wN(l,t),Z=new gc(m,"POST",function $(se){let ce;EN(se);try{ce=se.getResponseHeader("X-Goog-Upload-URL")}catch{mc(!1)}return mc(MS(ce)),ce},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=D,Z.body=S,Z.errorHandler=bv(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Qj(n,e,t,r){const m=new gc(t,"POST",function a(v){const D=EN(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mc(!1)}S||mc(!1);const N=Number(S);return mc(!isNaN(N)),new PS(N,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=bv(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ol,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new PS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function Xj(n,e,t,r,i,a,l,h){const m=new PS(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function dj(){return new Ur(Vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current;let $="";$=0===D?"finalize":v===D?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":$,"X-Goog-Upload-Offset":`${m.current}`},se=r.slice(S,S+D);if(null===se)throw d1();const He=new gc(t,"POST",function ce(at,Ot){const Zt=EN(at,["active","final"]),Ri=m.current+D,Ma=r.size();let Bv;return Bv="final"===Zt?NS(e,a)(at,Ot):null,new PS(Ri,Ma,"final"===Zt,Bv)},e.maxUploadRetryTime);return He.headers=Z,He.body=se.uploadData(),He.progressCallback=h||null,He.errorHandler=bv(n),He}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,ol,i,a,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=b1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function S1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let He="";for(let at=0;at<2;at++)He+=Math.random().toString().slice(2);return He}();l["Content-Type"]="multipart/related; boundary="+m;const v=T1(e,r,i),D=wN(v,t),$=pc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===$)throw d1();const Z={name:v.fullPath},se=uh(a,n.host,n._protocol),We=n.maxUploadRetryTime,ot=new gc(se,"POST",NS(n,t),We);return ot.urlParams=Z,ot.headers=l,ot.body=$.uploadData(),ot.errorHandler=bv(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=c1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=IN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new eH(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(IN(this._state)){case mo.SUCCESS:Dv(this._resolve.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:Dv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(IN(this._state)){case mo.RUNNING:case mo.PAUSED:e.next&&Dv(e.next.bind(e,this.snapshot))();break;case mo.SUCCESS:e.complete&&Dv(e.complete.bind(e))();break;default:e.error&&Dv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Am{constructor(e,t){this._service=e,this._location=t instanceof zs?t:zs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Am(e,t)}get root(){const e=new zs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w1(this._location.path)}get storage(){return this._service}get parent(){const e=function Oj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zs(this._location.bucket,e);return new Am(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw f1(e)}}function N1(n,e,t){return CN.apply(this,arguments)}function CN(){return CN=(0,Ce.Z)(function*(n,e,t){const i=yield P1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield N1(n,e,i.nextPageToken))}),CN.apply(this,arguments)}function P1(n,e){null!=e&&"number"==typeof e.maxResults&&mN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=zj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ol)}function pH(n){n._throwIfRoot("getDownloadURL");const e=function Wj(n,e,t){const i=uh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new gc(i,"GET",function Gj(n,e){return function t(r,i){const a=E1(n,i,e);return mc(null!==a),function Bj(n,e,t,r){const i=vN(e);if(null===i||!MS(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return uh("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+g1({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=bI(e),h}(n.storage,n._location,CI());return n.storage.makeRequestWithTokens(e,ol).then(t=>{if(null===t)throw function hj(){return new Ur(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function O1(n,e){const t=function kj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zs(n._location.bucket,t);return new Am(n.storage,r)}function k1(n,e){if(n instanceof bN){const t=n;if(null==t._bucket)throw function cj(){return new Ur(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u1+"' property when initializing the app?")}();const r=new Am(t,t._bucket);return null!=e?k1(r,e):r}return void 0!==e?O1(n,e):n}function yH(n,e){if(e&&function mH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof bN)return function _H(n,e){return new Am(n,e)}(n,e);throw Cv("To use ref(service, url), the first argument must be a Storage instance.")}return k1(n,e)}function F1(n,e){const t=e?.[u1];return null==t?null:zs.makeFromBucketSpec(t,n)}class bN{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=a1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zs.makeFromBucketSpec(i,this._host):F1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zs.makeFromBucketSpec(this._url,e):F1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Am(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new pj(h1());{const l=function Dj(n,e,t,r,i,a,l=!0){const h=g1(n.urlParams),m=n.url+h,v=Object.assign({},n.headers);return function Cj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Ej(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Ij(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function bj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new wj(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const L1="@firebase/storage";function B1(n,e){return yH(n=(0,U.m9)(n),e)}function AH(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new bN(t,r,i,e,$i.SDK_VERSION)}!function MH(){(0,$i._registerComponent)(new oo.wA("storage",AH,"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(L1,"0.11.2",""),(0,$i.registerVersion)(L1,"0.11.2","esm2017")}();class OS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class H1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new OS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new OS(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new OS(l,this,this._ref)):{next:t.next?l=>t.next(new OS(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class $1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new lh(e,this._service))}get items(){return this._delegate.items.map(e=>new lh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SH(n,e){return O1(n,e)}(this._delegate,e);return new lh(t,this.storage)}get root(){return new lh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new lh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new H1(function wH(n,e,t){return function lH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new R1(n,new pc(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ta.RAW,r){this._throwIfRoot("putString");const i=yN(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new H1(new R1(this._delegate,new pc(i.data,!0),a),this)}listAll(){return function bH(n){return function dH(n){const e={prefixes:[],items:[]};return N1(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new $1(e,this.storage))}list(e){return function CH(n,e){return P1(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new $1(t,this.storage))}getMetadata(){return function EH(n){return function hH(n){n._throwIfRoot("getMetadata");const e=b1(n.storage,n._location,CI());return n.storage.makeRequestWithTokens(e,ol)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function IH(n,e){return function fH(n,e){n._throwIfRoot("updateMetadata");const t=function qj(n,e,t,r){const a=uh(e.fullServerUrl(),n.host,n._protocol),h=wN(t,r),v=n.maxOperationRetryTime,D=new gc(a,"PATCH",NS(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=bI(e),D}(n.storage,n._location,e,CI());return n.storage.makeRequestWithTokens(t,ol)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function DH(n){return pH(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function TH(n){return function gH(n){n._throwIfRoot("deleteObject");const e=function Kj(n,e){const r=uh(e.fullServerUrl(),n.host,n._protocol),h=new gc(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=bI(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ol)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw f1(e)}}class G1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(z1(e))throw Cv("ref() expected a child path but got a URL, use refFromURL instead.");return new lh(B1(this._delegate,e),this)}refFromURL(e){if(!z1(e))throw Cv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zs.makeFromUrl(e,this._delegate.host)}catch{throw Cv("refFromUrl() expected a valid full URL but got an invalid one.")}return new lh(B1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function j1(n,e,t,r={}){!function vH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function z1(n){return/^[A-Za-z]+:\/\//.test(n)}function PH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new G1(t,r)}function W1(n){const e=function kH(n){return new si.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function JB(n,e=zC.z){return(0,oi.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,zr.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kS(n){return{getDownloadURL:()=>(0,gt.of)(void 0).pipe(Cn.fc,(0,Gn.w)(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>(0,gt.of)(void 0).pipe(Cn.fc,(0,Gn.w)(()=>n.getMetadata()),Cn.iC),delete:()=>(0,un.D)(n.delete()),child:e=>kS(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>W1(n.put(e,t)),putString:(e,t,r)=>W1(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}!function OH(n){const e={TaskState:mo,TaskEvent:Jj,StringFormat:Ta,Storage:G1,Reference:lh};n.INTERNAL.registerComponent(new oo.wA("storage-compat",PH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(yw.Z);const FH=new f.OlP("angularfire2.storageBucket"),LH=new f.OlP("angularfire2.storage.maxUploadRetryTime"),VH=new f.OlP("angularfire2.storage.maxOperationRetryTime"),UH=new f.OlP("angularfire2.storage.use-emulator");let q1=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S){const N=(0,Ei.on)(t,l,r);this.storage=(0,Ei.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const $=l.runOutsideAngular(()=>N.storage(i||void 0)),Z=D;return Z&&$.useEmulator(...Z),m&&$.setMaxUploadRetryTime(m),v&&$.setMaxOperationRetryTime(v),$},[m,v])}ref(t){return kS(this.storage.ref(t))}refFromURL(t){return kS(this.storage.refFromURL(t))}upload(t,r,i){return kS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei.Dh),f.LFG(Ei.xv,8),f.LFG(FH,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(LH,8),f.LFG(VH,8),f.LFG(UH,8),f.LFG(wI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),jH=(()=>{class n{constructor(){SS.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[q1],imports:[BH]}),n})(),HH=(()=>{class n{constructor(t,r){this.afs=t,this.fireStorage=r}addUser(t){return t.id=this.afs.createId(),this.afs.collection("/Users").add(t)}getAllUsers(){return this.afs.collection("/Users").snapshotChanges()}deleteUser(t){this.afs.doc("/Users/"+t.id).delete()}updateUser(t){this.deleteUser(t),this.addUser(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hN),f.LFG(q1))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Mm=(()=>{class n extends K1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const _c=new f.OlP("NgValueAccessor"),zH={provide:_c,useExisting:(0,f.Gpc)(()=>FS),multi:!0},qH=new f.OlP("CompositionEventMode");let FS=(()=>{class n extends K1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WH(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(qH,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([zH]),f.qOj]}),n})();const Ws=new f.OlP("NgValidators"),Jf=new f.OlP("NgAsyncValidators");function sF(n){return null!=n}function oF(n){return(0,f.QGY)(n)?(0,un.D)(n):n}function aF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function uF(n,e){return e.map(t=>t(n))}function lF(n){return n.map(e=>function ZH(n){return!n.validate}(e)?e:t=>e.validate(t))}function DN(n){return null!=n?function cF(n){if(!n)return null;const e=n.filter(sF);return 0==e.length?null:function(t){return aF(uF(t,e))}}(lF(n)):null}function TN(n){return null!=n?function dF(n){if(!n)return null;const e=n.filter(sF);return 0==e.length?null:function(t){return function $H(...n){const e=(0,Li.jO)(n),{args:t,keys:r}=ja(n),i=new si.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,Mu.Xf)(t[D]).subscribe((0,zr.x)(a,N=>{S||(S=!0,v--),h[D]=N},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?ia(r,h):h),a.complete())}))}});return e?i.pipe(Ha(e)):i}(uF(t,e).map(oF)).pipe((0,St.U)(aF))}}(lF(n)):null}function hF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SN(n){return n?Array.isArray(n)?n:[n]:[]}function VS(n,e){return Array.isArray(n)?n.includes(e):n===e}function gF(n,e){const t=SN(e);return SN(n).forEach(i=>{VS(t,i)||t.push(i)}),t}function mF(n,e){return SN(e).filter(t=>!VS(n,t))}class _F{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _o extends _F{get formDirective(){return null}get path(){return null}}class ep extends _F{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vF=(()=>{class n extends yF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ep,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})();const DI="VALID",BS="INVALID",Tv="PENDING",TI="DISABLED";function jS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class CF{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===DI}get invalid(){return this.status===BS}get pending(){return this.status==Tv}get disabled(){return this.status===TI}get enabled(){return this.status!==TI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mF(e,this._rawAsyncValidators))}hasValidator(e){return VS(this._rawValidators,e)}hasAsyncValidator(e){return VS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=TI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=DI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===DI||this.status===Tv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?TI:DI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tv,this._hasOwnPendingAsyncValidator=!0;const t=oF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?TI:this.errors?BS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tv)?Tv:this._anyControlsHaveStatus(BS)?BS:DI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function e$(n){return Array.isArray(n)?DN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function t$(n){return Array.isArray(n)?TN(n):n||null}(this._rawAsyncValidators)}}const Rm=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>SI}),SI="always";function AI(n,e,t=SI){(function PN(n,e){const t=function fF(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(hF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function pF(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(hF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();GS(e._rawValidators,i),GS(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function i$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&bF(n,e)})}(n,e),function o$(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function s$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&bF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function r$(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function SF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function AF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const MF=class extends CF{constructor(e=null,t,r){super(function RN(n){return(jS(n)?n.validators:n)||null}(t),function xN(n,e){return(jS(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=AF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){AF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},p$={provide:ep,useExisting:(0,f.Gpc)(()=>VN)},NF=(()=>Promise.resolve())();let VN=(()=>{class n extends ep{constructor(t,r,i,a,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new MF,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function FN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===FS?t=a:function l$(n){return Object.getPrototypeOf(n.constructor)===Mm}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function kN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){AI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.VuI)(r);NF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function HS(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_o,9),f.Y36(Ws,10),f.Y36(Jf,10),f.Y36(_c,10),f.Y36(f.sBO,8),f.Y36(Rm,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([p$]),f.qOj,f.TTD]}),n})(),OF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const UN=new f.OlP("NgModelWithFormControlWarning");let QF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[OF]}),n})(),B$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rm,useValue:t.callSetDisabledState??SI}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[QF]}),n})(),j$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rm,useValue:t.callSetDisabledState??SI}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[QF]}),n})();function H$(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td")(10,"button",29),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,a=f.oxw();return f.KtG(a.deleteUser(i))}),f._uU(11,"Delete"),f.qZA(),f.TgZ(12,"button",30),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,a=f.oxw();return f.KtG(a.editUser(i))}),f._uU(13,"Edit"),f.qZA()()()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.first_name),f.xp6(2),f.Oqu(t.last_name),f.xp6(2),f.Oqu(t.email),f.xp6(2),f.Oqu(t.mobile)}}function $$(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td")(2,"input",31),f.NdJ("ngModelChange",function(i){f.CHM(t);const a=f.oxw().$implicit;return f.KtG(a.first_name=i)}),f.qZA()(),f.TgZ(3,"td")(4,"input",31),f.NdJ("ngModelChange",function(i){f.CHM(t);const a=f.oxw().$implicit;return f.KtG(a.last_name=i)}),f.qZA()(),f.TgZ(5,"td")(6,"input",32),f.NdJ("ngModelChange",function(i){f.CHM(t);const a=f.oxw().$implicit;return f.KtG(a.email=i)}),f.qZA()(),f.TgZ(7,"td")(8,"input",31),f.NdJ("ngModelChange",function(i){f.CHM(t);const a=f.oxw().$implicit;return f.KtG(a.mobile=i)}),f.qZA()(),f.TgZ(9,"td")(10,"button",29),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,a=f.oxw();return f.KtG(a.deleteUser(i))}),f._uU(11,"Delete"),f.qZA(),f.TgZ(12,"button",33),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,a=f.oxw();return f.KtG(a.saveUser(i))}),f._uU(13,"Save"),f.qZA(),f.TgZ(14,"button",34),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,a=f.oxw();return f.KtG(a.cancelEdit(i))}),f._uU(15,"Cancel"),f.qZA()()()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.Q6J("ngModel",t.first_name),f.xp6(2),f.Q6J("ngModel",t.last_name),f.xp6(2),f.Q6J("ngModel",t.email),f.xp6(2),f.Q6J("ngModel",t.mobile)}}function G$(n,e){if(1&n&&(f.ynx(0),f.YNc(1,H$,14,4,"tr",28),f.YNc(2,$$,16,4,"tr",28),f.BQk()),2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",!t.isEditing),f.xp6(1),f.Q6J("ngIf",t.isEditing)}}let z$=(()=>{class n{constructor(t,r,i){this.authService=t,this.data=r,this.router=i,this.usersList=[],this.userObj={id:"",first_name:"",last_name:"",email:"",mobile:"",eid:"",efirst_name:"",elast_name:"",eemail:"",emobile:""},this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}ngOnInit(){const t=localStorage.getItem("user");console.log(typeof JSON.parse(t)),JSON.parse(t)?this.getAllUsers():this.router.navigate(["/sign-in"])}register(){this.authService.logout()}getAllUsers(){this.data.getAllUsers().subscribe(t=>{this.usersList=t.map(r=>{const i=r.payload.doc.data();return i.id=r.payload.doc.id,i})},t=>{alert("Error while fetching user data")})}resetForm(){this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}addUser(){""!=this.first_name&&""!=this.last_name&&""!=this.mobile&&""!=this.email?(this.userObj.id="",this.userObj.email=this.email,this.userObj.first_name=this.first_name,this.userObj.last_name=this.last_name,this.userObj.mobile=this.mobile,this.data.addUser(this.userObj),this.resetForm()):alert("Fill all input fields")}updateUser(t){}deleteUser(t){window.confirm("Are you sure you want to delete "+t.first_name+" "+t.last_name+" ?")&&this.data.deleteUser(t)}signOut(){localStorage.removeItem("user"),this.router.navigate(["/sign-in"])}editUser(t){t.isEditing=!0}saveUser(t){t.isEditing=!1,localStorage.setItem("user",JSON.stringify(t)),this.resetForm()}cancelEdit(t){t.isEditing=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(XB),f.Y36(HH),f.Y36(Hi))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:51,vars:5,consts:[[1,"top"],[1,"flex-container"],[1,"image-container"],["src","assets/AH.png",1,"imgClass"],[1,"signout"],["type","button",1,"signoutbutton",3,"click"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","tetx-center"],[1,"text-center","text-warning"],[1,"form-floating","mb-3"],["type","text","id","firstName","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["for","firstName"],["type","text","id","lastName","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"text-danger"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-edit",3,"click"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","email",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"div",4)(5,"button",5),f.NdJ("click",function(){return r.signOut()}),f._uU(6,"Sign Out"),f.qZA()()()(),f.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"h5",10),f._uU(12,"Enter User Details"),f.qZA()(),f.TgZ(13,"div",11)(14,"input",12),f.NdJ("ngModelChange",function(a){return r.first_name=a}),f.qZA(),f.TgZ(15,"label",13),f._uU(16,"First name"),f.qZA()(),f.TgZ(17,"div",11)(18,"input",14),f.NdJ("ngModelChange",function(a){return r.last_name=a}),f.qZA(),f.TgZ(19,"label",15),f._uU(20,"Last name"),f.qZA()(),f.TgZ(21,"div",11)(22,"input",16),f.NdJ("ngModelChange",function(a){return r.email=a}),f.qZA(),f.TgZ(23,"label",17),f._uU(24,"Email address"),f.qZA()(),f.TgZ(25,"div",11)(26,"input",18),f.NdJ("ngModelChange",function(a){return r.mobile=a}),f.qZA(),f.TgZ(27,"label",19),f._uU(28,"Mobile"),f.qZA()(),f.TgZ(29,"button",20),f.NdJ("click",function(){return r.addUser()}),f._uU(30,"Add User"),f.qZA()()(),f.TgZ(31,"div",21)(32,"div",22)(33,"div",23)(34,"h5",24),f._uU(35,"Users List"),f.qZA(),f.TgZ(36,"table",25)(37,"thead")(38,"tr")(39,"th",26),f._uU(40,"First name"),f.qZA(),f.TgZ(41,"th",26),f._uU(42,"Last name"),f.qZA(),f.TgZ(43,"th",26),f._uU(44,"Email"),f.qZA(),f.TgZ(45,"th",26),f._uU(46,"Mobile"),f.qZA(),f.TgZ(47,"th",26),f._uU(48,"Action"),f.qZA()()(),f.TgZ(49,"tbody"),f.YNc(50,G$,3,2,"ng-container",27),f.qZA()()()()()()),2&t&&(f.xp6(14),f.Q6J("ngModel",r.first_name),f.xp6(4),f.Q6J("ngModel",r.last_name),f.xp6(4),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.mobile),f.xp6(24),f.Q6J("ngForOf",r.usersList))},dependencies:[dl,hu,FS,vF,VN],styles:[".top[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:20px;margin-top:20px}.flex-container[_ngcontent-%COMP%]{display:flex}.image-container[_ngcontent-%COMP%]{margin-right:10px}.imgClass[_ngcontent-%COMP%]{width:200px;height:auto}.signout[_ngcontent-%COMP%]{margin-left:1000px;margin-top:10px;text-align:right}.signoutbutton[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.row[_ngcontent-%COMP%]{margin-top:7px}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 0 5px #0000001a;padding:20px}.form-floating[_ngcontent-%COMP%]{margin-bottom:10px}.text-center[_ngcontent-%COMP%]{text-align:center}.text-warning[_ngcontent-%COMP%]{color:#ff9800}.btn-outline-success[_ngcontent-%COMP%]{color:#4caf50;border-color:#4caf50}.btn-outline-danger[_ngcontent-%COMP%]{color:#f44336;border-color:#f44336}.text-danger[_ngcontent-%COMP%]{color:#f44336;margin-bottom:10px}.btn-edit[_ngcontent-%COMP%]{color:#5c36f4;border-color:#5c36f469;margin-left:20px}"]}),n})(),W$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Iv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",3),f._uU(6,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4)(11,"input",7),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(9);return f.KtG(r.authService.ForgotPassword(l.value))}),f.qZA()()(),f.TgZ(12,"div",8)(13,"span"),f._uU(14,"Go back to ? "),f.TgZ(15,"span",9),f._uU(16,"Log In"),f.qZA()()()()()}}}),n})();function q$(n,e){if(1&n&&(f.TgZ(0,"div",4)(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let K$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Iv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,q$,8,1,"div",3),f.TgZ(6,"div",4)(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA()()(),f.TgZ(10,"div",7)(11,"span"),f._uU(12,"Go back to?"),f.TgZ(13,"span",8),f._uU(14," Sign in"),f.qZA()()()()()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))}}),n})(),Z$=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn?(this.router.navigate(["sign-in"]),console.log("1"),!1):(console.log("2"),!0)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Iv),f.LFG(Hi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Y$=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:ZB},{path:"register-user",component:YB},{path:"dashboard",component:z$},{path:"forgot-password",component:W$},{path:"verify-email-address",component:K$}];let Q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Z$],imports:[P_.forRoot(Y$),P_]}),n})(),X$=(()=>{class n{constructor(){this.title="angularfiebase-authentication"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Xv]}),n})();var J$=L(2420);const XF="@firebase/database";let WN="";function eL(n){WN=n}class nG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class rG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nG(e)}}catch{}return new rG},Nm=tL("localStorage"),qN=tL("sessionStorage"),Sv=new ys.Yd("@firebase/database"),nL=function(){let n=1;return function(){return n++}}(),rL=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},RI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=RI.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let Pm=null,iL=!0;const sL=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sv.logLevel=ys.in.VERBOSE,Pm=Sv.log.bind(Sv),e&&qN.set("logging_enabled",!0)):"function"==typeof n?Pm=n:(Pm=null,qN.remove("logging_enabled"))},ss=function(...n){if(!0===iL&&(iL=!1,null===Pm&&!0===qN.get("logging_enabled")&&sL(!0)),Pm){const e=RI.apply(null,n);Pm(e)}},xI=function(n){return function(...e){ss(n,...e)}},KN=function(...n){const e="FIREBASE INTERNAL ERROR: "+RI(...n);Sv.error(e)},yc=function(...n){const e=`FIREBASE FATAL ERROR: ${RI(...n)}`;throw Sv.error(e),new Error(e)},qs=function(...n){const e="FIREBASE WARNING: "+RI(...n);Sv.warn(e)},WS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},tp="[MIN_NAME]",ch="[MAX_NAME]",Om=function(n,e){if(n===e)return 0;if(n===tp||e===ch)return-1;if(e===tp||n===ch)return 1;{const t=uL(n),r=uL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},oG=function(n,e){return n===e?0:n<e?-1:1},NI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},ZN=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=ZN(n[e[r]]);return t+="}",t},oL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function os(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const aL=function(n){(0,U.hu)(!WS(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(D.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},cG=new RegExp("^-?(0*)\\d{1,10}$"),uL=function(n){if(cG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Av=function(n){try{n()}catch(e){setTimeout(()=>{throw qs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},PI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class pG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ss("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qs(e)}}let OI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const fL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mL="websocket",_L="long_polling";class QN{constructor(e,t,r,i,a=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yL(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===mL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==_L)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function mG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return os(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class _G{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const XN={},JN={};function eP(n){const e=n.toString();return XN[e]||(XN[e]=new _G),XN[e]}class vG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Av(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class np{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xI(e),this.stats_=eP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),yL(t,_L,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tP((...a)=>{const[l,h,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&fL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){np.forceAllow_=!0}static forceDisallow(){np.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!np.forceAllow_&&(np.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=oL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class tP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=nL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=tP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){ss("frame writing exception"),h.stack&&ss(h.stack),ss(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ss("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ss("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let KS=null;typeof MozWebSocket<"u"?KS=MozWebSocket:typeof WebSocket<"u"&&(KS=WebSocket);let Mv=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xI(this.connId),this.stats_=eP(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&fL.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),yL(t,mL,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nm.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${WN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new KS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==KS&&!n.forceDisallow_}static previouslyFailed(){return Nm.isInMemoryStorage||!0===Nm.get("previous_websocket_failure")}markConnectionHealthy(){Nm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=oL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),DL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[np,Mv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Mv&&Mv.isAvailable();let i=r&&!Mv.previouslyFailed();if(t.webSocketOnly&&(r||qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Mv];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class NL{constructor(e,t,r,i,a,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xI("c:"+this.id+":"),this.transportManager_=new DL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=PI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=NI("t",e),r=NI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=NI("t",e),r=NI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=NI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?KN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&qs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),PI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):PI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class PL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class OL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ZS extends OL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ZS}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new jn("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function rp(n){return n.pieces_.length-n.pieceNum_}function ur(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jn(n.pieces_,e)}function rP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function LL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jn(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new jn(t,0)}function dn(n){return n.pieceNum_>=n.pieces_.length}function yo(n,e){const t=cn(n),r=cn(e);if(null===t)return e;if(t===r)return yo(ur(n),ur(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function jG(n,e){const t=kI(n,0),r=kI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Om(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function iP(n,e){if(rp(n)!==rp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function uu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(rp(n)>rp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class HG{constructor(e,t){this.errorPrefix_=t,this.parts_=kI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);VL(this)}}function VL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+km(n))}function km(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sP extends OL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sP}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const FI=1e3;let QS,Fm=(()=>{class n extends PL{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=xI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=FI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ZS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,U.Wl)(l)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new U.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();qs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):KN("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=FI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=FI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=FI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function($){(0,U.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest($)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,Z]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?ss("getToken() completed but was canceled"):(ss("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=Z&&Z.token,v=new NL(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,se=>{qs(se+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch($){t.log_("Failed to get token: "+$),m||(t.repoInfo_.nodeAdmin&&qs($),D())}}})()}interrupt(t){ss("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ss("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=FI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ZN(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new jn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ss("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ss("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+WN.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ZS.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class YS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(tp,e),i=new hn(tp,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class jL extends YS{static get __EMPTY_NODE(){return QS}static set __EMPTY_NODE(e){QS=e}compare(e,t){return Om(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(ch,QS)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,QS)}toString(){return".key"}}const vc=new jL;class XS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aP,al=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??zo.EMPTY_NODE,this.right=l??zo.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return zo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return zo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class zo{constructor(e,t=zo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,al.BLACK,null,null))}remove(e){return new zo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,al.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new XS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new XS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new XS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new XS(this.root_,null,this.comparator_,!0,e)}}function YG(n,e){return Om(n.name,e.name)}function oP(n,e){return Om(n,e)}zo.EMPTY_NODE=new class ZG{copy(e,t,r,i,a){return this}insert(e,t,r){return new al(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const HL=function(n){return"number"==typeof n?"number:"+aL(n):"string:"+n},$L=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===aP||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===aP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let GL,zL,WL,Rv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$L(this.priorityNode_)}static set __childrenNodeConstructor(t){GL=t}static get __childrenNodeConstructor(){return GL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dn(t)?this:".priority"===cn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=cn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===rp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ur(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+HL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?aL(this.value_):this.value_,this.lazyHash_=rL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(a>=0,"Unknown leaf type: "+r),(0,U.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const dr=new class e3 extends YS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Om(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(ch,new Rv("[PRIORITY-POST]",WL))}makePost(e,t){const r=zL(e);return new hn(t,new Rv("[PRIORITY-POST]",r))}toString(){return".priority"}},t3=Math.log(2);class n3{constructor(e){this.count=parseInt(Math.log(e+1)/t3,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const JS=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,N;if(0===D)return null;if(1===D)return S=n[m],N=t?t(S):S,new al(N,S.node,al.BLACK,null,null);{const $=parseInt(D/2,10)+m,Z=i(m,$),se=i($+1,v);return S=n[$],N=t?t(S):S,new al(N,S.node,al.BLACK,Z,se)}},h=function(m){let v=null,D=null,S=n.length;const N=function(Z,se){const ce=S-Z,We=S;S-=Z;const ot=i(ce+1,We),He=n[ce],at=t?t(He):He;$(new al(at,He.node,se,null,ot))},$=function(Z){v?(v.left=Z,v=Z):(D=Z,v=Z)};for(let Z=0;Z<m.count;++Z){const se=m.nextBitIsOne(),ce=Math.pow(2,m.count-(Z+1));se?N(ce,al.BLACK):(N(ce,al.BLACK),N(ce,al.RED))}return D}(new n3(n.length));return new zo(r||e,h)};let uP;const xv={};class dh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(xv&&dr,"ChildrenNode.ts has not been loaded"),uP=uP||new dh({".priority":xv},{".priority":dr}),uP}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zo?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==vc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(hn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?JS(r,e.getCompare()):xv;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new dh(D,v)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,a)=>{const l=(0,U.DV)(this.indexSet_,a);if((0,U.hu)(l,"Missing index implementation for "+a),i===xv){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(hn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),JS(h,l.getCompare())}return xv}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new hn(e.name,h))),m.insert(e,e.node)}});return new dh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===xv)return i;{const a=t.get(e.name);return a?i.remove(new hn(e.name,a)):i}});return new dh(r,this.indexSet_)}}let LI,en=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&$L(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return LI||(LI=new n(new zo(oP),null,dh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||LI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?LI:r}}getChild(t){const r=cn(t);return null===r?this:this.getImmediateChild(r).getChild(ur(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?LI:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=cn(t);if(null===i)return r;{(0,U.hu)(".priority"!==cn(t)||1===rp(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ur(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(dr,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+HL(this.getPriority().val())+":"),this.forEachChild(dr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":rL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new hn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===VI?-1:0}withIndex(t){if(t===vc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===vc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(dr),a=r.getIterator(dr);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===vc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const VI=new class r3 extends en{constructor(){super(new zo(oP),en.EMPTY_NODE,dh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hn,{MIN:{value:new hn(tp,en.EMPTY_NODE)},MAX:{value:new hn(ch,VI)}}),jL.__EMPTY_NODE=en.EMPTY_NODE,Rv.__childrenNodeConstructor=en,function QG(n){aP=n}(VI),function JG(n){WL=n}(VI);const i3=!0;function Br(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Rv(n,Br(e));if(n instanceof Array||!i3){let t=en.EMPTY_NODE;return os(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const a=Br(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Br(e))}{const t=[];let r=!1;if(os(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Br(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new hn(l,m)))}}),0===t.length)return en.EMPTY_NODE;const a=JS(t,YG,l=>l.name,oP);if(r){const l=JS(t,dr.getCompare());return new en(a,Br(e),new dh({".priority":l},{".priority":dr}))}return new en(a,Br(e),dh.Default)}}!function XG(n){zL=n}(Br);class lP extends YS{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!dn(e)&&".priority"!==cn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Om(e.name,t.name):a}makePost(e,t){const r=Br(e),i=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,VI);return new hn(ch,e)}toString(){return kI(this.indexPath_,0).join("/")}}const cP=new class s3 extends YS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Om(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Br(e);return new hn(t,r)}toString(){return".value"}};function qL(n){return{type:"value",snapshotNode:n}}function Nv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function UI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function BI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class dP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(UI(t,h)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Nv(t,r)):l.trackChildChange(BI(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(dr,(i,a)=>{t.hasChild(i)||r.trackChildChange(UI(i,a))}),t.isLeafNode()||t.forEachChild(dr,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(BI(i,a,l))}else r.trackChildChange(Nv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jI{constructor(e){this.indexedFilter_=new dP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jI.getStartPost_(e),this.endPost_=jI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new hn(t,r))||(r=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=en.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(en.EMPTY_NODE);const a=this;return t.forEachChild(dr,(l,h)=>{a.matches(new hn(l,h))||(i=i.updateImmediateChild(l,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class a3{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new jI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new hn(t,r))||(r=en.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=en.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=en.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(en.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,$)=>S($,N)}else l=this.index_.getCompare();const h=e;(0,U.hu)(h.numChildren()===this.limit_,"");const m=new hn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const $=null==N?1:l(N,m);if(D&&!r.isEmpty()&&$>=0)return a?.trackChildChange(BI(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(UI(t,S));const se=h.updateImmediateChild(t,en.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(Nv(N.name,N.node)),se.updateImmediateChild(N.name,N.node)):se}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=a&&(a.trackChildChange(UI(v.name,v.node)),a.trackChildChange(Nv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,en.EMPTY_NODE)):e}}class eA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ch}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dr}copy(){const e=new eA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function fP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function tA(n,e){const t=n.copy();return t.index_=e,t}function KL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===dr?t="$priority":n.index_===cP?t="$value":n.index_===vc?t="$key":((0,U.hu)(n.index_ instanceof lP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ZL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==dr&&(e.i=n.index_.toString()),e}class nA extends PL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=nA.getListenId_(e,r),h={};this.listens_[l]=h;const m=KL(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,U.DV)(this.listens_,l)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=nA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=KL(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,U.cI)(h.responseText)}catch{qs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&qs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class f3{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rA(){return{value:null,children:new Map}}function Pv(n,e,t){if(dn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=cn(e);n.children.has(r)||n.children.set(r,rA()),Pv(n.children.get(r),e=ur(e),t)}}function pP(n,e){if(dn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(dr,(r,i)=>{Pv(n,new jn(r),i)}),pP(n,e)}}if(n.children.size>0){const t=cn(e);return e=ur(e),n.children.has(t)&&pP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function gP(n,e,t){null!==n.value?t(e,n.value):function p3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{gP(i,new jn(e.toString()+"/"+r),t)})}class g3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&os(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class y3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new g3(e);const r=1e4+2e4*Math.random();PI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;os(e,(i,a)=>{a>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),PI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ai=(()=>((Ai=Ai||{})[Ai.OVERWRITE=0]="OVERWRITE",Ai[Ai.MERGE=1]="MERGE",Ai[Ai.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ai[Ai.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ai))();function yP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ai.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dn(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jn(e));return new iA(Mn(),t,this.revert)}}return(0,U.hu)(cn(this.path)===e,"operationForChild called for unrelated child."),new iA(ur(this.path),this.affectedTree,this.revert)}}class HI{constructor(e,t){this.source=e,this.path=t,this.type=Ai.LISTEN_COMPLETE}operationForChild(e){return dn(this.path)?new HI(this.source,Mn()):new HI(this.source,ur(this.path))}}class Lm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ai.OVERWRITE}operationForChild(e){return dn(this.path)?new Lm(this.source,Mn(),this.snap.getImmediateChild(e)):new Lm(this.source,ur(this.path),this.snap)}}class Ov{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ai.MERGE}operationForChild(e){if(dn(this.path)){const t=this.children.subtree(new jn(e));return t.isEmpty()?null:t.value?new Lm(this.source,Mn(),t.value):new Ov(this.source,Mn(),t)}return(0,U.hu)(cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ov(this.source,ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ip{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dn(e))return this.isFullyInitialized()&&!this.filtered_;const t=cn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class v3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $I(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function I3(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function E3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function sA(n,e){return{eventCache:n,serverCache:e}}function GI(n,e,t,r){return sA(new ip(e,t,r),n.serverCache)}function QL(n,e,t,r){return sA(n.eventCache,new ip(e,t,r))}function oA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let vP;class hr{constructor(e,t=(()=>(vP||(vP=new zo(oG)),vP))()){this.value=e,this.children=t}static fromObject(e){let t=new hr(null);return os(e,(r,i)=>{t=t.set(new jn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(dn(e))return null;{const r=cn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(ur(e),t);return null!=a?{path:Ar(new jn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dn(e))return this;{const t=cn(e),r=this.children.get(t);return null!==r?r.subtree(ur(e)):new hr(null)}}set(e,t){if(dn(e))return new hr(t,this.children);{const r=cn(e),a=(this.children.get(r)||new hr(null)).set(ur(e),t),l=this.children.insert(r,a);return new hr(this.value,l)}}remove(e){if(dn(e))return this.children.isEmpty()?new hr(null):new hr(null,this.children);{const t=cn(e),r=this.children.get(t);if(r){const i=r.remove(ur(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new hr(null):new hr(this.value,a)}return this}}get(e){if(dn(e))return this.value;{const t=cn(e),r=this.children.get(t);return r?r.get(ur(e)):null}}setTree(e,t){if(dn(e))return t;{const r=cn(e),a=(this.children.get(r)||new hr(null)).setTree(ur(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new hr(this.value,l)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(dn(e))return null;{const a=cn(e),l=this.children.get(a);return l?l.findOnPath_(ur(e),Ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(dn(e))return this;{this.value&&r(t,this.value);const i=cn(e),a=this.children.get(i);return a?a.foreachOnPath_(ur(e),Ar(t,i),r):new hr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ul{constructor(e){this.writeTree_=e}static empty(){return new ul(new hr(null))}}function zI(n,e,t){if(dn(e))return new ul(new hr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=yo(i,e);return a=a.updateChild(l,t),new ul(n.writeTree_.set(i,a))}{const i=new hr(t),a=n.writeTree_.setTree(e,i);return new ul(a)}}}function wP(n,e,t){let r=n;return os(t,(i,a)=>{r=zI(r,Ar(e,i),a)}),r}function XL(n,e){if(dn(e))return ul.empty();{const t=n.writeTree_.setTree(e,new hr(null));return new ul(t)}}function EP(n,e){return null!=Um(n,e)}function Um(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(yo(t.path,e)):null}function JL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(dr,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function sp(n,e){if(dn(e))return n;{const t=Um(n,e);return new ul(null!=t?new hr(t):n.writeTree_.subtree(e))}}function IP(n){return n.writeTree_.isEmpty()}function kv(n,e){return eV(Mn(),n.writeTree_,e)}function eV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,U.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=eV(Ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function aA(n,e){return sV(e,n)}function A3(n,e){if(n.snap)return uu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&uu(Ar(n.path,t),e))return!0;return!1}function R3(n){return n.visible}function tV(n,e,t){let r=ul.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)uu(t,l)?(h=yo(t,l),r=zI(r,h,a.snap)):uu(l,t)&&(h=yo(l,t),r=zI(r,Mn(),a.snap.getChild(h)));else{if(!a.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(uu(t,l))h=yo(t,l),r=wP(r,h,a.children);else if(uu(l,t))if(h=yo(l,t),dn(h))r=wP(r,Mn(),a.children);else{const m=(0,U.DV)(a.children,cn(h));if(m){const v=m.getChild(ur(h));r=zI(r,Mn(),v)}}}}}return r}function nV(n,e,t,r,i){if(r||i){const a=sp(n.visibleWrites,e);return!i&&IP(a)?t:i||null!=t||EP(a,Mn())?kv(tV(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(uu(v.path,e)||uu(e,v.path))},e),t||en.EMPTY_NODE):null}{const a=Um(n.visibleWrites,e);if(null!=a)return a;{const l=sp(n.visibleWrites,e);return IP(l)?t:null!=t||EP(l,Mn())?kv(l,t||en.EMPTY_NODE):null}}}function uA(n,e,t,r){return nV(n.writeTree,n.treePath,e,t,r)}function CP(n,e){return function x3(n,e,t){let r=en.EMPTY_NODE;const i=Um(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(dr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=sp(n.visibleWrites,e);return t.forEachChild(dr,(l,h)=>{const m=kv(sp(a,new jn(l)),h);r=r.updateImmediateChild(l,m)}),JL(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return JL(sp(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function rV(n,e,t,r){return function N3(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ar(e,t);if(EP(n.visibleWrites,a))return null;{const l=sp(n.visibleWrites,a);return IP(l)?i.getChild(t):kv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function lA(n,e){return function O3(n,e){return Um(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function bP(n,e,t){return function P3(n,e,t,r){const i=Ar(e,t),a=Um(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?kv(sp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function iV(n,e){return sV(Ar(n.treePath,e),n.writeTree)}function sV(n,e){return{treePath:n,writeTree:e}}class V3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,BI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,UI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Nv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,BI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const oV=new class U3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class DP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ip(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vm(this.viewCache_),a=function L3(n,e,t,r,i,a){return function k3(n,e,t,r,i,a,l){let h;const m=sp(n.visibleWrites,e),v=Um(m,Mn());if(null!=v)h=v;else{if(null==t)return[];h=kv(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let $=N.getNext();for(;$&&D.length<i;)0!==S($,r)&&D.push($),$=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function aV(n,e,t,r,i,a){const l=e.eventCache;if(null!=lA(r,t))return e;{let h,m;if(dn(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Vm(e),S=CP(r,v instanceof en?v:en.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=uA(r,Vm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=cn(t);if(".priority"===v){(0,U.hu)(1===rp(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=rV(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=ur(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const N=rV(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(v).updateChild(D,N):l.getNode().getImmediateChild(v)}else S=bP(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return GI(e,h,l.isFullyInitialized()||dn(t),n.filter.filtersNodes())}}function cA(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(dn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const $=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),$,null)}else{const $=cn(t);if(!m.isCompleteForPath(t)&&rp(t)>1)return e;const Z=ur(t),ce=m.getNode().getImmediateChild($).updateChild(Z,r);v=".priority"===$?D.updatePriority(m.getNode(),ce):D.updateChild(m.getNode(),$,ce,Z,oV,null)}const S=QL(e,v,m.isFullyInitialized()||dn(t),D.filtersNodes());return aV(n,S,t,i,new DP(i,S,a),h)}function TP(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const D=new DP(i,e,a);if(dn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=GI(e,v,!0,n.filter.filtersNodes());else{const S=cn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=GI(e,v,h.isFullyInitialized(),h.isFiltered());else{const N=ur(t),$=h.getNode().getImmediateChild(S);let Z;if(dn(N))Z=r;else{const se=D.getCompleteChild(S);Z=null!=se?".priority"===rP(N)&&se.getChild(LL(N)).isEmpty()?se:se.updateChild(N,r):en.EMPTY_NODE}m=$.equals(Z)?e:GI(e,n.filter.updateChild(h.getNode(),S,Z,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function uV(n,e){return n.eventCache.isCompleteForChild(e)}function lV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function SP(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=dn(t)?r:new hr(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const Z=lV(0,e.serverCache.getNode().getImmediateChild(S),N);m=cA(n,m,new jn(S),Z,i,a,l,h)}}),v.children.inorderTraversal((S,N)=>{const $=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!D.hasChild(S)&&!$){const se=lV(0,e.serverCache.getNode().getImmediateChild(S),N);m=cA(n,m,new jn(S),se,i,a,l,h)}}),m}class K3{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new dP(r.getIndex()),a=function u3(n){return n.loadsAllData()?new dP(n.getIndex()):n.hasLimit()?new a3(n):new jI(n)}(r);this.processor_=function B3(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(en.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(en.EMPTY_NODE,h.getNode(),null),D=new ip(m,l.isFullyInitialized(),i.filtersNodes()),S=new ip(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=sA(S,D),this.eventGenerator_=new v3(this.query_)}get query(){return this.query_}}function Q3(n,e){const t=Vm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dn(e)&&!t.getImmediateChild(cn(e)).isEmpty())?t.getChild(e):null}function cV(n){return 0===n.eventRegistrations_.length}function dV(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function hV(n,e,t,r){e.type===Ai.MERGE&&null!==e.source.queryId&&((0,U.hu)(Vm(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(oA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function H3(n,e,t,r,i){const a=new V3;let l,h;if(t.type===Ai.OVERWRITE){const v=t;v.source.fromUser?l=TP(n,e,v.path,v.snap,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!dn(v.path),l=cA(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Ai.MERGE){const v=t;v.source.fromUser?l=function G3(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const D=Ar(t,m);uV(e,cn(D))&&(h=TP(n,h,D,v,i,a,l))}),r.foreach((m,v)=>{const D=Ar(t,m);uV(e,cn(D))||(h=TP(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=SP(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Ai.ACK_USER_WRITE){const v=t;l=v.revert?function q3(n,e,t,r,i,a){let l;if(null!=lA(r,t))return e;{const h=new DP(r,e,i),m=e.eventCache.getNode();let v;if(dn(t)||".priority"===cn(t)){let D;if(e.serverCache.isFullyInitialized())D=uA(r,Vm(e));else{const S=e.serverCache.getNode();(0,U.hu)(S instanceof en,"serverChildren would be complete if leaf node"),D=CP(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=cn(t);let S=bP(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,ur(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,en.EMPTY_NODE,ur(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=uA(r,Vm(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=lA(r,Mn()),GI(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function z3(n,e,t,r,i,a,l){if(null!=lA(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(dn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return cA(n,e,t,m.getNode().getChild(t),i,a,h,l);if(dn(t)){let v=new hr(null);return m.getNode().forEachChild(vc,(D,S)=>{v=v.set(new jn(D),S)}),SP(n,e,t,v,i,a,h,l)}return e}{let v=new hr(null);return r.foreach((D,S)=>{const N=Ar(t,D);m.isCompleteForPath(N)&&(v=v.set(D,m.getNode().getChild(N)))}),SP(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Ai.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);l=function W3(n,e,t,r,i){const a=e.serverCache;return aV(n,QL(e,a.getNode(),a.isFullyInitialized()||dn(t),a.isFiltered()),t,r,oV,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function $3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=oA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(qL(oA(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function j3(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,U.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,fV(n,a.changes,a.viewCache.eventCache.getNode(),null)}function fV(n,e,t,r){return function w3(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function o3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),$I(n,i,"child_removed",e,r,t),$I(n,i,"child_added",e,r,t),$I(n,i,"child_moved",a,r,t),$I(n,i,"child_changed",e,r,t),$I(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dA,fA;class pV{constructor(){this.views=new Map}}function AP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,U.hu)(null!=a,"SyncTree gave us an op for an invalid query."),hV(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(hV(l,e,t,r));return a}}function gV(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=uA(t,i?r:null),m=!1;h?m=!0:r instanceof en?(h=CP(t,r),m=!1):(h=en.EMPTY_NODE,m=!1);const v=sA(new ip(h,m,!1),new ip(r,i,!1));return new K3(e,v)}return l}function mV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function op(n,e){let t=null;for(const r of n.views.values())t=t||Q3(r,e);return t}function _V(n,e){return e._queryParams.loadsAllData()?hA(n):n.views.get(e._queryIdentifier)}function yV(n,e){return null!=_V(n,e)}function ap(n){return null!=hA(n)}function hA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let a4=1;class vV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hr(null),this.pendingWriteTree_=function F3(){return{visibleWrites:ul.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function MP(n,e,t,r,i){return function b3(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=zI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Fv(n,new Lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function up(n,e,t=!1){const r=function T3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function S3(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&A3(h,r.path)?i=!1:uu(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function M3(n){n.visibleWrites=tV(n.allWrites,R3,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=XL(n.visibleWrites,r.path):os(r.children,m=>{n.visibleWrites=XL(n.visibleWrites,Ar(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new hr(null);return null!=r.snap?a=a.set(Mn(),!0):os(r.children,l=>{a=a.set(new jn(l),!0)}),Fv(n,new iA(r.path,a,t))}return[]}function WI(n,e,t){return Fv(n,new Lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pA(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||yV(l,e))){const m=function i4(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=ap(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(dV(v,t,r)),cV(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(dV(m,t,r)),cV(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!ap(n)&&a.push(new(function t4(){return(0,U.hu)(dA,"Reference.ts has not been loaded"),dA}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function n4(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(h=m.events,!i){const D=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(N,$)=>ap($));if(D&&!S){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const $=function p4(n){return n.fold((e,t,r)=>{if(t&&ap(t))return[hA(t)];{let i=[];return t&&(i=mV(t)),os(r,(a,l)=>{i=i.concat(l)}),i}})}(N);for(let Z=0;Z<$.length;++Z){const se=$[Z],ce=se.query,We=CV(n,se);n.listenProvider_.startListening(KI(ce),qI(n,ce),We.hashFn,We.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(KI(e),null):v.forEach(N=>{const $=n.queryToTagMap.get(mA(N));n.listenProvider_.stopListening(KI(N),$)}))}!function g4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=mA(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function wV(n,e,t,r){const i=xP(n,r);if(null!=i){const a=NP(i),l=a.path,h=a.queryId,m=yo(l,e);return PP(n,l,new Lm(yP(h),m,t))}return[]}function RP(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,$)=>{const Z=yo(N,i);a=a||op($,Z),l=l||ap($)});let m,h=n.syncPointTree_.get(i);h?(l=l||ap(h),a=a||op(h,Mn())):(h=new pV,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?m=!0:(m=!1,a=en.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild(($,Z)=>{const se=op(Z,Mn());se&&(a=a.updateImmediateChild($,se))}));const v=yV(h,e);if(!v&&!e._queryParams.loadsAllData()){const N=mA(e);(0,U.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const $=function m4(){return a4++}();n.queryToTagMap.set(N,$),n.tagToQueryMap.set($,N)}let S=function r4(n,e,t,r,i,a){const l=gV(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function X3(n,e){n.eventRegistrations_.push(e)}(l,t),function J3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(dr,(a,l)=>{r.push(Nv(a,l))}),t.isFullyInitialized()&&r.push(qL(t.getNode())),fV(n,r,t.getNode(),e)}(l,t)}(h,e,t,aA(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const N=_V(h,e);S=S.concat(function _4(n,e,t){const r=e._path,i=qI(n,e),a=CV(n,t),l=n.listenProvider_.startListening(KI(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!ap(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,D,S)=>{if(!dn(v)&&D&&ap(D))return[hA(D).query];{let N=[];return D&&(N=N.concat(mV(D).map($=>$.query))),os(S,($,Z)=>{N=N.concat(Z)}),N}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(KI(D),qI(n,D))}}return l}(n,e,N))}return S}function gA(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=op(h,yo(l,e));if(v)return v});return nV(i,e,a,t,!0)}function Fv(n,e){return EV(e,n.syncPointTree_,null,aA(n.pendingWriteTree_,Mn()))}function EV(n,e,t,r){if(dn(n.path))return IV(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=op(i,Mn()));let a=[];const l=cn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=iV(r,l);a=a.concat(EV(h,m,v,D))}return i&&(a=a.concat(AP(i,n,r,t))),a}}function IV(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=op(i,Mn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=iV(r,l),D=n.operationForChild(l);D&&(a=a.concat(IV(D,h,m,v)))}),i&&(a=a.concat(AP(i,n,r,t))),a}function CV(n,e){const t=e.query,r=qI(n,t);return{hashFn:()=>(function Z3(n){return n.viewCache_.serverCache.getNode()}(e)||en.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function d4(n,e,t){const r=xP(n,t);if(r){const i=NP(r),a=i.path,l=i.queryId,h=yo(a,e);return PP(n,a,new HI(yP(l),h))}return[]}(n,t._path,r):function c4(n,e){return Fv(n,new HI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function lG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return pA(n,t,null,a)}}}}function qI(n,e){const t=mA(e);return n.queryToTagMap.get(t)}function mA(n){return n._path.toString()+"$"+n._queryIdentifier}function xP(n,e){return n.tagToQueryMap.get(e)}function NP(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jn(n.substr(0,e))}}function PP(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),AP(r,t,aA(n.pendingWriteTree_,e),null)}function KI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function o4(){return(0,U.hu)(fA,"Reference.ts has not been loaded"),fA}())(n._repo,n._path):n}class OP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new OP(t)}node(){return this.node_}}class kP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new kP(this.syncTree_,t)}node(){return gA(this.syncTree_,this.path_)}}const y4=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},bV=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?v4(n[".sv"],e,t):"object"==typeof n[".sv"]?w4(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},v4=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},w4=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},DV=function(n,e,t,r){return LP(e,new kP(t,n),r)},FP=function(n,e,t){return LP(n,new OP(e),t)};function LP(n,e,t){const r=n.getPriority().val(),i=bV(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=bV(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Rv(h,Br(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Rv(i))),l.forEachChild(dr,(h,m)=>{const v=LP(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class VP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function _A(n,e){let t=e instanceof jn?e:new jn(e),r=n,i=cn(t);for(;null!==i;){const a=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new VP(i,r,a),t=ur(t),i=cn(t)}return r}function Bm(n){return n.node.value}function UP(n,e){n.node.value=e,BP(n)}function TV(n){return n.node.childCount>0}function yA(n,e){os(n.node.children,(t,r)=>{e(new VP(t,n,r))})}function SV(n,e,t,r){t&&!r&&e(n),yA(n,i=>{SV(i,e,!0,r)}),t&&r&&e(n)}function ZI(n){return new jn(null===n.parent?n.name:ZI(n.parent)+"/"+n.name)}function BP(n){null!==n.parent&&function C4(n,e,t){const r=function E4(n){return void 0===Bm(n)&&!TV(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,BP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,BP(n))}(n.parent,n.name,n)}const b4=/[\[\].#$\/\u0000-\u001F\u007F]/,D4=/[\[\].#$\u0000-\u001F\u007F]/,jP=10485760,vA=function(n){return"string"==typeof n&&0!==n.length&&!b4.test(n)},AV=function(n){return"string"==typeof n&&0!==n.length&&!D4.test(n)},YI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!WS(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},wc=function(n,e,t,r){r&&void 0===e||QI((0,U.gK)(n,"value"),e,t)},QI=function(n,e,t){const r=t instanceof jn?new HG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+km(r));if("function"==typeof e)throw new Error(n+"contains a function "+km(r)+" with contents = "+e.toString());if(WS(e))throw new Error(n+"contains "+e.toString()+" "+km(r));if("string"==typeof e&&e.length>jP/3&&(0,U.ug)(e)>jP)throw new Error(n+"contains a string greater than "+jP+" utf8 bytes "+km(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(os(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!vA(l)))throw new Error(n+" contains an invalid key ("+l+") "+km(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function $G(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),VL(n)})(r,l),QI(n,h,r),function GG(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+km(r)+" in addition to actual children.")}},MV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];os(e,(l,h)=>{const m=new jn(l);if(QI(i,h,Ar(t,m)),".priority"===rP(m)&&!YI(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=kI(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!vA(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(jG);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&uu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},HP=function(n,e,t){if(!t||void 0!==e){if(WS(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!YI(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},XI=function(n,e,t,r){if(!(r&&void 0===t||vA(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},JI=function(n,e,t,r){if(!(r&&void 0===t||AV(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},A4=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JI(n,e,t,r)},lu=function(n,e){if(".info"===cn(e))throw new Error(n+" failed = Can't modify data under /.info/")},RV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),AV(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class M4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!iP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function xV(n,e,t){wA(n,t),NV(n,r=>iP(r,e))}function Sa(n,e,t){wA(n,t),NV(n,r=>uu(r,e)||uu(e,r))}function NV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(R4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function R4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Pm&&ss("event: "+t.toString()),Av(r)}}}const PV="repo_interrupt",x4=25;class N4{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rA(),this.transactionQueueTree_=new VP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function OV(n){const t=n.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eC(n){return y4({timestamp:OV(n)})}function kV(n,e,t,r,i){n.dataUpdateCount++;const a=new jn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,U.UI)(t,v=>Br(v));l=function h4(n,e,t,r){const i=xP(n,r);if(i){const a=NP(i),l=a.path,h=a.queryId,m=yo(l,e),v=hr.fromObject(t);return PP(n,l,new Ov(yP(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Br(t);l=wV(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,U.UI)(t,v=>Br(v));l=function l4(n,e,t){const r=hr.fromObject(t);return Fv(n,new Ov({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Br(t);l=WI(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=Vv(n,a)),Sa(n.eventQueue_,h,l)}function FV(n,e){$P(n,"connected",e),!1===e&&function L4(n){Lv(n,"onDisconnectEvents");const e=eC(n),t=rA();gP(n.onDisconnect_,Mn(),(i,a)=>{const l=DV(i,a,n.serverSyncTree_,e);Pv(t,i,l)});let r=[];gP(t,Mn(),(i,a)=>{r=r.concat(WI(n.serverSyncTree_,i,a));const l=qP(n,i);Vv(n,l)}),n.onDisconnect_=rA(),Sa(n.eventQueue_,Mn(),r)}(n)}function $P(n,e,t){const r=new jn("/.info/"+e),i=Br(t);n.infoData_.updateSnapshot(r,i);const a=WI(n.infoSyncTree_,r,i);Sa(n.eventQueue_,r,a)}function EA(n){return n.nextWriteId_++}function GP(n,e,t,r,i){Lv(n,"set",{path:e.toString(),value:t,priority:r});const a=eC(n),l=Br(t,r),h=gA(n.serverSyncTree_,e),m=FP(l,h,a),v=EA(n),D=MP(n.serverSyncTree_,e,m,v,!0);wA(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,$)=>{const Z="ok"===N;Z||qs("set at "+e+" failed: "+N);const se=up(n.serverSyncTree_,v,!Z);Sa(n.eventQueue_,e,se),lp(0,i,N,$)});const S=qP(n,e);Vv(n,S),Sa(n.eventQueue_,S,[])}function V4(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&pP(n.onDisconnect_,e),lp(0,t,r,i)})}function LV(n,e,t,r){const i=Br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Pv(n.onDisconnect_,e,i),lp(0,r,a,l)})}function zP(n,e,t){let r;r=".info"===cn(e._path)?pA(n.infoSyncTree_,e,t):pA(n.serverSyncTree_,e,t),xV(n.eventQueue_,e._path,r)}function VV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(PV)}function Lv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ss(t,...e)}function lp(n,e,t,r){e&&Av(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function WP(n,e,t){return gA(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function IA(n,e=n.transactionQueueTree_){if(e||CA(n,e),Bm(e)){const t=BV(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function G4(n,e,t){const r=t.map(v=>v.currentWriteId),i=WP(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,U.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=yo(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{Lv(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(up(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();CA(n,_A(n.transactionQueueTree_,e)),IA(n,n.transactionQueueTree_),Sa(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)Av(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{qs("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Vv(n,e)}},l)}(n,ZI(e),t)}else TV(e)&&yA(e,t=>{IA(n,t)})}function Vv(n,e){const t=UV(n,e),r=ZI(t);return function z4(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=yo(t,m.path);let S,D=!1;if((0,U.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(up(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=x4)D=!0,S="maxretry",i=i.concat(up(n.serverSyncTree_,m.currentWriteId,!0));else{const N=WP(n,m.path,l);m.currentInputSnapshot=N;const $=e[h].update(N.val());if(void 0!==$){QI("transaction failed: Data returned ",$,m.path);let Z=Br($);"object"==typeof $&&null!=$&&(0,U.r3)($,".priority")||(Z=Z.updatePriority(N.getPriority()));const ce=m.currentWriteId,We=eC(n),ot=FP(Z,N,We);m.currentOutputSnapshotRaw=Z,m.currentOutputSnapshotResolved=ot,m.currentWriteId=EA(n),l.splice(l.indexOf(ce),1),i=i.concat(MP(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(up(n.serverSyncTree_,ce,!0))}else D=!0,S="nodata",i=i.concat(up(n.serverSyncTree_,m.currentWriteId,!0))}Sa(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}CA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Av(r[h]);IA(n,n.transactionQueueTree_)}(n,BV(n,t),r),r}function UV(n,e){let t,r=n.transactionQueueTree_;for(t=cn(e);null!==t&&void 0===Bm(r);)r=_A(r,t),t=cn(e=ur(e));return r}function BV(n,e){const t=[];return jV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function jV(n,e,t){const r=Bm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yA(e,i=>{jV(n,i,t)})}function CA(n,e){const t=Bm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,UP(e,t.length>0?t:void 0)}yA(e,r=>{CA(n,r)})}function qP(n,e){const t=ZI(UV(n,e)),r=_A(n.transactionQueueTree_,e);return function I4(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{KP(n,i)}),KP(n,r),SV(r,i=>{KP(n,i)}),t}function KP(n,e){const t=Bm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,U.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,U.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(up(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?UP(e,void 0):t.length=a+1,Sa(n.eventQueue_,ZI(e),i);for(let l=0;l<r.length;l++)Av(r[l])}}const ZP=function(n,e){const t=K4(n),r=t.namespace;return"firebase.com"===t.domain&&yc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new QN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new jn(t.pathString)}},K4=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function W4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const N=function q4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const $=e.slice(0,v);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}},HV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=HV.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=HV.charAt(e[i]);return(0,U.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class $V{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class GV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class YP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return V4(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){lu("OnDisconnect.remove",this._path);const e=new U.BH;return LV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){lu("OnDisconnect.set",this._path),wc("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return LV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){lu("OnDisconnect.setWithPriority",this._path),wc("OnDisconnect.setWithPriority",e,this._path,!1),HP("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function U4(n,e,t,r,i){const a=Br(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Pv(n.onDisconnect_,e,a),lp(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){lu("OnDisconnect.update",this._path),MV("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function B4(n,e,t,r){if((0,U.xb)(t))return ss("onDisconnect().update() called with empty data.  Don't do anything."),void lp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&os(t,(l,h)=>{const m=Br(h);Pv(n.onDisconnect_,Ar(e,l),m)}),lp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Wo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return dn(this._path)?null:rP(this._path)}get ref(){return new cu(this._repo,this._path)}get _queryIdentifier(){const e=ZL(this._queryParams),t=ZN(e);return"{}"===t?"default":t}get _queryObject(){return ZL(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof Wo))return!1;const t=this._repo===e._repo,r=iP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function BG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function bA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function cp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===vc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==tp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ch)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===dr){if(null!=e&&!YI(e)||null!=t&&!YI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof lP||n.getIndex()===cP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function DA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class cu extends Wo{constructor(e,t){super(e,t,new eA,!1)}get parent(){const e=LL(this._path);return null===e?null:new cu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class jm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jn(e),r=Hm(this.ref,e);return new jm(this._node.getChild(t),r,dr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new jm(i,Hm(this.ref,r),dr)))}hasChild(e){const t=new jn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function WV(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hm(n._root,e):n._root}function qV(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=ZP(e,n._repo.repoInfo_.nodeAdmin);RV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&yc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),WV(n,t.path.toString())}function Hm(n,e){return null===cn((n=(0,U.m9)(n))._path)?A4("child","path",e,!1):JI("child","path",e,!1),new cu(n._repo,Ar(n._path,e))}function QP(n,e){n=(0,U.m9)(n),lu("set",n._path),wc("set",e,n._path,!1);const t=new U.BH;return GP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ez(n,e){MV("update",e,n._path,!1);const t=new U.BH;return function F4(n,e,t,r){Lv(n,"update",{path:e.toString(),value:t});let i=!0;const a=eC(n),l={};if(os(t,(h,m)=>{i=!1,l[h]=DV(Ar(e,h),Br(m),n.serverSyncTree_,a)}),i)ss("update() called with empty data.  Don't do anything."),lp(0,r,"ok",void 0);else{const h=EA(n),m=function u4(n,e,t,r){!function D3(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=wP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=hr.fromObject(t);return Fv(n,new Ov({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);wA(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||qs("update at "+e+" failed: "+v);const N=up(n.serverSyncTree_,h,!S),$=N.length>0?Vv(n,e):e;Sa(n.eventQueue_,$,N),lp(0,r,v,D)}),os(t,v=>{const D=qP(n,Ar(e,v));Vv(n,D)}),Sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function tz(n){n=(0,U.m9)(n);const e=new YP(()=>{}),t=new tC(e);return function k4(n,e,t){const r=function f4(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=yo(v,t);r=r||op(D,S)});let i=n.syncPointTree_.get(t);i?r=r||op(i,Mn()):(i=new pV,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ip(r,!0,!1):null;return function Y3(n){return oA(n.viewCache_)}(gV(i,e,aA(n.pendingWriteTree_,e._path),a?l.getNode():en.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Br(i).withIndex(e._queryParams.getIndex());let l;if(RP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=WI(n.serverSyncTree_,e._path,a);else{const h=qI(n.serverSyncTree_,e);l=wV(n.serverSyncTree_,e._path,a,h)}return Sa(n.eventQueue_,e._path,l),pA(n.serverSyncTree_,e,t,null,!0),a},i=>(Lv(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new jm(r,new cu(n._repo,n._path),n._queryParams.getIndex()))}class tC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new $V("value",this,new jm(e.snapshotNode,new cu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new GV(this,e,t):null}matches(e){return e instanceof tC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class TA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new GV(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Hm(new cu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new $V(e.type,this,new jm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof TA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nC(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{zP(n._repo,n,h),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new YP(t,a||void 0),h="value"===e?new tC(l):new TA(e,l);return function j4(n,e,t){let r;r=".info"===cn(e._path)?RP(n.infoSyncTree_,e,t):RP(n.serverSyncTree_,e,t),xV(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>zP(n._repo,n,h)}function XP(n,e,t,r){return nC(n,"value",e,t,r)}function KV(n,e,t,r){return nC(n,"child_added",e,t,r)}function ZV(n,e,t,r){return nC(n,"child_changed",e,t,r)}function YV(n,e,t,r){return nC(n,"child_moved",e,t,r)}function QV(n,e,t,r){return nC(n,"child_removed",e,t,r)}function XV(n,e,t){let r=null;const i=t?new YP(t):null;"value"===e?r=new tC(i):e&&(r=new TA(e,i)),zP(n._repo,n,r)}class ll{}class JV extends ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endAt",this._value,e._path,!0);const t=fP(e._queryParams,this._value,this._key);if(DA(t),cp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class rz extends ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endBefore",this._value,e._path,!1);const t=function h3(n,e,t){let r;return r=fP(n,e,n.index_===vc||t?t:tp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(DA(t),cp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class eU extends ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAt",this._value,e._path,!0);const t=hP(e._queryParams,this._value,this._key);if(DA(t),cp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class oz extends ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAfter",this._value,e._path,!1);const t=function d3(n,e,t){let r;return r=hP(n,e,n.index_===vc||t?t:ch),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(DA(t),cp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wo(e._repo,e._path,t,e._orderByCalled)}}class uz extends ll{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wo(e._repo,e._path,function l3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class cz extends ll{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wo(e._repo,e._path,function c3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class hz extends ll{constructor(e){super(),this._path=e}_apply(e){bA(e,"orderByChild");const t=new jn(this._path);if(dn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new lP(t),i=tA(e._queryParams,r);return cp(i),new Wo(e._repo,e._path,i,!0)}}class pz extends ll{_apply(e){bA(e,"orderByKey");const t=tA(e._queryParams,vc);return cp(t),new Wo(e._repo,e._path,t,!0)}}class mz extends ll{_apply(e){bA(e,"orderByPriority");const t=tA(e._queryParams,dr);return cp(t),new Wo(e._repo,e._path,t,!0)}}class yz extends ll{_apply(e){bA(e,"orderByValue");const t=tA(e._queryParams,cP);return cp(t),new Wo(e._repo,e._path,t,!0)}}class wz extends ll{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new JV(this._value,this._key)._apply(new eU(this._value,this._key)._apply(e))}}function cl(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function e4(n){(0,U.hu)(!dA,"__referenceConstructor has already been defined"),dA=n})(cu),function s4(n){(0,U.hu)(!fA,"__referenceConstructor has already been defined"),fA=n}(cu);const JP={};function nU(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ss("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=ZP(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=ZP(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new OI(OI.OWNER):new gG(n.name,n.options,e);RV("Invalid Firebase Database URL",l),dn(l.path)||yc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Dz(n,e,t,r){let i=JP[e.name];i||(i={},JP[e.name]=i);let a=i[n.toURLString()];return a&&yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new N4(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new pG(n.name,t));return new Sz(S,n)}class Sz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function P4(n,e,t){if(n.stats_=eP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nA(n.repoInfo_,(r,i,a,l)=>{kV(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>FV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fm(n.repoInfo_,e,(r,i,a,l)=>{kV(n,r,i,a,l)},r=>{FV(n,r)},r=>{!function O4(n,e){os(e,(t,r)=>{$P(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function yG(n,e){const t=n.toString();return JN[t]||(JN[t]=e()),JN[t]}(n.repoInfo_,()=>new y3(n.stats_,n.server_)),n.infoData_=new f3,n.infoSyncTree_=new vV({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=WI(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),$P(n,"connected",!1),n.serverSyncTree_=new vV({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);Sa(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cu(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function bz(n,e){const t=JP[e];(!t||t[n.key]!==n)&&yc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),VV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&yc("Cannot call "+e+" on a deleted database.")}}function rU(){DL.IS_TRANSPORT_INITIALIZED&&qs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Az(){rU(),np.forceDisallow()}function Mz(){rU(),Mv.forceDisallow(),np.forceAllow()}function Nz(n,e){sL(n,e)}const Oz={".sv":"timestamp"};class Lz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Pz(n){eL($i.SDK_VERSION),(0,$i._registerComponent)(new oo.wA("database",(e,{instanceIdentifier:t})=>nU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(XF,"0.14.4",n),(0,$i.registerVersion)(XF,"0.14.4","esm2017")}();const jz=new ys.Yd("@firebase/database-compat"),sU=function(n){jz.warn("FIREBASE WARNING: "+n)};class Gz{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,sU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class zz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class dp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),JI("DataSnapshot.child","path",e,!1),new dp(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),JI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new dp(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Aa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const l=Ms.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new dp(this.database,v),D)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return XP(this._delegate,h,m),t;case"child_added":return KV(this._delegate,h,m),t;case"child_removed":return QV(this._delegate,h,m),t;case"child_changed":return ZV(this._delegate,h,m),t;case"child_moved":return YV(this._delegate,h,m),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,XV(this._delegate,e,i)}else XV(this._delegate,e)}get(){return tz(this._delegate).then(e=>new dp(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const a=Ms.getCancelAndContextArgs_("Query.once",r,i),l=new U.BH,h=(v,D)=>{const S=new dp(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":XP(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":KV(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":QV(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":ZV(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":YV(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new Ms(this.database,cl(this._delegate,function lz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new uz(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new Ms(this.database,cl(this._delegate,function dz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cz(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new Ms(this.database,cl(this._delegate,function fz(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return JI("orderByChild","path",n,!1),new hz(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new Ms(this.database,cl(this._delegate,function gz(){return new pz}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new Ms(this.database,cl(this._delegate,function _z(){return new mz}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new Ms(this.database,cl(this._delegate,function vz(){return new yz}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new Ms(this.database,cl(this._delegate,function sz(n=null,e){return XI("startAt","key",e,!0),new eU(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new Ms(this.database,cl(this._delegate,function az(n,e){return XI("startAfter","key",e,!0),new oz(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new Ms(this.database,cl(this._delegate,function nz(n,e){return XI("endAt","key",e,!0),new JV(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new Ms(this.database,cl(this._delegate,function iz(n,e){return XI("endBefore","key",e,!0),new rz(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new Ms(this.database,cl(this._delegate,function Ez(n,e){return XI("equalTo","key",e,!0),new wz(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Aa(this.database,new cu(this._delegate._repo,this._delegate._path))}}class Aa extends Ms{constructor(e,t){super(e,new Wo(t._repo,t._path,new eA,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Aa(this.database,Hm(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Aa(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Aa(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=QP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,sU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lu("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=ez(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function J4(n,e,t){if(lu("setWithPriority",n._path),wc("setWithPriority",e,n._path,!1),HP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return GP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function Q4(n){return lu("remove",n._path),QP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Vz(n,e,t){var r;if(n=(0,U.m9)(n),lu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new U.BH,h=XP(n,()=>{});return function $4(n,e,t,r,i,a){Lv(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:nL(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=WP(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{QI("transaction failed: Data returned ",m,l.path),l.status=0;const v=_A(n.transactionQueueTree_,e),D=Bm(v)||[];let S;D.push(l),UP(v,D),"object"==typeof m&&null!==m&&(0,U.r3)(m,".priority")?(S=(0,U.DV)(m,".priority"),(0,U.hu)(YI(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(gA(n.serverSyncTree_,e)||en.EMPTY_NODE).getPriority().val();const N=eC(n),$=Br(m,S),Z=FP($,h,N);l.currentOutputSnapshotRaw=$,l.currentOutputSnapshotResolved=Z,l.currentWriteId=EA(n);const se=MP(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);Sa(n.eventQueue_,e,se),IA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new jm(D,new cu(n._repo,n._path),dr),a.resolve(new Lz(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new zz(a.committed,new dp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function X4(n,e){n=(0,U.m9)(n),lu("setPriority",n._path),HP("setPriority",e,!1);const t=new U.BH;return GP(n._repo,Ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function Y4(n,e){n=(0,U.m9)(n),lu("push",n._path),wc("push",e,n._path,!0);const t=OV(n._repo),r=Z4(t),i=Hm(n,r),a=Hm(n,r);let l;return l=null!=e?QP(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Aa(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Aa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return lu("Reference.onDisconnect",this._delegate._path),new Gz(new zV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class rC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Az,forceLongPolling:Mz}}useEmulator(e,t,r={}){!function iU(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&yc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new OI(OI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);a=new OI(l)}!function Cz(n,e,t,r){n.repoInfo_=new QN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Aa){const t=qV(this._delegate,e.toString());return new Aa(this,t)}{const t=WV(this._delegate,e);return new Aa(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=qV(this._delegate,e);return new Aa(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function Rz(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),VV(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function xz(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function H4(n){n.persistentConnection_&&n.persistentConnection_.resume(PV)}(n._repo)}(this._delegate)}}rC.ServerValue={TIMESTAMP:function kz(){return Oz}(),increment:n=>function Fz(n){return{".sv":{increment:n}}}(n)};var qz=Object.freeze({__proto__:null,initStandalone:function Wz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){eL(t);const l=new oo.zt("auth-internal",new oo.H0("database-standalone"));return l.setComponent(new oo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new rC(nU(n,l,void 0,e,a),n),namespace:i}}});const Kz=rC.ServerValue;function oU(n){return null==n}function aU(n){return"function"==typeof n.set}function uU(n,e){return aU(e)?e:n.ref(e)}function lU(n,e){if(function Yz(n){return"string"==typeof n}(n))return e.stringCase();if(aU(n))return e.firebaseCase();if(function Qz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function iC(n,e,t="on",r=zC.z){return new si.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,St.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Ak.B)())}function cU(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function e6(n,e){const{payload:t,prevKey:r,key:i}=e,a=cU(n,i),l=function Jz(n,e){if(oU(e))return 0;{const t=cU(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function dU(n){return(oU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function hU(n,e,t){return function Xz(n,e,t){return iC(n,"value","once",t).pipe((0,Gn.w)(r=>{const i=[(0,gt.of)(r)];return e.forEach(a=>i.push(iC(n,a,"on",t))),(0,Px.T)(...i).pipe(ts(e6,[]))}),(0,yM.x)())}(n,e=dU(e),t)}function fU(n,e,t){const r=(e=dU(e)).map(i=>iC(n,i,"on",t));return(0,Px.T)(...r)}function pU(n,e){return function(r,i){return lU(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function i6(n){return function(t){return t?lU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function gU(n,e){return function(){return iC(n,"value","on",e)}}!function Zz(n){n.INTERNAL.registerComponent(new oo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new rC(i,r)},"PUBLIC").setServiceProps({Reference:Aa,Query:Ms,Database:rC,DataSnapshot:dp,enableLogging:Nz,INTERNAL:qz,ServerValue:Kz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(yw.Z);const a6=new f.OlP("angularfire2.realtimeDatabaseURL"),u6=new f.OlP("angularfire2.database.use-emulator");let l6=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,N,$,Z,se,ce){this.schedulers=h;const We=m,ot=(0,Ei.on)(t,l,r);v&&lN(ot,l,D,N,$,Z,S,se),this.database=(0,Ei.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const He=l.runOutsideAngular(()=>ot.database(i||void 0));return We&&He.useEmulator(...We),He},[We])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>uU(this.database,t));let a=i;return r&&(a=r(i)),function s6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:pU(r,"update"),set:pU(r,"set"),push:i=>r.push(i),remove:i6(r),snapshotChanges:i=>hU(n,i,t).pipe(Cn.iC),stateChanges:i=>fU(n,i,t).pipe(Cn.iC),auditTrail:i=>function t6(n,e,t){return function r6(n,e,t){return function n6(n,e){return iC(n,"value","on",e).pipe((0,St.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function eG(...n){const e=(0,Li.jO)(n);return(0,oi.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Mu.Xf)(n[m]).subscribe((0,zr.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(Ji.y))&&(l=null))},J$.Z));t.subscribe((0,zr.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,St.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function tG(n){return(0,oi.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,zr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,St.U)(i=>i.actions))}(n,fU(n,e).pipe(ts((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,a)=>hU(n,i,t).pipe((0,St.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Cn.iC)}}(a,this)}object(t){return function o6(n,e){return{query:n,snapshotChanges:()=>gU(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>gU(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,St.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei.Dh),f.LFG(Ei.xv,8),f.LFG(a6,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(u6,8),f.LFG(Ev,8),f.LFG(rN,8),f.LFG(iN,8),f.LFG(sN,8),f.LFG(oN,8),f.LFG(aN,8),f.LFG(uN,8),f.LFG(wI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c6=(()=>{class n{constructor(){SS.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[l6]}),n})();const d6_firebase={apiKey:"AIzaSyC4fH0vmirk-ulB_G_sp1Nrr-jyqhRCn88",authDomain:"crud-60d7d.firebaseapp.com",projectId:"crud-60d7d",storageBucket:"crud-60d7d.appspot.com",messagingSenderId:"527168223332",appId:"1:527168223332:web:3c3f8f5c36816aca940771",measurementId:"G-ESZXCZFGY3"};class SA{}class AA{}class Ec{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ec?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ec;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ec?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class h6{encodeKey(e){return mU(e)}encodeValue(e){return mU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const p6=/%(\d[a-f0-9])/gi,g6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mU(n){return encodeURIComponent(n).replace(p6,(e,t)=>g6[t]??e)}function MA(n){return`${n}`}class hp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new h6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function f6(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(MA):[MA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new hp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(MA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(MA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class m6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _U(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yU(n){return typeof Blob<"u"&&n instanceof Blob}function vU(n){return typeof FormData<"u"&&n instanceof FormData}class sC{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ec),this.context||(this.context=new m6),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new hp,this.urlWithParams=t}serializeBody(){return null===this.body?null:_U(this.body)||yU(this.body)||vU(this.body)||function y6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof hp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vU(this.body)?null:yU(this.body)?this.body.type||null:_U(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof hp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,N)=>S.set(N,e.setHeaders[N]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,N)=>S.set(N,e.setParams[N]),v)),new sC(t,r,a,{params:v,headers:m,context:D,reportProgress:h,responseType:i,withCredentials:l})}}var Mi=(()=>((Mi=Mi||{})[Mi.Sent=0]="Sent",Mi[Mi.UploadProgress=1]="UploadProgress",Mi[Mi.ResponseHeader=2]="ResponseHeader",Mi[Mi.DownloadProgress=3]="DownloadProgress",Mi[Mi.Response=4]="Response",Mi[Mi.User=5]="User",Mi))();class eO{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ec,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class tO extends eO{constructor(e={}){super(e),this.type=Mi.ResponseHeader}clone(e={}){return new tO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Uv extends eO{constructor(e={}){super(e),this.type=Mi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Uv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wU extends eO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function nO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let v6=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof sC)a=t;else{let m,v;m=i.headers instanceof Ec?i.headers:new Ec(i.headers),i.params&&(v=i.params instanceof hp?i.params:new hp({fromObject:i.params})),a=new sC(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,gt.of)(a).pipe(Ui(m=>this.handler.handle(m)));if(t instanceof sC||"events"===i.observe)return l;const h=l.pipe(es(m=>m instanceof Uv));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,St.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,St.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,St.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,St.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new hp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,nO(i,r))}post(t,r,i={}){return this.request("POST",t,nO(i,r))}put(t,r,i={}){return this.request("PUT",t,nO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(SA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function CU(n,e){return e(n)}function E6(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const C6=new f.OlP(""),oC=new f.OlP(""),bU=new f.OlP("");function b6(){let n=null;return(e,t)=>{null===n&&(n=((0,f.f3M)(C6,{optional:!0})??[]).reduceRight(E6,CU));const r=(0,f.f3M)(f.HDt),i=r.add();return n(e,t).pipe(aa(()=>r.remove(i)))}}let DU=(()=>{class n extends SA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,f.f3M)(f.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(oC),...this.injector.get(bU,[])]));this.chain=i.reduceRight((a,l)=>function I6(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),CU)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(aa(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(AA),f.LFG(f.lqb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const A6=/^\)\]\}',?\n/;let SU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new f.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,un.D)(r.\u0275loadImpl()):(0,gt.of)(null)).pipe((0,Gn.w)(()=>new si.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((se,ce)=>l.setRequestHeader(se,ce.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const se=t.detectContentTypeHeader();null!==se&&l.setRequestHeader("Content-Type",se)}if(t.responseType){const se=t.responseType.toLowerCase();l.responseType="json"!==se?se:"text"}const h=t.serializeBody();let m=null;const v=()=>{if(null!==m)return m;const se=l.statusText||"OK",ce=new Ec(l.getAllResponseHeaders()),We=function M6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return m=new tO({headers:ce,status:l.status,statusText:se,url:We}),m},D=()=>{let{headers:se,status:ce,statusText:We,url:ot}=v(),He=null;204!==ce&&(He=typeof l.response>"u"?l.responseText:l.response),0===ce&&(ce=He?200:0);let at=ce>=200&&ce<300;if("json"===t.responseType&&"string"==typeof He){const Ot=He;He=He.replace(A6,"");try{He=""!==He?JSON.parse(He):null}catch(Zt){He=Ot,at&&(at=!1,He={error:Zt,text:He})}}at?(a.next(new Uv({body:He,headers:se,status:ce,statusText:We,url:ot||void 0})),a.complete()):a.error(new wU({error:He,headers:se,status:ce,statusText:We,url:ot||void 0}))},S=se=>{const{url:ce}=v(),We=new wU({error:se,status:l.status||0,statusText:l.statusText||"Unknown Error",url:ce||void 0});a.error(We)};let N=!1;const $=se=>{N||(a.next(v()),N=!0);let ce={type:Mi.DownloadProgress,loaded:se.loaded};se.lengthComputable&&(ce.total=se.total),"text"===t.responseType&&l.responseText&&(ce.partialText=l.responseText),a.next(ce)},Z=se=>{let ce={type:Mi.UploadProgress,loaded:se.loaded};se.lengthComputable&&(ce.total=se.total),a.next(ce)};return l.addEventListener("load",D),l.addEventListener("error",S),l.addEventListener("timeout",S),l.addEventListener("abort",S),t.reportProgress&&(l.addEventListener("progress",$),null!==h&&l.upload&&l.upload.addEventListener("progress",Z)),l.send(h),a.next({type:Mi.Sent}),()=>{l.removeEventListener("error",S),l.removeEventListener("abort",S),l.removeEventListener("load",D),l.removeEventListener("timeout",S),t.reportProgress&&(l.removeEventListener("progress",$),null!==h&&l.upload&&l.upload.removeEventListener("progress",Z)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(kr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const rO=new f.OlP("XSRF_ENABLED"),AU=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),MU=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class RU{}let N6=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve),f.LFG(f.Lbi),f.LFG(AU))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function P6(n,e){const t=n.url.toLowerCase();if(!(0,f.f3M)(rO)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,f.f3M)(RU).getToken(),i=(0,f.f3M)(MU);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Mr=(()=>((Mr=Mr||{})[Mr.Interceptors=0]="Interceptors",Mr[Mr.LegacyInterceptors=1]="LegacyInterceptors",Mr[Mr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Mr[Mr.NoXsrfProtection=3]="NoXsrfProtection",Mr[Mr.JsonpSupport=4]="JsonpSupport",Mr[Mr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Mr[Mr.Fetch=6]="Fetch",Mr))();function $m(n,e){return{\u0275kind:n,\u0275providers:e}}function O6(...n){const e=[v6,SU,DU,{provide:SA,useExisting:DU},{provide:AA,useExisting:SU},{provide:oC,useValue:P6,multi:!0},{provide:rO,useValue:!0},{provide:RU,useClass:N6}];for(const t of n)e.push(...t.\u0275providers);return(0,f.MR2)(e)}const xU=new f.OlP("LEGACY_INTERCEPTOR_FN");let F6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[O6($m(Mr.LegacyInterceptors,[{provide:xU,useFactory:b6},{provide:oC,useExisting:xU,multi:!0}]))]}),n})(),H6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[X$]}),n.\u0275inj=f.cJS({providers:[Iv],imports:[qc,Q$,Ei.hO.initializeApp(d6_firebase),BB,KB,jH,c6,B$,j$,F6]}),n})();Nl().bootstrapModule(H6).catch(n=>console.error(n))},5619:(mt,Ae,L)=>{L.d(Ae,{X:()=>H});var f=L(8645);class H extends f.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const ae=super._subscribe(J);return!ae.closed&&J.next(this._value),ae}getValue(){const{hasError:J,thrownError:ae,_value:ve}=this;if(J)throw ae;return this._throwIfClosed(),ve}next(J){super.next(this._value=J)}}},5592:(mt,Ae,L)=>{L.d(Ae,{y:()=>xe});var f=L(305),H=L(7394),O=L(4850),J=L(8407),ae=L(2653),ve=L(4674),Ee=L(1441);let xe=(()=>{class ie{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ke=new ie;return Ke.source=this,Ke.operator=Ne,Ke}subscribe(Ne,Ke,Oe){const Ze=function q(ie){return ie&&ie instanceof f.Lv||function z(ie){return ie&&(0,ve.m)(ie.next)&&(0,ve.m)(ie.error)&&(0,ve.m)(ie.complete)}(ie)&&(0,H.Nn)(ie)}(Ne)?Ne:new f.Hp(Ne,Ke,Oe);return(0,Ee.x)(()=>{const{operator:Fe,source:Ct}=this;Ze.add(Fe?Fe.call(Ze,Ct):Ct?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ke){Ne.error(Ke)}}forEach(Ne,Ke){return new(Ke=we(Ke))((Oe,Ze)=>{const Fe=new f.Hp({next:Ct=>{try{Ne(Ct)}catch(ht){Ze(ht),Fe.unsubscribe()}},error:Ze,complete:Oe});this.subscribe(Fe)})}_subscribe(Ne){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Ne)}[O.L](){return this}pipe(...Ne){return(0,J.U)(Ne)(this)}toPromise(Ne){return new(Ne=we(Ne))((Ke,Oe)=>{let Ze;this.subscribe(Fe=>Ze=Fe,Fe=>Oe(Fe),()=>Ke(Ze))})}}return ie.create=Le=>new ie(Le),ie})();function we(ie){var Le;return null!==(Le=ie??ae.config.Promise)&&void 0!==Le?Le:Promise}},8645:(mt,Ae,L)=>{L.d(Ae,{x:()=>Ee});var f=L(5592),H=L(7394);const J=(0,L(2306).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=L(9039),ve=L(1441);let Ee=(()=>{class we extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ie=new xe(this,this);return ie.operator=q,ie}_throwIfClosed(){if(this.closed)throw new J}next(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(q)}})}error(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ie,isStopped:Le,observers:Ne}=this;return ie||Le?H.Lc:(this.currentObservers=null,Ne.push(q),new H.w0(()=>{this.currentObservers=null,(0,ae.P)(Ne,q)}))}_checkFinalizedStatuses(q){const{hasError:ie,thrownError:Le,isStopped:Ne}=this;ie?q.error(Le):Ne&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return we.create=(z,q)=>new xe(z,q),we})();class xe extends Ee{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ie||ie.call(q,z)}error(z){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ie||ie.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ie;return null!==(ie=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ie?ie:H.Lc}}},305:(mt,Ae,L)=>{L.d(Ae,{Hp:()=>Oe,Lv:()=>ie});var f=L(4674),H=L(7394),O=L(2653),J=L(3894),ae=L(2420);const ve=we("C",void 0,void 0);function we(re,De,ue){return{kind:re,value:De,error:ue}}var z=L(7599),q=L(1441);class ie extends H.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,H.Nn)(De)&&De.add(this)):this.destination=ht}static create(De,ue,ye){return new Oe(De,ue,ye)}next(De){this.isStopped?Ct(function xe(re){return we("N",re,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ct(function Ee(re){return we("E",void 0,re)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ct(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ne(re,De){return Le.call(re,De)}class Ke{constructor(De){this.partialObserver=De}next(De){const{partialObserver:ue}=this;if(ue.next)try{ue.next(De)}catch(ye){Ze(ye)}}error(De){const{partialObserver:ue}=this;if(ue.error)try{ue.error(De)}catch(ye){Ze(ye)}else Ze(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(ue){Ze(ue)}}}class Oe extends ie{constructor(De,ue,ye){let ke;if(super(),(0,f.m)(De)||!De)ke={next:De??void 0,error:ue??void 0,complete:ye??void 0};else{let te;this&&O.config.useDeprecatedNextContext?(te=Object.create(De),te.unsubscribe=()=>this.unsubscribe(),ke={next:De.next&&Ne(De.next,te),error:De.error&&Ne(De.error,te),complete:De.complete&&Ne(De.complete,te)}):ke=De}this.destination=new Ke(ke)}}function Ze(re){O.config.useDeprecatedSynchronousErrorHandling?(0,q.O)(re):(0,J.h)(re)}function Ct(re,De){const{onStoppedNotification:ue}=O.config;ue&&z.z.setTimeout(()=>ue(re,De))}const ht={closed:!0,next:ae.Z,error:function Fe(re){throw re},complete:ae.Z}},7394:(mt,Ae,L)=>{L.d(Ae,{Lc:()=>ve,w0:()=>ae,Nn:()=>Ee});var f=L(4674);const O=(0,L(2306).d)(we=>function(q){we(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ie,Le)=>`${Le+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var J=L(9039);class ae{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ne of q)Ne.remove(this);else q.remove(this);const{initialTeardown:ie}=this;if((0,f.m)(ie))try{ie()}catch(Ne){z=Ne instanceof O?Ne.errors:[Ne]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ne of Le)try{xe(Ne)}catch(Ke){z=z??[],Ke instanceof O?z=[...z,...Ke.errors]:z.push(Ke)}}if(z)throw new O(z)}}add(z){var q;if(z&&z!==this)if(this.closed)xe(z);else{if(z instanceof ae){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,J.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,J.P)(q,z),z instanceof ae&&z._removeParent(this)}}ae.EMPTY=(()=>{const we=new ae;return we.closed=!0,we})();const ve=ae.EMPTY;function Ee(we){return we instanceof ae||we&&"closed"in we&&(0,f.m)(we.remove)&&(0,f.m)(we.add)&&(0,f.m)(we.unsubscribe)}function xe(we){(0,f.m)(we)?we():we.unsubscribe()}},2653:(mt,Ae,L)=>{L.d(Ae,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(mt,Ae,L)=>{L.d(Ae,{E:()=>H});const H=new(L(5592).y)(ae=>ae.complete())},2459:(mt,Ae,L)=>{L.d(Ae,{D:()=>De});var f=L(4829),H=L(3093),O=L(5137),ve=L(5592),xe=L(4971),we=L(4674),z=L(7103);function ie(ue,ye){if(!ue)throw new Error("Iterable cannot be null");return new ve.y(ke=>{(0,z.f)(ke,ye,()=>{const te=ue[Symbol.asyncIterator]();(0,z.f)(ke,ye,()=>{te.next().then(nt=>{nt.done?ke.complete():ke.next(nt.value)})},0,!0)})})}var Le=L(8382),Ne=L(4026),Ke=L(4266),Oe=L(3664),Ze=L(5726),Fe=L(9853),Ct=L(541);function De(ue,ye){return ye?function re(ue,ye){if(null!=ue){if((0,Le.c)(ue))return function J(ue,ye){return(0,f.Xf)(ue).pipe((0,O.R)(ye),(0,H.Q)(ye))}(ue,ye);if((0,Ke.z)(ue))return function Ee(ue,ye){return new ve.y(ke=>{let te=0;return ye.schedule(function(){te===ue.length?ke.complete():(ke.next(ue[te++]),ke.closed||this.schedule())})})}(ue,ye);if((0,Ne.t)(ue))return function ae(ue,ye){return(0,f.Xf)(ue).pipe((0,O.R)(ye),(0,H.Q)(ye))}(ue,ye);if((0,Ze.D)(ue))return ie(ue,ye);if((0,Oe.T)(ue))return function q(ue,ye){return new ve.y(ke=>{let te;return(0,z.f)(ke,ye,()=>{te=ue[xe.h](),(0,z.f)(ke,ye,()=>{let nt,Ge;try{({value:nt,done:Ge}=te.next())}catch(tn){return void ke.error(tn)}Ge?ke.complete():ke.next(nt)},0,!0)}),()=>(0,we.m)(te?.return)&&te.return()})}(ue,ye);if((0,Ct.L)(ue))return function ht(ue,ye){return ie((0,Ct.Q)(ue),ye)}(ue,ye)}throw(0,Fe.z)(ue)}(ue,ye):(0,f.Xf)(ue)}},4829:(mt,Ae,L)=>{L.d(Ae,{Xf:()=>Le});var f=L(7582),H=L(4266),O=L(4026),J=L(5592),ae=L(8382),ve=L(5726),Ee=L(9853),xe=L(3664),we=L(541),z=L(4674),q=L(3894),ie=L(4850);function Le(re){if(re instanceof J.y)return re;if(null!=re){if((0,ae.c)(re))return function Ne(re){return new J.y(De=>{const ue=re[ie.L]();if((0,z.m)(ue.subscribe))return ue.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,H.z)(re))return function Ke(re){return new J.y(De=>{for(let ue=0;ue<re.length&&!De.closed;ue++)De.next(re[ue]);De.complete()})}(re);if((0,O.t)(re))return function Oe(re){return new J.y(De=>{re.then(ue=>{De.closed||(De.next(ue),De.complete())},ue=>De.error(ue)).then(null,q.h)})}(re);if((0,ve.D)(re))return Fe(re);if((0,xe.T)(re))return function Ze(re){return new J.y(De=>{for(const ue of re)if(De.next(ue),De.closed)return;De.complete()})}(re);if((0,we.L)(re))return function Ct(re){return Fe((0,we.Q)(re))}(re)}throw(0,Ee.z)(re)}function Fe(re){return new J.y(De=>{(function ht(re,De){var ue,ye,ke,te;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ue=(0,f.KL)(re);!(ye=yield ue.next()).done;)if(De.next(ye.value),De.closed)return}catch(nt){ke={error:nt}}finally{try{ye&&!ye.done&&(te=ue.return)&&(yield te.call(ue))}finally{if(ke)throw ke.error}}De.complete()})})(re,De).catch(ue=>De.error(ue))})}},3019:(mt,Ae,L)=>{L.d(Ae,{T:()=>ve});var f=L(7537),H=L(4829),O=L(6232),J=L(4564),ae=L(2459);function ve(...Ee){const xe=(0,J.yG)(Ee),we=(0,J._6)(Ee,1/0),z=Ee;return z.length?1===z.length?(0,H.Xf)(z[0]):(0,f.J)(we)((0,ae.D)(z,xe)):O.E}},2096:(mt,Ae,L)=>{L.d(Ae,{of:()=>O});var f=L(4564),H=L(2459);function O(...J){const ae=(0,f.yG)(J);return(0,H.D)(J,ae)}},8251:(mt,Ae,L)=>{L.d(Ae,{x:()=>H});var f=L(305);function H(J,ae,ve,Ee,xe){return new O(J,ae,ve,Ee,xe)}class O extends f.Lv{constructor(ae,ve,Ee,xe,we,z){super(ae),this.onFinalize=we,this.shouldUnsubscribe=z,this._next=ve?function(q){try{ve(q)}catch(ie){ae.error(ie)}}:super._next,this._error=xe?function(q){try{xe(q)}catch(ie){ae.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(q){ae.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},3997:(mt,Ae,L)=>{L.d(Ae,{x:()=>J});var f=L(2737),H=L(9360),O=L(8251);function J(ve,Ee=f.y){return ve=ve??ae,(0,H.e)((xe,we)=>{let z,q=!0;xe.subscribe((0,O.x)(we,ie=>{const Le=Ee(ie);(q||!ve(z,Le))&&(q=!1,z=Le,we.next(ie))}))})}function ae(ve,Ee){return ve===Ee}},7398:(mt,Ae,L)=>{L.d(Ae,{U:()=>O});var f=L(9360),H=L(8251);function O(J,ae){return(0,f.e)((ve,Ee)=>{let xe=0;ve.subscribe((0,H.x)(Ee,we=>{Ee.next(J.call(ae,we,xe++))}))})}},7537:(mt,Ae,L)=>{L.d(Ae,{J:()=>O});var f=L(1631),H=L(2737);function O(J=1/0){return(0,f.z)(H.y,J)}},1631:(mt,Ae,L)=>{L.d(Ae,{z:()=>xe});var f=L(7398),H=L(4829),O=L(9360),J=L(7103),ae=L(8251),Ee=L(4674);function xe(we,z,q=1/0){return(0,Ee.m)(z)?xe((ie,Le)=>(0,f.U)((Ne,Ke)=>z(ie,Ne,Le,Ke))((0,H.Xf)(we(ie,Le))),q):("number"==typeof z&&(q=z),(0,O.e)((ie,Le)=>function ve(we,z,q,ie,Le,Ne,Ke,Oe){const Ze=[];let Fe=0,Ct=0,ht=!1;const re=()=>{ht&&!Ze.length&&!Fe&&z.complete()},De=ye=>Fe<ie?ue(ye):Ze.push(ye),ue=ye=>{Ne&&z.next(ye),Fe++;let ke=!1;(0,H.Xf)(q(ye,Ct++)).subscribe((0,ae.x)(z,te=>{Le?.(te),Ne?De(te):z.next(te)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Fe--;Ze.length&&Fe<ie;){const te=Ze.shift();Ke?(0,J.f)(z,Ke,()=>ue(te)):ue(te)}re()}catch(te){z.error(te)}}))};return we.subscribe((0,ae.x)(z,De,()=>{ht=!0,re()})),()=>{Oe?.()}}(ie,Le,we,q)))}},3093:(mt,Ae,L)=>{L.d(Ae,{Q:()=>J});var f=L(7103),H=L(9360),O=L(8251);function J(ae,ve=0){return(0,H.e)((Ee,xe)=>{Ee.subscribe((0,O.x)(xe,we=>(0,f.f)(xe,ae,()=>xe.next(we),ve),()=>(0,f.f)(xe,ae,()=>xe.complete(),ve),we=>(0,f.f)(xe,ae,()=>xe.error(we),ve)))})}},3020:(mt,Ae,L)=>{L.d(Ae,{B:()=>ae});var f=L(4829),H=L(8645),O=L(305),J=L(9360);function ae(Ee={}){const{connector:xe=(()=>new H.x),resetOnError:we=!0,resetOnComplete:z=!0,resetOnRefCountZero:q=!0}=Ee;return ie=>{let Le,Ne,Ke,Oe=0,Ze=!1,Fe=!1;const Ct=()=>{Ne?.unsubscribe(),Ne=void 0},ht=()=>{Ct(),Le=Ke=void 0,Ze=Fe=!1},re=()=>{const De=Le;ht(),De?.unsubscribe()};return(0,J.e)((De,ue)=>{Oe++,!Fe&&!Ze&&Ct();const ye=Ke=Ke??xe();ue.add(()=>{Oe--,0===Oe&&!Fe&&!Ze&&(Ne=ve(re,q))}),ye.subscribe(ue),!Le&&Oe>0&&(Le=new O.Hp({next:ke=>ye.next(ke),error:ke=>{Fe=!0,Ct(),Ne=ve(ht,we,ke),ye.error(ke)},complete:()=>{Ze=!0,Ct(),Ne=ve(ht,z),ye.complete()}}),(0,f.Xf)(De).subscribe(Le))})(ie)}}function ve(Ee,xe,...we){if(!0===xe)return void Ee();if(!1===xe)return;const z=new O.Hp({next:()=>{z.unsubscribe(),Ee()}});return(0,f.Xf)(xe(...we)).subscribe(z)}},5137:(mt,Ae,L)=>{L.d(Ae,{R:()=>H});var f=L(9360);function H(O,J=0){return(0,f.e)((ae,ve)=>{ve.add(O.schedule(()=>ae.subscribe(ve),J))})}},4664:(mt,Ae,L)=>{L.d(Ae,{w:()=>J});var f=L(4829),H=L(9360),O=L(8251);function J(ae,ve){return(0,H.e)((Ee,xe)=>{let we=null,z=0,q=!1;const ie=()=>q&&!we&&xe.complete();Ee.subscribe((0,O.x)(xe,Le=>{we?.unsubscribe();let Ne=0;const Ke=z++;(0,f.Xf)(ae(Le,Ke)).subscribe(we=(0,O.x)(xe,Oe=>xe.next(ve?ve(Le,Oe,Ke,Ne++):Oe),()=>{we=null,ie()}))},()=>{q=!0,ie()}))})}},9397:(mt,Ae,L)=>{L.d(Ae,{b:()=>ae});var f=L(4674),H=L(9360),O=L(8251),J=L(2737);function ae(ve,Ee,xe){const we=(0,f.m)(ve)||Ee||xe?{next:ve,error:Ee,complete:xe}:ve;return we?(0,H.e)((z,q)=>{var ie;null===(ie=we.subscribe)||void 0===ie||ie.call(we);let Le=!0;z.subscribe((0,O.x)(q,Ne=>{var Ke;null===(Ke=we.next)||void 0===Ke||Ke.call(we,Ne),q.next(Ne)},()=>{var Ne;Le=!1,null===(Ne=we.complete)||void 0===Ne||Ne.call(we),q.complete()},Ne=>{var Ke;Le=!1,null===(Ke=we.error)||void 0===Ke||Ke.call(we,Ne),q.error(Ne)},()=>{var Ne,Ke;Le&&(null===(Ne=we.unsubscribe)||void 0===Ne||Ne.call(we)),null===(Ke=we.finalize)||void 0===Ke||Ke.call(we)}))}):J.y}},1954:(mt,Ae,L)=>{L.d(Ae,{o:()=>ae});var f=L(7394);class H extends f.w0{constructor(Ee,xe){super()}schedule(Ee,xe=0){return this}}const O={setInterval(ve,Ee,...xe){const{delegate:we}=O;return we?.setInterval?we.setInterval(ve,Ee,...xe):setInterval(ve,Ee,...xe)},clearInterval(ve){const{delegate:Ee}=O;return(Ee?.clearInterval||clearInterval)(ve)},delegate:void 0};var J=L(9039);class ae extends H{constructor(Ee,xe){super(Ee,xe),this.scheduler=Ee,this.work=xe,this.pending=!1}schedule(Ee,xe=0){var we;if(this.closed)return this;this.state=Ee;const z=this.id,q=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(q,z,xe)),this.pending=!0,this.delay=xe,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(q,this.id,xe),this}requestAsyncId(Ee,xe,we=0){return O.setInterval(Ee.flush.bind(Ee,this),we)}recycleAsyncId(Ee,xe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return xe;null!=xe&&O.clearInterval(xe)}execute(Ee,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ee,xe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,xe){let z,we=!1;try{this.work(Ee)}catch(q){we=!0,z=q||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:xe}=this,{actions:we}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(we,this),null!=Ee&&(this.id=this.recycleAsyncId(xe,Ee,null)),this.delay=null,super.unsubscribe()}}}},2631:(mt,Ae,L)=>{L.d(Ae,{v:()=>O});var f=L(4552);class H{constructor(ae,ve=H.now){this.schedulerActionCtor=ae,this.now=ve}schedule(ae,ve=0,Ee){return new this.schedulerActionCtor(this,ae).schedule(Ee,ve)}}H.now=f.l.now;class O extends H{constructor(ae,ve=H.now){super(ae,ve),this.actions=[],this._active=!1}flush(ae){const{actions:ve}=this;if(this._active)return void ve.push(ae);let Ee;this._active=!0;do{if(Ee=ae.execute(ae.state,ae.delay))break}while(ae=ve.shift());if(this._active=!1,Ee){for(;ae=ve.shift();)ae.unsubscribe();throw Ee}}}},6321:(mt,Ae,L)=>{L.d(Ae,{z:()=>O});var f=L(1954);const O=new(L(2631).v)(f.o)},4552:(mt,Ae,L)=>{L.d(Ae,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(mt,Ae,L)=>{L.d(Ae,{z:()=>f});const f={setTimeout(H,O,...J){const{delegate:ae}=f;return ae?.setTimeout?ae.setTimeout(H,O,...J):setTimeout(H,O,...J)},clearTimeout(H){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(H)},delegate:void 0}},4971:(mt,Ae,L)=>{L.d(Ae,{h:()=>H});const H=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(mt,Ae,L)=>{L.d(Ae,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(mt,Ae,L)=>{L.d(Ae,{_6:()=>ve,jO:()=>J,yG:()=>ae});var f=L(4674);function O(Ee){return Ee[Ee.length-1]}function J(Ee){return(0,f.m)(O(Ee))?Ee.pop():void 0}function ae(Ee){return function H(Ee){return Ee&&(0,f.m)(Ee.schedule)}(O(Ee))?Ee.pop():void 0}function ve(Ee,xe){return"number"==typeof O(Ee)?Ee.pop():xe}},9039:(mt,Ae,L)=>{function f(H,O){if(H){const J=H.indexOf(O);0<=J&&H.splice(J,1)}}L.d(Ae,{P:()=>f})},2306:(mt,Ae,L)=>{function f(H){const J=H(ae=>{Error.call(ae),ae.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}L.d(Ae,{d:()=>f})},1441:(mt,Ae,L)=>{L.d(Ae,{O:()=>J,x:()=>O});var f=L(2653);let H=null;function O(ae){if(f.config.useDeprecatedSynchronousErrorHandling){const ve=!H;if(ve&&(H={errorThrown:!1,error:null}),ae(),ve){const{errorThrown:Ee,error:xe}=H;if(H=null,Ee)throw xe}}else ae()}function J(ae){f.config.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=ae)}},7103:(mt,Ae,L)=>{function f(H,O,J,ae=0,ve=!1){const Ee=O.schedule(function(){J(),ve?H.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(H.add(Ee),!ve)return Ee}L.d(Ae,{f:()=>f})},2737:(mt,Ae,L)=>{function f(H){return H}L.d(Ae,{y:()=>f})},4266:(mt,Ae,L)=>{L.d(Ae,{z:()=>f});const f=H=>H&&"number"==typeof H.length&&"function"!=typeof H},5726:(mt,Ae,L)=>{L.d(Ae,{D:()=>H});var f=L(4674);function H(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},4674:(mt,Ae,L)=>{function f(H){return"function"==typeof H}L.d(Ae,{m:()=>f})},8382:(mt,Ae,L)=>{L.d(Ae,{c:()=>O});var f=L(4850),H=L(4674);function O(J){return(0,H.m)(J[f.L])}},3664:(mt,Ae,L)=>{L.d(Ae,{T:()=>O});var f=L(4971),H=L(4674);function O(J){return(0,H.m)(J?.[f.h])}},4026:(mt,Ae,L)=>{L.d(Ae,{t:()=>H});var f=L(4674);function H(O){return(0,f.m)(O?.then)}},541:(mt,Ae,L)=>{L.d(Ae,{L:()=>J,Q:()=>O});var f=L(7582),H=L(4674);function O(ae){return(0,f.FC)(this,arguments,function*(){const Ee=ae.getReader();try{for(;;){const{value:xe,done:we}=yield(0,f.qq)(Ee.read());if(we)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(xe)}}finally{Ee.releaseLock()}})}function J(ae){return(0,H.m)(ae?.getReader)}},9360:(mt,Ae,L)=>{L.d(Ae,{A:()=>H,e:()=>O});var f=L(4674);function H(J){return(0,f.m)(J?.lift)}function O(J){return ae=>{if(H(ae))return ae.lift(function(ve){try{return J(ve,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(mt,Ae,L)=>{function f(){}L.d(Ae,{Z:()=>f})},8407:(mt,Ae,L)=>{L.d(Ae,{U:()=>O,z:()=>H});var f=L(2737);function H(...J){return O(J)}function O(J){return 0===J.length?f.y:1===J.length?J[0]:function(ve){return J.reduce((Ee,xe)=>xe(Ee),ve)}}},3894:(mt,Ae,L)=>{L.d(Ae,{h:()=>O});var f=L(2653),H=L(7599);function O(J){H.z.setTimeout(()=>{const{onUnhandledError:ae}=f.config;if(!ae)throw J;ae(J)})}},9853:(mt,Ae,L)=>{function f(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ae,{z:()=>f})},5879:(mt,Ae,L)=>{L.d(Ae,{$8M:()=>Bs,$WT:()=>Zs,$Z:()=>Bw,AFp:()=>mM,AaK:()=>ie,BQk:()=>Wn,CHM:()=>zc,CRH:()=>aT,EJc:()=>WR,EpF:()=>mr,F4k:()=>bg,FYo:()=>k_,FiY:()=>to,GfV:()=>ZC,Gpc:()=>Ke,HDt:()=>Qy,JOm:()=>Za,KtG:()=>Rl,LFG:()=>Ln,Lbi:()=>GC,Lck:()=>QE,MAs:()=>$b,MMx:()=>JE,MR2:()=>FC,NdJ:()=>Dg,Ojb:()=>Cn,OlP:()=>In,Oqu:()=>TE,P3R:()=>cM,PXZ:()=>JR,Q6J:()=>mE,QGY:()=>Xe,Qsj:()=>Dw,R0b:()=>Si,RDi:()=>nf,Rgc:()=>Qg,SBq:()=>vd,Sil:()=>KR,Suo:()=>y0,TTD:()=>Dl,TgZ:()=>Ig,VuI:()=>mx,X6Q:()=>nx,XFs:()=>Ye,Xpm:()=>Ra,Xq5:()=>lE,Xts:()=>A_,Y36:()=>Ed,YKP:()=>HD,YNc:()=>it,Yjl:()=>gp,Yz7:()=>Ut,Z0I:()=>pn,ZZ4:()=>_m,_Bn:()=>jD,_UZ:()=>Gb,_c5:()=>cx,_uU:()=>tu,aQg:()=>X0,c2e:()=>TT,cJS:()=>Hn,cg1:()=>OE,dDg:()=>P0,dqk:()=>qt,eFA:()=>sv,eJc:()=>jy,ekj:()=>bE,eoX:()=>pm,f3M:()=>Jt,g9A:()=>_M,h0i:()=>kf,hGG:()=>eI,iGM:()=>_0,ifc:()=>Et,ip1:()=>lm,jDz:()=>ba,kL8:()=>kE,lG2:()=>pl,lqb:()=>gd,lri:()=>tv,n5z:()=>Dr,oAB:()=>pu,oxw:()=>yE,q4F:()=>hf,qFp:()=>mv,qLn:()=>Kl,qOj:()=>uE,qZA:()=>fy,rWj:()=>NT,rg0:()=>Km,sBO:()=>rx,s_b:()=>Uy,soG:()=>fi,tb:()=>F0,tp0:()=>ai,uIk:()=>Hu,vHH:()=>re,vpe:()=>Da,wAp:()=>Pt,xp6:()=>eb,ynx:()=>Cg,z2F:()=>ih,zSh:()=>BC,zs3:()=>Fo});var f=L(8645),H=L(7394),O=L(5619),J=L(5592),ae=L(3019),ve=L(2096),Ee=L(3020),xe=L(4664),we=L(3997);function z(s){for(let o in s)if(s[o]===z)return o;throw Error("Could not find renamed property on target object.")}function q(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Ne=z({__forward_ref__:z});function Ke(s){return s.__forward_ref__=Ke,s.toString=function(){return ie(this())},s}function Oe(s){return Ze(s)?s():s}function Ze(s){return"function"==typeof s&&s.hasOwnProperty(Ne)&&s.__forward_ref__===Ke}function Fe(s){return s&&!!s.\u0275providers}const ht="https://g.co/ng/security#xss";class re extends Error{constructor(o,u){super(function De(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ue(s){return"string"==typeof s?s:null==s?"":String(s)}function Ge(s,o){throw new re(-201,!1)}function Je(s,o){null==s&&function ut(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Ut(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Hn(s){return{providers:s.providers||[],imports:s.imports||[]}}function On(s){return tr(s,Rr)||tr(s,Jr)}function pn(s){return null!==On(s)}function tr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ki(s){return s&&(s.hasOwnProperty(qn)||s.hasOwnProperty(xs))?s[qn]:null}const Rr=z({\u0275prov:z}),qn=z({\u0275inj:z}),Jr=z({ngInjectableDef:z}),xs=z({ngInjectorDef:z});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let ft;function Xt(s){const o=ft;return ft=s,o}function lr(s,o,u){const c=On(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ye.Optional?null:void 0!==o?o:void Ge(ie(s))}const qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Ft="__NG_DI_FLAG__",kn="ngTempTokenPath",Ns=/\n/gm,Kn="__source";let Dn;function Fn(s){const o=Dn;return Dn=s,o}function cr(s,o=Ye.Default){if(void 0===Dn)throw new re(-203,!1);return null===Dn?lr(s,void 0,o):Dn.get(s,o&Ye.Optional?null:void 0,o)}function Ln(s,o=Ye.Default){return(function wt(){return ft}()||cr)(Oe(s),o)}function Jt(s,o=Ye.Default){return Ln(s,W(o))}function W(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function G(s){const o=[];for(let u=0;u<s.length;u++){const c=Oe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let d,p=Ye.Default;for(let y=0;y<c.length;y++){const E=c[y],b=V(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(Ln(d,p))}else o.push(Ln(c))}return o}function F(s,o){return s[Ft]=o,s.prototype[Ft]=o,s}function V(s){return s[Ft]}function Ie(s){return{toString:s}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),Et=(()=>{return(s=Et||(Et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Et;var s})();const yt={},pt=[],Rt=z({\u0275cmp:z}),wn=z({\u0275dir:z}),Bt=z({\u0275pipe:z}),Er=z({\u0275mod:z}),Nr=z({\u0275fac:z}),_e=z({__NG_ELEMENT_ID__:z}),oe=z({__NG_ENV_ID__:z});function Ve(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}function _t(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,p)}else{const p=d,y=u[++c];Gt(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function xt(s){return 3===s||4===s||6===s}function Gt(s){return 64===s.charCodeAt(0)}function sn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Ir(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Ir(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}const Zn="ng-template";function vo(s,o,u){let c=0,d=!0;for(;c<s.length;){let p=s[c++];if("string"==typeof p&&d){const y=s[c++];if(u&&"class"===p&&-1!==Ve(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<s.length&&"string"==typeof(p=s[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function qo(s){return 4===s.type&&s.value!==Zn}function du(s,o,u){return o===(4!==s.type||u?s.value:Zn)}function hh(s,o,u){let c=4;const d=s.attrs||[],p=function dl(s){for(let o=0;o<s.length;o++)if(xt(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!du(s,b,u)||""===b&&1===o.length){if(mi(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!vo(s.attrs,A,u)){if(mi(c))return!1;y=!0}continue}const j=wo(8&c?"class":b,d,qo(s),u);if(-1===j){if(mi(c))return!1;y=!0;continue}if(""!==A){let Y;Y=j>p?"":d[j+1].toLowerCase();const ne=8&c?Y:null;if(ne&&-1!==Ve(ne,A,0)||2&c&&A!==Y){if(mi(c))return!1;y=!0}}}}else{if(!y&&!mi(c)&&!mi(b))return!1;if(y&&mi(b))continue;y=!1,c=b|1&c}}return mi(c)||y}function mi(s){return 0==(1&s)}function wo(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function ir(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Ko(s,o,u=!1){for(let c=0;c<o.length;c++)if(hh(s,o[c],u))return!0;return!1}function hu(s,o){return s?":not("+o.trim()+")":o}function zm(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!mi(y)&&(o+=hu(p,d),d=""),c=y,p=p||!mi(c);u++}return""!==d&&(o+=hu(p,d)),o}function Ra(s){return Ie(()=>{const o=gh(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Et.Emulated,styles:s.styles||pt,_:null,schemas:s.schemas||null,tView:null,id:""};gu(u);const c=s.dependencies;return u.directiveDefs=xa(c,!1),u.pipeDefs=xa(c,!0),u.id=function mh(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function pp(s){return jt(s)||Cr(s)}function fu(s){return null!==s}function pu(s){return Ie(()=>({type:s.type,bootstrap:s.bootstrap||pt,declarations:s.declarations||pt,imports:s.imports||pt,exports:s.exports||pt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function fl(s,o){if(null==s)return yt;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}function pl(s){return Ie(()=>{const o=gh(s);return gu(o),o})}function gp(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function jt(s){return s[Rt]||null}function Cr(s){return s[wn]||null}function vn(s){return s[Bt]||null}function Zs(s){const o=jt(s)||Cr(s)||vn(s);return null!==o&&o.standalone}function ti(s,o){const u=s[Er]||null;if(!u&&!0===o)throw new Error(`Type ${ie(s)} does not have '\u0275mod' property.`);return u}function gh(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||yt,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||pt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fl(s.inputs,o),outputs:fl(s.outputs)}}function gu(s){s.features?.forEach(o=>o(s))}function xa(s,o){if(!s)return null;const u=o?vn:pp;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(fu)}const sr=0,st=1,Lt=2,$n=3,ni=4,gl=5,Pr=6,Ys=7,En=8,us=9,Zo=10,Tt=11,_u=12,ml=13,Eo=14,xn=15,_l=16,Yo=17,Ps=18,Na=19,yl=20,Or=21,ri=22,Cc=23,ls=24,on=25,Os=1,Qo=2,Pi=7,Pa=9,kr=11;function Hr(s){return Array.isArray(s)&&"object"==typeof s[Os]}function $r(s){return Array.isArray(s)&&!0===s[Os]}function bc(s){return 0!=(4&s.flags)}function cs(s){return s.componentOffset>-1}function Io(s){return 1==(1&s.flags)}function Tn(s){return!!s.template}function ka(s){return 0!=(512&s[Lt])}function Co(s,o){return s.hasOwnProperty(Nr)?s[Nr]:null}let wu=qt.WeakRef??class vu{constructor(o){this.ref=o}deref(){return this.ref}},El=0,Yi=null,Il=!1;function Qn(s){const o=Yi;return Yi=s,o}class Oi{constructor(){this.id=El++,this.ref=function wp(s){return new wu(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const c=u.producerNode.deref();if(null!=c&&u.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Il;Il=!0;try{for(const[u,c]of this.consumers){const d=c.consumerNode.deref();null!=d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{Il=o}}producerAccessed(){if(Il)throw new Error("");if(null===Yi)return;let o=Yi.producers.get(this.id);void 0===o?(o={consumerNode:Yi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Yi.trackingVersion},Yi.producers.set(this.id,o),this.consumers.set(Yi.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=Yi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Yi?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let Ch=null;function Km(s){const o=Qn(null);try{return s()}finally{Qn(o)}}const Eu=()=>{};class Cp extends Oi{constructor(o,u,c){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=Eu,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Qn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Eu,this.watch(this.registerOnCleanup)}finally{Qn(o)}}cleanup(){this.cleanupFn()}}class Iu{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Dl(){return Fa}function Fa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Lc),Fc}function Fc(){const s=Vc(this),o=s?.current;if(o){const u=s.previous;if(u===yt)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Lc(s,o,u,c){const d=this.declaredInputs[u],p=Vc(s)||function Dh(s,o){return s[bp]=o}(s,{previous:yt,current:null}),y=p.current||(p.current={}),E=p.previous,b=E[d];y[d]=new Iu(b&&b.currentValue,o,E===yt),s[c]=o}Dl.ngInherit=!0;const bp="__ngSimpleChanges__";function Vc(s){return s[bp]||null}const ds=function(s,o,u){};function bn(s){for(;Array.isArray(s);)s=s[sr];return s}function La(s,o){return bn(o[s])}function Gr(s,o){return bn(o[s.index])}function Th(s,o){return s.data[o]}function Qi(s,o){const u=o[s];return Hr(u)?u:u[sr]}function Fs(s,o){return null==o?null:s[o]}function Mh(s){s[Yo]=0}function Hc(s){1024&s[Lt]||(s[Lt]|=1024,Ua(s,1))}function Sl(s){1024&s[Lt]&&(s[Lt]&=-1025,Ua(s,-1))}function Ua(s,o){let u=s[$n];if(null===u)return;u[gl]+=o;let c=u;for(u=u[$n];null!==u&&(1===o&&1===c[gl]||-1===o&&0===c[gl]);)u[gl]+=o,c=u,u=u[$n]}const Mt={lFrame:Kc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Cu(){return Mt.bindingsEnabled}function Re(){return Mt.lFrame.lView}function nn(){return Mt.lFrame.tView}function zc(s){return Mt.lFrame.contextLView=s,s[En]}function Rl(s){return Mt.lFrame.contextLView=null,s}function pr(){let s=Mp();for(;null!==s&&64===s.type;)s=s.parent;return s}function Mp(){return Mt.lFrame.currentTNode}function ii(s,o){const u=Mt.lFrame;u.currentTNode=s,u.isParent=o}function Rp(){return Mt.lFrame.isParent}function Xn(){Mt.lFrame.isParent=!1}function Vn(){return Mt.lFrame.bindingIndex++}function Du(s,o){const u=Mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Oh(o)}function Oh(s){Mt.lFrame.currentDirectiveIndex=s}function Ol(){return Mt.lFrame.currentQueryIndex}function So(s){Mt.lFrame.currentQueryIndex=s}function Ao(s){const o=s[st];return 2===o.type?o.declTNode:1===o.type?s[Pr]:null}function Ba(s,o,u){if(u&Ye.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&Ye.Host||(d=Ao(p),null===d||(p=p[Eo],10&d.type))););if(null===d)return!1;o=d,s=p}const c=Mt.lFrame=Fl();return c.currentTNode=o,c.lView=s,!0}function kl(s){const o=Fl(),u=s[st];Mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Fl(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?Kc(s):o}function Kc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ym(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const kh=Ym;function Fh(){const s=Ym();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function yi(){return Mt.lFrame.selectedIndex}function Mo(s){Mt.lFrame.selectedIndex=s}function Nn(){const s=Mt.lFrame;return Th(s.tView,s.selectedIndex)}let Zc=!0;function Su(){return Zc}function na(s){Zc=s}function Ll(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:x}=p;y&&(s.contentHooks??=[]).push(-u,y),E&&((s.contentHooks??=[]).push(u,E),(s.contentCheckHooks??=[]).push(u,E)),b&&(s.viewHooks??=[]).push(-u,b),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=x&&(s.destroyHooks??=[]).push(u,x)}}function Au(s,o,u){si(s,o,3,u)}function Yc(s,o,u,c){(3&s[Lt])===u&&si(s,o,u,c)}function Vl(s,o){let u=s[Lt];(3&u)===o&&(u&=8191,u+=1,s[Lt]=u)}function si(s,o,u,c){const p=c??-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[Yo]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[Yo]+=65536),(E<p||-1==p)&&(Qc(s,u,o,b),s[Yo]=(4294901760&s[Yo])+b+2),b++}function Ro(s,o){ds(4,s,o);const u=Qn(null);try{o.call(s)}finally{Qn(u),ds(5,s,o)}}function Qc(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];d?s[Lt]>>13<s[Yo]>>16&&(3&s[Lt])===o&&(s[Lt]+=8192,Ro(E,p)):Ro(E,p)}const un=-1;class gt{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function St(s){return s!==un}function Fi(s){return 32767&s}function Ha(s,o){let u=function $h(s){return s>>16}(s),c=o;for(;u>0;)c=c[Eo],u--;return c}let Li=!0;function ia(s){const o=Li;return Li=s,o}const fs=255,xo=5;let Jm=0;const Vi={};function No(s,o){const u=Gh(s,o);if(-1!==u)return u;const c=o[st];c.firstCreatePass&&(s.injectorIndex=o.length,Qs(c.data,s),Qs(o,null),Qs(c.blueprint,null));const d=ps(s,o),p=s.injectorIndex;if(St(d)){const y=Fi(d),E=Ha(d,o),b=E[st].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|b[y+A]}return o[p+8]=d,p}function Qs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Gh(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ps(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Jc(d),null===c)return un;if(u++,d=d[Eo],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return un}function Mu(s,o,u){!function Pp(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(_e)&&(c=u[_e]),null==c&&(c=u[_e]=Jm++);const d=c&fs;o.data[s+(d>>xo)]|=1<<d}(s,o,u)}function $a(s,o,u){if(u&Ye.Optional||void 0!==s)return s;Ge()}function sa(s,o,u,c){if(u&Ye.Optional&&void 0===c&&(c=null),!(u&(Ye.Self|Ye.Host))){const d=s[us],p=Xt(void 0);try{return d?d.get(o,c,u&Ye.Optional):lr(o,c,u&Ye.Optional)}finally{Xt(p)}}return $a(c,0,u)}function Us(s,o,u,c=Ye.Default,d){if(null!==s){if(2048&o[Lt]&&!(c&Ye.Self)){const y=function Wh(s,o,u,c,d){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[Lt]&&!(512&y[Lt]);){const E=zh(p,y,u,c|Ye.Self,Vi);if(E!==Vi)return E;let b=p.parent;if(!b){const A=y[yl];if(A){const x=A.get(u,Vi,c);if(x!==Vi)return x}b=Jc(y),y=y[Eo]}p=b}return d}(s,o,u,c,Vi);if(y!==Vi)return y}const p=zh(s,o,u,c,Vi);if(p!==Vi)return p}return sa(o,u,c,d)}function zh(s,o,u,c,d){const p=function Oo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(_e)?s[_e]:void 0;return"number"==typeof o?o>=0?o&fs:es:o}(u);if("function"==typeof p){if(!Ba(o,s,c))return c&Ye.Host?$a(d,0,c):sa(o,u,c,d);try{const y=p(c);if(null!=y||c&Ye.Optional)return y;Ge()}finally{kh()}}else if("number"==typeof p){let y=null,E=Gh(s,o),b=un,A=c&Ye.Host?o[xn][Pr]:null;for((-1===E||c&Ye.SkipSelf)&&(b=-1===E?ps(s,o):o[E+8],b!==un&&Xs(c,!1)?(y=o[st],E=Fi(b),o=Ha(b,o)):E=-1);-1!==E;){const x=o[st];if(Gn(p,E,x.data)){const j=oi(E,o,u,y,c,A);if(j!==Vi)return j}b=o[E+8],b!==un&&Xs(c,o[st].data[E+8]===A)&&Gn(p,E,o)?(y=x,E=Fi(b),o=Ha(b,o)):E=-1}}return d}function oi(s,o,u,c,d,p){const y=o[st],E=y.data[s+8],x=oa(E,y,u,null==c?cs(E)&&Li:c!=y&&0!=(3&E.type),d&Ye.Host&&p===E);return null!==x?Po(o,y,x,E):Vi}function oa(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,b=s.directiveStart,x=p>>20,Y=d?E+x:s.directiveEnd;for(let ne=c?E:E+x;ne<Y;ne++){const Te=y[ne];if(ne<b&&u===Te||ne>=b&&Te.type===u)return ne}if(d){const ne=y[b];if(ne&&Tn(ne)&&ne.type===u)return b}return null}function Po(s,o,u,c){let d=s[u];const p=o.data;if(function ki(s){return s instanceof gt}(d)){const y=d;y.resolving&&function ke(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new re(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ue(s)}(p[u]));const E=ia(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Xt(y.injectImpl):null;Ba(s,c,Ye.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Hh(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=Fa(o);(u.preOrderHooks??=[]).push(s,y),(u.preOrderCheckHooks??=[]).push(s,y)}d&&(u.preOrderHooks??=[]).push(0-s,d),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==b&&Xt(b),ia(E),y.resolving=!1,kh()}}return d}function Gn(s,o,u){return!!(u[o+(s>>xo)]&1<<s)}function Xs(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class Js{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Us(this._tNode,this._lView,o,W(c),u)}}function es(){return new Js(pr(),Re())}function Dr(s){return Ie(()=>{const o=s.prototype.constructor,u=o[Nr]||Ga(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Nr]||Ga(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ga(s){return Ze(s)?()=>{const o=Ga(Oe(s));return o&&o()}:Co(s)}function Jc(s){const o=s[st],u=o.type;return 2===u?o.declTNode:1===u?s[Pr]:null}function Bs(s){return function Op(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(xt(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(pr(),s)}const zn="__parameters__";function js(s,o,u){return Ie(()=>{const c=function ts(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(b,A,x){const j=b.hasOwnProperty(zn)?b[zn]:Object.defineProperty(b,zn,{value:[]})[zn];for(;j.length<=x;)j.push(null);return(j[x]=j[x]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function _s(s,o){s.forEach(u=>Array.isArray(u)?_s(u,o):o(u))}function nd(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function rd(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function T(s,o,u){let c=B(s,o);return c>=0?s[1|c]=u:(c=~c,function Nu(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function M(s,o){const u=B(s,o);if(u>=0)return s[1|u]}function B(s,o){return function X(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const to=F(js("Optional"),8),ai=F(js("SkipSelf"),4);function s_(s){return 128==(128&s.flags)}var Za=(()=>((Za=Za||{})[Za.Important=1]="Important",Za[Za.DashCase=2]="DashCase",Za))();const xA=/^>|^->|<!--|-->|--!>|<!-$/g,NA=/(<|>)/,PA="\u200b$1\u200b";const Kv=new Map;let uC=0;const a_="__ngContext__";function ji(s,o){Hr(o)?(s[a_]=o[Na],function OA(s){Kv.set(s[Na],s)}(o)):s[a_]=o}let Jv;function Xh(s,o){return Jv(s,o)}function Hp(s){const o=s[$n];return $r(o)?o[$n]:o}function fC(s){return ew(s[_u])}function c_(s){return ew(s[ni])}function ew(s){for(;null!==s&&!$r(s);)s=s[ni];return s}function cd(s,o,u,c,d){if(null!=c){let p,y=!1;$r(c)?p=c:Hr(c)&&(y=!0,c=c[sr]);const E=bn(c);0===s&&null!==u?null==d?rw(o,u,E):dd(o,u,E,d||null,!0):1===s&&null!==u?dd(o,u,E,d||null,!0):2===s?function g_(s,o,u){const c=ku(s,o);c&&function UA(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function jA(s,o,u,c,d){const p=u[Pi];p!==bn(u)&&cd(o,s,c,p,d);for(let E=kr;E<u.length;E++){const b=u[E];ef(b[st],b,s,o,c,p)}}(o,s,p,u,d)}}function d_(s,o){return s.createComment(function aC(s){return s.replace(xA,o=>o.replace(NA,PA))}(o))}function h_(s,o,u){return s.createElement(o,u)}function pC(s,o){const u=s[Pa],c=u.indexOf(o);Sl(o),u.splice(c,1)}function nw(s,o){if(s.length<=kr)return;const u=kr+o,c=s[u];if(c){const d=c[_l];null!==d&&d!==s&&pC(d,c),o>0&&(s[u-1][ni]=c[ni]);const p=rd(s,kr+o);!function sO(s,o){ef(s,o,o[Tt],2,null,null),o[sr]=null,o[Pr]=null}(c[st],c);const y=p[Ps];null!==y&&y.detachView(p[st]),c[$n]=null,c[ni]=null,c[Lt]&=-129}return c}function f_(s,o){if(!(256&o[Lt])){const u=o[Tt];o[Cc]?.destroy(),o[ls]?.destroy(),u.destroyNode&&ef(s,o,u,3,null,null),function uO(s){let o=s[_u];if(!o)return io(s[st],s);for(;o;){let u=null;if(Hr(o))u=o[_u];else{const c=o[kr];c&&(u=c)}if(!u){for(;o&&!o[ni]&&o!==s;)Hr(o)&&io(o[st],o),o=o[$n];null===o&&(o=s),Hr(o)&&io(o[st],o),u=o&&o[ni]}o=u}}(o)}}function io(s,o){if(!(256&o[Lt])){o[Lt]&=-129,o[Lt]|=256,function zp(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof gt)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],b=p[y+1];ds(4,E,b);try{b.call(E)}finally{ds(5,E,b)}}else{ds(4,d,p);try{p.call(d)}finally{ds(5,d,p)}}}}}(s,o),function VA(s,o){const u=s.cleanup,c=o[Ys];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else u[p].call(c[u[p+1]]);null!==c&&(o[Ys]=null);const d=o[Or];if(null!==d){o[Or]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(s,o),1===o[st].type&&o[Tt].destroy();const u=o[_l];if(null!==u&&$r(o[$n])){u!==o[$n]&&pC(u,o);const c=o[Ps];null!==c&&c.detachView(s)}!function lC(s){Kv.delete(s[Na])}(o)}}function gC(s,o,u){return function mC(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[sr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=s.data[c.directiveStart+d];if(p===Et.None||p===Et.Emulated)return null}return Gr(c,u)}}(s,o.parent,u)}function dd(s,o,u,c,d){s.insertBefore(o,u,c,d)}function rw(s,o,u){s.appendChild(o,u)}function Wp(s,o,u,c,d){null!==c?dd(s,o,u,c,d):rw(s,o,u)}function ku(s,o){return s.parentNode(o)}let hd,v_,w_,Jh=function yC(s,o,u){return 40&s.type?Gr(s,u):null};function p_(s,o,u,c){const d=gC(s,c,o),p=o[Tt],E=function _C(s,o,u){return Jh(s,o,u)}(c.parent||o[Pr],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Wp(p,d,u[b],E,!1);else Wp(p,d,u,E,!1);void 0!==hd&&hd(p,c,o,u,d)}function Kp(s,o){if(null!==o){const u=o.type;if(3&u)return Gr(o,s);if(4&u)return iw(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Kp(s,c);{const d=s[o.index];return $r(d)?iw(-1,d):bn(d)}}if(32&u)return Xh(o,s)()||bn(s[o.index]);{const c=wC(s,o);return null!==c?Array.isArray(c)?c[0]:Kp(Hp(s[xn]),c):Kp(s,o.next)}}return null}function wC(s,o){return null!==o?s[xn][Pr].projection[o.projection]:null}function iw(s,o){const u=kr+s+1;if(u<o.length){const c=o[u],d=c[st].firstChild;if(null!==d)return Kp(c,d)}return o[Pi]}function sw(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&ji(bn(E),c),u.flags|=2),32!=(32&u.flags))if(8&b)sw(s,o,u.child,c,d,p,!1),cd(o,s,d,E,p);else if(32&b){const A=Xh(u,c);let x;for(;x=A();)cd(o,s,d,x,p);cd(o,s,d,E,p)}else 16&b?fd(s,o,c,u,d,p):cd(o,s,d,E,p);u=y?u.projectionNext:u.next}}function ef(s,o,u,c,d,p){sw(u,c,s.firstChild,o,d,p,!1)}function fd(s,o,u,c,d,p){const y=u[xn],b=y[Pr].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)cd(o,s,d,b[A],p);else{let A=b;const x=y[$n];s_(c)&&(A.flags|=128),sw(s,o,A,x,d,p,!0)}}function EC(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function IC(s,o,u){const{mergedAttrs:c,classes:d,styles:p}=u;null!==c&&_t(s,o,c),null!==d&&EC(s,o,d),null!==p&&function $A(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function nf(s){v_=s}function DC(s){return function aw(){if(void 0===w_&&(w_=null,qt.trustedTypes))try{w_=qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return w_}()?.createScriptURL(s)||s}class I_{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function fa(s){return s instanceof I_?s.changingThisBreaksApplicationSecurity:s}function Zp(s,o){const u=function ZA(s){return s instanceof I_&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ht})`)}return u===o}const JA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var qr=(()=>((qr=qr||{})[qr.NONE=0]="NONE",qr[qr.HTML=1]="HTML",qr[qr.STYLE=2]="STYLE",qr[qr.SCRIPT=3]="SCRIPT",qr[qr.URL=4]="URL",qr[qr.RESOURCE_URL=5]="RESOURCE_URL",qr))();function Hi(s){const o=pd();return o?o.sanitize(qr.URL,s)||"":Zp(s,"URL")?fa(s):function uw(s){return(s=String(s)).match(JA)?s:"unsafe:"+s}(ue(s))}function PC(s){const o=pd();if(o)return DC(o.sanitize(qr.RESOURCE_URL,s)||"");if(Zp(s,"ResourceURL"))return DC(fa(s));throw new re(904,!1)}function cM(s,o,u){return function OC(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?PC:Hi}(o,u)(s)}function pd(){const s=Re();return s&&s[Zo].sanitizer}class In{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ut({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const A_=new In("ENVIRONMENT_INITIALIZER"),dw=new In("INJECTOR",-1),Ya=new In("INJECTOR_DEF_TYPES");class kC{get(o,u=jr){if(u===jr){const c=new Error(`NullInjectorError: No provider for ${ie(o)}!`);throw c.name="NullInjectorError",c}return u}}function FC(s){return{\u0275providers:s}}function yO(...s){return{\u0275providers:dM(0,s),\u0275fromNgModule:!0}}function dM(s,...o){const u=[],c=new Set;let d;return _s(o,p=>{const y=p;M_(y,u,[],c)&&(d||=[],d.push(y))}),void 0!==d&&hw(d,u),u}function hw(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];fw(d,p=>{o.push(p)})}}function M_(s,o,u,c){if(!(s=Oe(s)))return!1;let d=null,p=Ki(s);const y=!p&&jt(s);if(p||y){if(y&&!y.standalone)return!1;d=s}else{const b=s.ngModule;if(p=Ki(b),!p)return!1;d=b}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of b)M_(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(d);try{_s(p.imports,x=>{M_(x,o,u,c)&&(A||=[],A.push(x))})}finally{}void 0!==A&&hw(A,o)}if(!E){const A=Co(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:pt},{provide:Ya,useValue:d,multi:!0},{provide:A_,useValue:()=>Ln(d),multi:!0})}const b=p.providers;null==b||E||fw(b,x=>{o.push(x)})}}return d!==s&&void 0!==s.providers}function fw(s,o){for(let u of s)Fe(u)&&(u=u.\u0275providers),Array.isArray(u)?fw(u,o):o(u)}const hM=z({provide:String,useValue:z});function VC(s){return null!==s&&"object"==typeof s&&hM in s}function af(s){return"function"==typeof s}const BC=new In("Set Injector scope."),R_={},wO={};let x_;function N_(){return void 0===x_&&(x_=new kC),x_}class gd{}class P_ extends gd{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$C(o,y=>this.processProvider(y)),this.records.set(dw,uf(void 0,this)),d.has("environment")&&this.records.set(gd,uf(void 0,this));const p=this.records.get(BC);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Ya.multi,pt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=Fn(this),c=Xt(void 0);try{return o()}finally{Fn(u),Xt(c)}}get(o,u=jr,c=Ye.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(oe))return o[oe](this);c=W(c);const d=Fn(this),p=Xt(void 0);try{if(!(c&Ye.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function EO(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&On(o);E=b&&this.injectableDefInScope(b)?uf(gw(o),R_):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ye.Self?N_():this.parent).get(o,u=c&Ye.Optional&&u===jr?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[kn]=y[kn]||[]).unshift(ie(o)),d)throw y;return function P(s,o,u,c){const d=s[kn];throw o[Kn]&&d.unshift(o[Kn]),s.message=function ee(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ie(o);if(Array.isArray(o))d=o.map(ie).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Ns,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[kn]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Xt(p),Fn(d)}}resolveInjectorInitializers(){const o=Fn(this),u=Xt(void 0);try{const c=this.get(A_.multi,pt,Ye.Self);for(const d of c)d()}finally{Fn(o),Xt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(ie(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(o){let u=af(o=Oe(o))?o:Oe(o&&o.provide);const c=function pM(s){return VC(s)?uf(void 0,s.useValue):uf(jC(s),R_)}(o);if(af(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=uf(void 0,R_,!0),d.factory=()=>G(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===R_&&(u.value=wO,u.value=u.factory()),"object"==typeof u.value&&u.value&&function gM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Oe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function gw(s){const o=On(s),u=null!==o?o.factory:Co(s);if(null!==u)return u;if(s instanceof In)throw new re(204,!1);if(s instanceof Function)return function fM(s){const o=s.length;if(o>0)throw function la(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new re(204,!1);const u=function Ni(s){return s&&(s[Rr]||s[Jr])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new re(204,!1)}function jC(s,o,u){let c;if(af(s)){const d=Oe(s);return Co(d)||gw(d)}if(VC(s))c=()=>Oe(s.useValue);else if(function UC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...G(s.deps||[]));else if(function pw(s){return!(!s||!s.useExisting)}(s))c=()=>Ln(Oe(s.useExisting));else{const d=Oe(s&&(s.useClass||s.provide));if(!function HC(s){return!!s.deps}(s))return Co(d)||gw(d);c=()=>new d(...G(s.deps))}return c}function uf(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function $C(s,o){for(const u of s)Array.isArray(u)?$C(u,o):u&&Fe(u)?$C(u.\u0275providers,o):o(u)}const mM=new In("AppId",{providedIn:"root",factory:()=>IO}),IO="ng",_M=new In("Platform Initializer"),GC=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cn=new In("CSP nonce",{providedIn:"root",factory:()=>function rf(){if(void 0!==v_)return v_;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let WC=(s,o)=>null;function Jp(s,o){return WC(s,o)}class Iw{}class qC{}class Cw{resolveComponentFactory(o){throw function CM(s){const o=Error(`No component factory found for ${ie(s)}.`);return o.ngComponent=s,o}(o)}}let eg=(()=>{class s{}return s.NULL=new Cw,s})();function DM(){return yd(pr(),Re())}function yd(s,o){return new vd(Gr(s,o))}let vd=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=DM,s})();function bw(s){return s instanceof vd?s.nativeElement:s}class k_{}let Dw=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function Tw(){const s=Re(),u=Qi(pr().index,s);return(Hr(u)?u:s)[Tt]}(),s})(),KC=(()=>{class s{}return s.\u0275prov=Ut({token:s,providedIn:"root",factory:()=>null}),s})();class ZC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const hf=new ZC("16.1.5"),Sw={};function Lu(s){for(;s;){s[Lt]|=64;const o=Hp(s);if(ka(s)&&!o)return s;s=o}return null}function ff(s){return s.ngOriginalError}class Kl{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ff(o);for(;u&&ff(u);)u=ff(u);return u||null}}const Mw=new In("",{providedIn:"root",factory:()=>!1});function Vu(s){return s instanceof Function?s():s}class li extends Oi{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){Lu(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,c){const d=Qn(this);this.trackingVersion++;try{o(u,c)}finally{Qn(d)}}destroy(){this.trackingVersion++}}let Kr=null;function tg(){return Kr??=new li,Kr}function B_(s,o){return s[o]??tg()}function JC(s,o){const u=tg();u.hasReadASignal&&(s[o]=Kr,u.lView=s,Kr=new li)}const Kt={};function eb(s){Lw(nn(),Re(),yi()+s,!1)}function Lw(s,o,u,c){if(!c)if(3==(3&o[Lt])){const p=s.preOrderCheckHooks;null!==p&&Au(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Yc(o,p,0,u)}Mo(u)}function Uw(s,o=null,u=null,c){const d=sb(s,o,u,c);return d.resolveInjectorInitializers(),d}function sb(s,o=null,u=null,c,d=new Set){const p=[u||pt,yO(s)];return c=c||("object"==typeof s?void 0:ie(s)),new P_(p,o||N_(),c||null,d)}let Fo=(()=>{class s{static create(u,c){if(Array.isArray(u))return Uw({name:""},c,u,"");{const d=u.name??"";return Uw({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=jr,s.NULL=new kC,s.\u0275prov=Ut({token:s,providedIn:"any",factory:()=>Ln(dw)}),s.__NG_ELEMENT_ID__=-1,s})();function Ed(s,o=Ye.Default){const u=Re();return null===u?Ln(s,o):Us(pr(),u,Oe(s),o)}function Bw(){throw new Error("invalid")}function Id(s,o,u,c,d,p,y,E,b,A,x){const j=o.blueprint.slice();return j[sr]=d,j[Lt]=140|c,(null!==A||s&&2048&s[Lt])&&(j[Lt]|=2048),Mh(j),j[$n]=j[Eo]=s,j[En]=u,j[Zo]=y||s&&s[Zo],j[Tt]=E||s&&s[Tt],j[us]=b||s&&s[us]||null,j[Pr]=p,j[Na]=function iO(){return uC++}(),j[ri]=x,j[yl]=A,j[xn]=2==o.type?s[xn]:j,j}function pf(s,o,u,c,d){let p=s.data[o];if(null===p)p=function jw(s,o,u,c,d){const p=Mp(),y=Rp(),b=s.data[o]=function Gw(s,o,u,c,d,p){let y=o?o.injectorIndex:-1,E=0;return function hs(){return null!==Mt.skipHydrationRootTNode}()&&(E|=128),{type:u,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,u,c,d),function gr(){return Mt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function xl(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ii(p,!0),p}function Qa(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function ab(s,o,u,c,d){const p=B_(o,Cc),y=yi(),E=2&c;try{if(Mo(-1),E&&o.length>on&&Lw(s,o,on,!1),ds(E?2:0,d),E)p.runInContext(u,c,d);else{const A=Qn(null);try{u(c,d)}finally{Qn(A)}}}finally{E&&null===o[Cc]&&JC(o,Cc),Mo(y),ds(E?3:1,d)}}function Hw(s,o,u){if(bc(o)){const c=Qn(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const E=s.data[y];E.contentQueries&&E.contentQueries(1,u[y],y)}}finally{Qn(c)}}}function Uu(s,o,u){Cu()&&(function Yw(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;cs(u)&&function Cd(s,o,u){const c=Gr(o,s),d=ig(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const E=Vo(s,Id(s,d,null,y,c,o,null,s[Zo].rendererFactory.createRenderer(c,u),null,null,null));s[o.index]=E}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||No(u,o),ji(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const b=s.data[E],A=Po(o,s,E,u);ji(A,o),null!==y&&MM(0,E-d,A,b,0,y),Tn(b)&&(Qi(u.index,o)[En]=Po(o,s,E,u))}}(s,o,u,Gr(u,o)),64==(64&u.flags)&&Qw(s,o,u))}function $_(s,o,u=Gr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function ig(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=G_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function G_(s,o,u,c,d,p,y,E,b,A,x){const j=on+c,Y=j+d,ne=function sg(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Kt);return u}(j,Y),Te="function"==typeof A?A():A;return ne[st]={type:s,blueprint:ne,template:u,queries:null,viewQuery:E,declTNode:o,data:ne.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Te,incompleteFirstPass:!1,ssrId:x}}let $w=s=>null;function zw(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===c?Ww(u,o,d,p):c.hasOwnProperty(d)&&Ww(u,o,c[d],p)}return u}function Ww(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function K_(s,o,u,c){if(Cu()){const d=null===c?null:{"":-1},p=function hb(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(Ko(o,y.selectors,!1))if(c||(c=[]),Tn(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),c.unshift(...E,y),Xw(s,o,E.length)}else c.unshift(y),Xw(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(s,u);let y,E;null===p?y=E=null:[y,E]=p,null!==y&&cb(s,o,u,y,d,E),d&&function ug(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new re(-301,!1);c.push(o[d],p)}}}(u,c,d)}u.mergedAttrs=sn(u.mergedAttrs,u.attrs)}function cb(s,o,u,c,d,p){for(let A=0;A<c.length;A++)Mu(No(u,o),s,c[A].type);!function Y_(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const x=c[A];x.providersResolver&&x.providersResolver(x)}let y=!1,E=!1,b=Qa(s,o,c.length,null);for(let A=0;A<c.length;A++){const x=c[A];u.mergedAttrs=sn(u.mergedAttrs,x.hostAttrs),lg(s,u,o,b,x),fb(b,x,d),null!==x.contentQueries&&(u.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=64);const j=x.type.prototype;!y&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),y=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),E=!0),b++}!function ag(s,o,u){const d=o.directiveEnd,p=s.data,y=o.attrs,E=[];let b=null,A=null;for(let x=o.directiveStart;x<d;x++){const j=p[x],Y=u?u.get(j):null,Te=Y?Y.outputs:null;b=zw(j.inputs,x,b,Y?Y.inputs:null),A=zw(j.outputs,x,A,Te);const Ue=null===b||null===y||qo(o)?null:pb(b,x,y);E.push(Ue)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=b,o.outputs=A}(s,u,p)}function Qw(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,y=function Pl(){return Mt.lFrame.currentDirectiveIndex}();try{Mo(p);for(let E=c;E<d;E++){const b=s.data[E],A=o[E];Oh(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&db(b,A)}}finally{Mo(-1),Oh(y)}}function db(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Xw(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function fb(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Tn(o)&&(u[""]=s)}}function lg(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Co(d.type)),y=new gt(p,Tn(d),Ed);s.blueprint[c]=y,u[c]=y,function Zw(s,o,u,c,d){const p=d.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function Z_(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=E&&y.push(E),y.push(u,c,p)}}(s,o,c,Qa(s,u,d.hostVars,Kt),d)}function Lo(s,o,u,c,d,p){const y=Gr(s,o);!function Jw(s,o,u,c,d,p,y){if(null==p)s.removeAttribute(o,d,u);else{const E=null==y?ue(p):y(p,c||"",d);s.setAttribute(o,d,E,u)}}(o[Tt],y,p,s.value,u,c,d)}function MM(s,o,u,c,d,p){const y=p[o];if(null!==y)for(let E=0;E<y.length;)eE(c,u,y[E++],y[E++],y[E++])}function eE(s,o,u,c,d){const p=Qn(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(o,d)),null!==s.setInput?s.setInput(o,d,u,c):o[c]=d}finally{Qn(p)}}function pb(s,o,u){let c=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){c.push(p,y[E+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function gb(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null,null]}function Zl(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const y=s.data[p];So(u[c]),y.contentQueries(2,o[p],p)}}}function Vo(s,o){return s[_u]?s[ml][ni]=o:s[_u]=o,s[ml]=o,o}function gf(s,o,u){So(0);const c=Qn(null);try{o(s,u)}finally{Qn(c)}}function nE(s){return s[Ys]||(s[Ys]=[])}function Jn(s){return s.cleanup||(s.cleanup=[])}function mf(s,o){const u=s[us],c=u?u.get(Kl,null):null;c&&c.handleError(o)}function bd(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++];eE(s.data[y],o[y],c,E,d)}}function mb(s,o){const u=Qi(o,s),c=u[st];!function RM(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(c,u);const d=u[sr];null!==d&&null===u[ri]&&(u[ri]=Jp(d,u[us])),rE(c,u,u[En])}function rE(s,o,u){kl(o);try{const c=s.viewQuery;null!==c&&gf(1,c,u);const d=s.template;null!==d&&ab(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zl(s,o),s.staticViewQueries&&gf(2,s.viewQuery,u);const p=s.components;null!==p&&function xM(s,o){for(let u=0;u<o.length;u++)mb(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Lt]&=-5,Fh()}}let iE=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,c,d){const p=typeof Zone>"u"?null:Zone.current,y=new Cp(u,A=>{this.all.has(A)&&this.queue.set(A,p)},d);let E;this.all.add(y),y.notify();const b=()=>{y.cleanup(),E?.(),this.all.delete(y),this.queue.delete(y)};return E=c?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[u,c]of this.queue)this.queue.delete(u),c?c.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Ut({token:s,providedIn:"root",factory:()=>new s}),s})();function hg(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=Le(d,E):2==p&&(c=Le(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Xa(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(bn(p)),$r(p)){for(let E=kr;E<p.length;E++){const b=p[E],A=b[st].firstChild;null!==A&&Xa(b[st],b,A,c)}p[Pi]!==p[sr]&&c.push(p[Pi])}const y=u.type;if(8&y)Xa(s,o,u.child,c);else if(32&y){const E=Xh(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=wC(o,u);if(Array.isArray(E))c.push(...E);else{const b=Hp(o[xn]);Xa(b[st],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}function Q_(s,o,u,c=!0){const d=o[Zo].rendererFactory;d.begin&&d.begin();try{vb(s,o,s.template,u)}catch(y){throw c&&mf(o,y),y}finally{d.end&&d.end(),o[Zo].effectManager?.flush()}}function vb(s,o,u,c){const d=o[Lt];if(256!=(256&d)){o[Zo].effectManager?.flush(),kl(o);try{Mh(o),function Nl(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&ab(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Au(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Yc(o,A,0,null),Vl(o,0)}if(function wb(s){for(let o=fC(s);null!==o;o=c_(o)){if(!o[Qo])continue;const u=o[Pa];for(let c=0;c<u.length;c++){Hc(u[c])}}}(o),sE(o,2),null!==s.contentQueries&&Zl(s,o),y){const A=s.contentCheckHooks;null!==A&&Au(o,A)}else{const A=s.contentHooks;null!==A&&Yc(o,A,1),Vl(o,1)}!function ob(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const c=B_(o,ls);try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)Mo(~p);else{const y=p,E=u[++d],b=u[++d];Du(E,y),c.runInContext(b,2,o[y])}}}finally{null===o[ls]&&JC(o,ls),Mo(-1)}}(s,o);const E=s.components;null!==E&&aE(o,E,0);const b=s.viewQuery;if(null!==b&&gf(2,b,c),y){const A=s.viewCheckHooks;null!==A&&Au(o,A)}else{const A=s.viewHooks;null!==A&&Yc(o,A,2),Vl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Lt]&=-73,Sl(o)}finally{Fh()}}}function sE(s,o){for(let u=fC(s);null!==u;u=c_(u))for(let c=kr;c<u.length;c++)X_(u[c],o)}function oE(s,o,u){X_(Qi(o,s),u)}function X_(s,o){if(!function Sh(s){return 128==(128&s[Lt])}(s))return;const u=s[st];if(80&s[Lt]&&0===o||1024&s[Lt]||2===o)vb(u,s,u.template,s[En]);else if(s[gl]>0){sE(s,1);const d=s[st].components;null!==d&&aE(s,d,1)}}function aE(s,o,u){for(let c=0;c<o.length;c++)oE(s,o[c],u)}class _f{get rootNodes(){const o=this._lView,u=o[st];return Xa(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(o){this._lView[En]=o}get destroyed(){return 256==(256&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[$n];if($r(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(nw(o,c),rd(u,c))}this._attachedToViewContainer=!1}f_(this._lView[st],this._lView)}onDestroy(o){!function Xi(s,o){if(256==(256&s[Lt]))throw new re(911,!1);null===s[Or]&&(s[Or]=[]),s[Or].push(o)}(this._lView,o)}markForCheck(){Lu(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-129}reattach(){this._lView[Lt]|=128}detectChanges(){Q_(this._lView[st],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aO(s,o){ef(s,o,o[Tt],2,null,null)}(this._lView[st],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=o}}class PM extends _f{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Q_(o[st],o,o[En],!1)}checkNoChanges(){}get context(){return null}}class Eb extends eg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=jt(o);return new ju(u,this.ngModule)}}function Ib(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class J_{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=W(c);const d=this.injector.get(o,Sw,c);return d!==Sw||u===Sw?d:this.parentInjector.get(o,u,c)}}class ju extends qC{get inputs(){const o=this.componentDef,u=o.inputTransforms,c=Ib(o.inputs);if(null!==u)for(const d of c)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return c}get outputs(){return Ib(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function fh(s){return s.map(zm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof gd?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new J_(o,p):o,E=y.get(k_,null);if(null===E)throw new re(407,!1);const x={rendererFactory:E,sanitizer:y.get(KC,null),effectManager:y.get(iE,null)},j=E.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ne=c?function ub(s,o,u,c){const p=c.get(Mw,!1)||u===Et.ShadowDom,y=s.selectRootElement(o,p);return function ws(s){$w(s)}(y),y}(j,c,this.componentDef.encapsulation,y):h_(j,Y,function OM(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Y)),tt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,vt=G_(0,null,null,1,0,null,null,null,null,null,null),Me=Id(null,vt,null,tt,null,null,x,j,y,null,null);let $t,rn;kl(Me);try{const dt=this.componentDef;let qi,vm=null;dt.findHostDirectiveDefs?(qi=[],vm=new Map,dt.findHostDirectiveDefs(dt,qi,vm),qi.push(dt)):qi=[dt];const wm=function bb(s,o){const u=s[st],c=on;return s[c]=o,pf(u,c,2,"#host",null)}(Me,ne),sS=function fg(s,o,u,c,d,p,y){const E=d[st];!function pg(s,o,u,c){for(const d of s)o.mergedAttrs=sn(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(hg(o,o.mergedAttrs,!0),null!==u&&IC(c,u,o))}(c,s,o,y);let b=null;null!==o&&(b=Jp(o,d[us]));const A=p.rendererFactory.createRenderer(o,u);let x=16;u.signals?x=4096:u.onPush&&(x=64);const j=Id(d,ig(u),null,x,d[s.index],s,p,A,null,null,b);return E.firstCreatePass&&Xw(E,s,c.length-1),Vo(d,j),d[s.index]=j}(wm,ne,dt,qi,Me,x,j);rn=Th(vt,on),ne&&function Tr(s,o,u,c){if(c)_t(s,u,["ng-version",hf.full]);else{const{attrs:d,classes:p}=function hl(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!mi(d))break;d=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&_t(s,u,d),p&&p.length>0&&EC(s,u,p.join(" "))}}(j,dt,ne,c),void 0!==u&&function Db(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];c.push(null!=p?Array.from(p):null)}}(rn,this.ngContentSelectors,u),$t=function kM(s,o,u,c,d,p){const y=pr(),E=d[st],b=Gr(y,d);cb(E,d,y,u,null,c);for(let x=0;x<u.length;x++)ji(Po(d,E,y.directiveStart+x,y),d);Qw(E,d,y),b&&ji(b,d);const A=Po(d,E,y.directiveStart+y.componentOffset,y);if(s[En]=d[En]=A,null!==p)for(const x of p)x(A,o);return Hw(E,y,s),A}(sS,dt,qi,vm,Me,[FM]),rE(vt,Me,null)}finally{Fh()}return new ey(this.componentType,$t,yd(rn,Me),Me,rn)}}class ey extends Iw{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new PM(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;bd(p[st],p,d,o,u),this.previousInputValues.set(o,u),Lu(Qi(this._tNode.index,p))}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function FM(){const s=pr();Ll(Re()[st],s)}function uE(s){let o=function Tb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Tn(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new re(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=gg(s.inputs),y.inputTransforms=gg(s.inputTransforms),y.declaredInputs=gg(s.declaredInputs),y.outputs=gg(s.outputs);const E=d.hostBindings;E&&Mb(s,E);const b=d.viewQuery,A=d.contentQueries;if(b&&Ab(s,b),A&&ty(s,A),q(s.inputs,d.inputs),q(s.declaredInputs,d.declaredInputs),q(s.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),q(y.inputTransforms,d.inputTransforms)),Tn(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===uE&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Sb(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=sn(d.hostAttrs,u=sn(u,d.hostAttrs))}}(c)}function gg(s){return s===yt?{}:s===pt?[]:s}function Ab(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function ty(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Mb(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function lE(s){const o=s.inputConfig,u={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[2]&&(u[c]=d[2])}s.inputTransforms=u}function ry(s){return!!iy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function iy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Gi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Hu(s,o,u,c){const d=Re();return Gi(d,Vn(),o)&&(nn(),Lo(Nn(),d,s,o,u,c)),Hu}function it(s,o,u,c,d,p,y,E){const b=Re(),A=nn(),x=s+on,j=A.firstCreatePass?function BM(s,o,u,c,d,p,y,E,b){const A=o.consts,x=pf(o,s,4,y||null,Fs(A,E));K_(o,u,x,Fs(A,b)),Ll(o,x);const j=x.tView=G_(2,x,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,x),j.queries=o.queries.embeddedTView(x)),x}(x,A,b,o,u,c,d,p,y):A.data[x];ii(j,!1);const Y=fe(A,b,j,s);Su()&&p_(A,b,Y,j),ji(Y,b),Vo(b,b[x]=gb(Y,b,Y,j)),Io(j)&&Uu(A,b,j),null!=y&&$_(b,j,E)}let fe=function Pe(s,o,u,c){return na(!0),o[Tt].createComment("")};function $b(s){return function To(s,o){return s[o]}(function Wc(){return Mt.lFrame.contextLView}(),on+s)}function mE(s,o,u){const c=Re();return Gi(c,Vn(),o)&&function Es(s,o,u,c,d,p,y,E){const b=Gr(o,u);let x,A=o.inputs;!E&&null!=A&&(x=A[c])?(bd(s,u,x,c,d),cs(o)&&function Kw(s,o){const u=Qi(o,s);16&u[Lt]||(u[Lt]|=64)}(u,o.index)):3&o.type&&(c=function qw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,p.setProperty(b,c,d))}(nn(),Nn(),c,s,o,c[Tt],u,!1),mE}function _E(s,o,u,c,d){const y=d?"class":"style";bd(s,u,o.inputs[y],y,c)}function Ig(s,o,u,c){const d=Re(),p=nn(),y=on+s,E=d[Tt],b=p.firstCreatePass?function HM(s,o,u,c,d,p){const y=o.consts,b=pf(o,s,2,c,Fs(y,d));return K_(o,u,b,Fs(y,p)),null!==b.attrs&&hg(b,b.attrs,!1),null!==b.mergedAttrs&&hg(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(y,p,d,o,u,c):p.data[y],A=zb(p,d,b,E,o,s);d[y]=A;const x=Io(b);return ii(b,!0),IC(E,A,b),32!=(32&b.flags)&&Su()&&p_(p,d,A,b),0===function Zm(){return Mt.lFrame.elementDepthCount}()&&ji(A,d),function Gc(){Mt.lFrame.elementDepthCount++}(),x&&(Uu(p,d,b),Hw(p,b,d)),null!==c&&$_(d,b),Ig}function fy(){let s=pr();Rp()?Xn():(s=s.parent,ii(s,!1));const o=s;(function Ml(s){return Mt.skipHydrationRootTNode===s})(o)&&function Ap(){Mt.skipHydrationRootTNode=null}(),function Tp(){Mt.lFrame.elementDepthCount--}();const u=nn();return u.firstCreatePass&&(Ll(u,s),bc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Np(s){return 0!=(8&s.flags)}(o)&&_E(u,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ja(s){return 0!=(16&s.flags)}(o)&&_E(u,o,Re(),o.stylesWithoutHost,!1),fy}function Gb(s,o,u,c){return Ig(s,o,u,c),fy(),Gb}let zb=(s,o,u,c,d,p)=>(na(!0),h_(c,d,function jh(){return Mt.lFrame.currentNamespace}()));function Cg(s,o,u){const c=Re(),d=nn(),p=s+on,y=d.firstCreatePass?function Cf(s,o,u,c,d){const p=o.consts,y=Fs(p,c),E=pf(o,s,8,"ng-container",y);return null!==y&&hg(E,y,!0),K_(o,u,E,Fs(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,c,o,u):d.data[p];ii(y,!0);const E=bf(d,c,y,s);return c[p]=E,Su()&&p_(d,c,E,y),ji(E,c),Io(y)&&(Uu(d,c,y),Hw(d,y,c)),null!=u&&$_(c,y),Cg}function Wn(){let s=pr();const o=nn();return Rp()?Xn():(s=s.parent,ii(s,!1)),o.firstCreatePass&&(Ll(o,s),bc(s)&&o.queries.elementEnd(s)),Wn}let bf=(s,o,u,c)=>(na(!0),d_(o[Tt],""));function mr(){return Re()}function Xe(s){return!!s&&"function"==typeof s.then}function bg(s){return!!s&&"function"==typeof s.subscribe}function Dg(s,o,u,c){const d=Re(),p=nn(),y=pr();return function Tg(s,o,u,c,d,p,y){const E=Io(c),A=s.firstCreatePass&&Jn(s),x=o[En],j=nE(o);let Y=!0;if(3&c.type||y){const Ue=Gr(c,o),tt=y?y(Ue):Ue,vt=j.length,Me=y?rn=>y(bn(rn[c.index])):c.index;let $t=null;if(!y&&E&&($t=function GM(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[Ys],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=p,$t.__ngLastListenerFn__=p,Y=!1;else{p=Df(c,o,x,p,!1);const rn=u.listen(tt,d,p);j.push(p,rn),A&&A.push(d,Me,vt,vt+1)}}else p=Df(c,o,x,p,!1);const ne=c.outputs;let Te;if(Y&&null!==ne&&(Te=ne[d])){const Ue=Te.length;if(Ue)for(let tt=0;tt<Ue;tt+=2){const dt=o[Te[tt]][Te[tt+1]].subscribe(p),qi=j.length;j.push(p,dt),A&&A.push(d,c.index,qi,-(qi+1))}}}(p,d,d[Tt],y,s,o,c),Dg}function qb(s,o,u,c){try{return ds(6,o,u),!1!==u(c)}catch(d){return mf(s,d),!1}finally{ds(7,o,u)}}function Df(s,o,u,c,d){return function p(y){if(y===Function)return c;Lu(s.componentOffset>-1?Qi(s.index,o):o);let b=qb(o,u,c,y),A=p.__ngNextListenerFn__;for(;A;)b=qb(o,u,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&y.preventDefault(),b}}function yE(s=1){return function Lh(s){return(Mt.lFrame.contextLView=function Qm(s,o){for(;s>0;)o=o[Eo],s--;return o}(s,Mt.lFrame.contextLView))[En]}(s)}function my(s,o){return s<<17|o<<2}function $s(s){return s>>17&32767}function IE(s){return 2|s}function Pd(s){return(131068&s)>>2}function Is(s,o){return-131069&s|o<<2}function Od(s){return 1|s}function _a(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?$s(p):Pd(p),b=!1;for(;0!==E&&(!1===b||y);){const x=s[E+1];Xb(s[E],o)&&(b=!0,s[E+1]=c?Od(x):IE(x)),E=c?$s(x):Pd(x)}b&&(s[u+1]=c?IE(p):Od(p))}function Xb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&B(s,o)>=0}function bE(s,o){return function wa(s,o,u,c){const d=Re(),p=nn(),y=function Vs(s){const o=Mt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function DE(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[yi()],y=function di(s,o){return o>=s.expandoStartIndex}(s,u);(function _r(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!y&&(o=!1),o=function ec(s,o,u,c){const d=function Tu(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Pn(u=hi(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=hi(d,s,o,u,c),null===p){let b=function oD(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Pd(c))return s[$s(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=hi(null,s,o,b[1],c),b=Pn(b,o.attrs,c),function er(s,o,u,c){s[$s(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function _y(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Pn(c,s[p].hostAttrs,u);return Pn(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function WM(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=$s(y),b=Pd(y);s[c]=u;let x,A=!1;if(Array.isArray(u)?(x=u[1],(null===x||B(u,x)>0)&&(A=!0)):x=u,d)if(0!==b){const Y=$s(s[E+1]);s[c+1]=my(Y,E),0!==Y&&(s[Y+1]=Is(s[Y+1],c)),s[E+1]=function EE(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=my(E,0),0!==E&&(s[E+1]=Is(s[E+1],c)),E=c;else s[c+1]=my(b,0),0===E?E=c:s[b+1]=Is(s[b+1],c),b=c;A&&(s[c+1]=IE(s[c+1])),_a(s,x,c,!0),_a(s,x,c,!1),function Qb(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&B(p,o)>=0&&(u[c+1]=Od(u[c+1]))}(o,x,s,c,p),y=my(E,b),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==Kt&&Gi(d,y,o)&&function lD(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const b=s.data,A=b[E+1],x=function Ag(s){return 1==(1&s)}(A)?Zr(b,o,u,d,Pd(A),y):void 0;yy(x)||(yy(p)||function Yb(s){return 2==(2&s)}(A)&&(p=Zr(b,null,u,d,E,y)),function HA(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Za.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Za.Important),s.setStyle(u,c,d,p))}}(c,y,La(yi(),u),d,p))}(p,p.data[yi()],d,d[Tt],s,d[y+1]=function tc(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ie(fa(s)))),s}(o,u),c,y)}(s,o,null,!0),bE}function hi(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=Pn(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Pn(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),T(s,y,!!u||o[++p]))}return void 0===s?null:s}function Zr(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const b=s[d],A=Array.isArray(b),x=A?b[1]:b,j=null===x;let Y=u[d+1];Y===Kt&&(Y=j?pt:void 0);let ne=j?M(Y,c):x===c?Y:void 0;if(A&&!yy(ne)&&(ne=M(b,c)),yy(ne)&&(E=ne,y))return E;const Te=s[d+1];d=y?$s(Te):Pd(Te)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=M(b,c))}return E}function yy(s){return void 0!==s}function tu(s,o=""){const u=Re(),c=nn(),d=s+on,p=c.firstCreatePass?pf(c,d,1,o,null):c.data[d],y=Mg(c,u,p,o,s);u[d]=y,Su()&&p_(c,u,y,p),ii(p,!1)}let Mg=(s,o,u,c,d)=>(na(!0),function Gp(s,o){return s.createText(o)}(o[Tt],c));function TE(s){return nu("",s,""),TE}function nu(s,o,u){const c=Re(),d=function Ad(s,o,u,c){return Gi(s,Vn(),u)?o+ue(u)+c:Kt}(c,s,o,u);return d!==Kt&&function Bu(s,o,u){const c=La(o,s);!function tw(s,o,u){s.setValue(o,u)}(s[Tt],c,u)}(c,yi(),d),nu}const Zu=void 0;var yD=["en",[["a","p"],["AM","PM"],Zu],[["AM","PM"],Zu,Zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zu,"{1} 'at' {0}",Zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _D(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Bd={};function OE(s){const o=function rR(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=vD(o);if(u)return u;const c=o.split("-")[0];if(u=vD(c),u)return u;if("en"===c)return yD;throw new re(701,!1)}function kE(s){return OE(s)[Pt.PluralCase]}function vD(s){return s in Bd||(Bd[s]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[s]),Bd[s]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const $o="en-US";let ru=$o;function Of(s,o,u,c,d){if(s=Oe(s),Array.isArray(s))for(let p=0;p<s.length;p++)Of(s[p],o,u,c,d);else{const p=nn(),y=Re();let E=af(s)?s:Oe(s.provide),b=jC(s);const A=pr(),x=1048575&A.providerIndexes,j=A.directiveStart,Y=A.providerIndexes>>20;if(af(s)||!s.multi){const ne=new gt(b,d,Ed),Te=Ny(E,o,d?x:x+Y,j);-1===Te?(Mu(No(A,y),p,E),xy(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Te]=ne,y[Te]=ne)}else{const ne=Ny(E,o,x+Y,j),Te=Ny(E,o,x,x+Y),tt=Te>=0&&u[Te];if(d&&!tt||!d&&!(ne>=0&&u[ne])){Mu(No(A,y),p,E);const vt=function yR(s,o,u,c,d){const p=new gt(s,u,Ed);return p.multi=[],p.index=o,p.componentProviders=0,YE(p,d,c&&!u),p}(d?BD:_R,u.length,d,c,b);!d&&tt&&(u[Te].providerFactory=vt),xy(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(vt),y.push(vt)}else xy(p,s,ne>-1?ne:Te,YE(u[d?Te:ne],b,!d&&c));!d&&c&&tt&&u[Te].componentProviders++}}}function xy(s,o,u,c){const d=af(o),p=function vO(s){return!!s.useClass}(o);if(d||p){const b=(p?Oe(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(u);-1===x?A.push(u,[c,b]):A[x+1].push(c,b)}else A.push(u,b)}}}function YE(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Ny(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function _R(s,o,u,c){return Py(this.multi,[])}function BD(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Po(u,u[st],this.providerFactory.index,c);p=E.slice(0,y),Py(d,p);for(let b=y;b<E.length;b++)p.push(E[b])}else p=[],Py(d,p);return p}function Py(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function jD(s,o=[]){return u=>{u.providersResolver=(c,d)=>function zg(s,o,u){const c=nn();if(c.firstCreatePass){const d=Tn(s);Of(u,c.data,c.blueprint,d,!0),Of(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class kf{}class HD{}function QE(s,o){return new Oy(s,o??null,[])}class Oy extends kf{constructor(o,u,c){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Eb(this);const d=ti(o);this._bootstrapComponents=Vu(d.bootstrap),this._r3Injector=sb(o,u,[{provide:kf,useValue:this},{provide:eg,useValue:this.componentFactoryResolver},...c],ie(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class XE extends HD{constructor(o){super(),this.moduleType=o}create(o){return new Oy(this.moduleType,o,[])}}class ky extends kf{constructor(o){super(),this.componentFactoryResolver=new Eb(this),this.instance=null;const u=new P_([...o.providers,{provide:kf,useValue:this},{provide:eg,useValue:this.componentFactoryResolver}],o.parent||N_(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function JE(s,o,u=null){return new ky({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let qg=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const c=dM(0,u.type),d=c.length>0?JE([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Ut({token:s,providedIn:"environment",factory:()=>new s(Ln(gd))}),s})();function ba(s){s.getStandaloneInjector=o=>o.get(qg).getOrCreateStandaloneInjector(s)}function a0(s){return o=>{setTimeout(s,void 0,o)}}const Da=class Wd extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=a0(p),d&&(d=a0(d)),y&&(y=a0(y)));const E=super.subscribe({next:d,error:p,complete:y});return o instanceof H.w0&&o.add(E),E}};function AR(){return this._results[Symbol.iterator]()}class u0{get changes(){return this._changes||(this._changes=new Da)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=u0.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=AR)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function Bi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ms(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qg=(()=>{class s{}return s.__NG_ELEMENT_ID__=cc,s})();const Xg=Qg,qd=class extends Xg{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,c){const y=this._declarationTContainer.tView,E=Id(this._declarationLView,y,o,4096&this._declarationLView[Lt]?4096:16,null,y.declTNode,null,null,null,u||null,c||null);E[_l]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[Ps];return null!==A&&(E[Ps]=A.createEmbeddedView(y)),rE(y,E,o),new _f(E)}};function cc(){return Jg(pr(),Re())}function Jg(s,o){return 4&s.type?new qd(o,s,yd(s,o)):null}let Uy=(()=>{class s{}return s.__NG_ELEMENT_ID__=d0,s})();function d0(){return nm(pr(),Re())}const By=Uy,iT=class extends By{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return yd(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const o=ps(this._hostTNode,this._hostLView);if(St(o)){const u=Ha(o,this._hostLView),c=Fi(o);return new Js(u[st].data[c+8],u)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=h0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-kr}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const E=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(E,d,false),E}createComponent(o,u,c,d,p){const y=o&&!function xu(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const Ue=u||{};E=Ue.index,c=Ue.injector,d=Ue.projectableNodes,p=Ue.environmentInjector||Ue.ngModuleRef}const b=y?o:new ju(jt(o)),A=c||this.parentInjector;if(!p&&null==b.ngModule){const tt=(y?A:this.parentInjector).get(gd,null);tt&&(p=tt)}jt(b.componentType??{});const ne=b.create(A,d,null,p);return this.insertImpl(ne.hostView,E,false),ne}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,c){const d=o._lView,p=d[st];if(function Ah(s){return $r(s[$n])}(d)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const A=d[$n],x=new iT(A,A[Pr],A[$n]);x.detach(x.indexOf(o))}}const y=this._adjustIndex(u),E=this._lContainer;if(function LA(s,o,u,c){const d=kr+c,p=u.length;c>0&&(u[d-1][ni]=o),c<p-kr?(o[ni]=u[d],nd(u,kr+c,o)):(u.push(o),o[ni]=null),o[$n]=u;const y=o[_l];null!==y&&u!==y&&function lO(s,o){const u=s[Pa];o[xn]!==o[$n][$n][xn]&&(s[Qo]=!0),null===u?s[Pa]=[o]:u.push(o)}(y,o);const E=o[Ps];null!==E&&E.insertView(s),o[Lt]|=128}(p,d,E,y),!c){const b=iw(y,E),A=d[Tt],x=ku(A,E[Pi]);null!==x&&function oO(s,o,u,c,d,p){c[sr]=d,c[Pr]=o,ef(s,c,u,1,d,p)}(p,E[Pr],A,d,x,b)}return o.attachToViewContainerRef(),nd(Kd(E),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=h0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=nw(this._lContainer,u);c&&(rd(Kd(this._lContainer),u),f_(c[st],c))}detach(o){const u=this._adjustIndex(o,-1),c=nw(this._lContainer,u);return c&&null!=rd(Kd(this._lContainer),u)?new _f(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function h0(s){return s[8]}function Kd(s){return s[8]||(s[8]=[])}function nm(s,o){let u;const c=o[s.index];return $r(c)?u=c:(u=gb(c,o,null,s),o[s.index]=u,Vo(o,u)),f0(u,o,s,c),new iT(u,s,o)}let f0=function p0(s,o,u,c){if(s[Pi])return;let d;d=8&u.type?bn(c):function rm(s,o){const u=s[Tt],c=u.createComment(""),d=Gr(o,s);return dd(u,ku(u,d),c,function qp(s,o){return s.nextSibling(o)}(u,d),!1),c}(o,u),s[Pi]=d};class Bf{constructor(o){this.queryList=o,this.matches=null}clone(){return new Bf(this.queryList)}setDirty(){this.queryList.setDirty()}}class jf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new jf(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==dT(o,u).matches&&this.queries[u].setDirty()}}class g0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class iu{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new iu(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class dc{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new dc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,oT(u,p)),this.matchTNodeWithReadOption(o,u,oa(u,o,p,!1,!1))}else c===Qg?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,oa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===vd||d===Uy||d===Qg&&4&u.type)this.addMatch(u.index,-2);else{const p=oa(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function oT(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function RR(s,o,u,c){return-1===u?function Zd(s,o){return 11&s.type?yd(s,o):4&s.type?Jg(s,o):null}(o,s):-2===u?function Hf(s,o,u){return u===vd?yd(o,s):u===Qg?Jg(o,s):u===Uy?nm(o,s):void 0}(s,o,c):Po(s,s[st],u,o)}function m0(s,o,u,c){const d=o[Ps].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:RR(o,p[A],y[b+1],u.metadata.read))}d.matches=E}return d.matches}function su(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=m0(s,o,d,u);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(y[E/2]);else{const A=p[E+1],x=o[-b];for(let j=kr;j<x.length;j++){const Y=x[j];Y[_l]===Y[$n]&&su(Y[st],Y,A,c)}if(null!==x[Pa]){const j=x[Pa];for(let Y=0;Y<j.length;Y++){const ne=j[Y];su(ne[st],ne,A,c)}}}}}return c}function _0(s){const o=Re(),u=nn(),c=Ol();So(c+1);const d=dT(u,c);if(s.dirty&&function Dp(s){return 4==(4&s[Lt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?su(u,o,c,[]):m0(u,o,d,c);s.reset(p,bw),s.notifyOnChanges()}return!0}return!1}function y0(s,o,u,c){const d=nn();if(d.firstCreatePass){const p=pr();(function im(s,o,u){null===s.queries&&(s.queries=new iu),s.queries.track(new dc(o,u))})(d,new g0(o,u,c),p.index),function cT(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function lT(s,o,u){const c=new u0(4==(4&u));(function lb(s,o,u,c){const d=nE(o);d.push(u),s.firstCreatePass&&Jn(s).push(c,d.length-1)})(s,o,c,c.destroy),null===o[Ps]&&(o[Ps]=new jf),o[Ps].queries.push(new Bf(c))}(d,Re(),u)}function aT(){return function uT(s,o){return s[Ps].queries[o].queryList}(Re(),Ol())}function dT(s,o){return s.queries.getByIndex(o)}function jy(s){return!!ti(s)}const lm=new In("Application Initializer");let cm=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c}),this.appInits=Jt(lm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const p=d();if(Xe(p))u.push(p);else if(bg(p)){const y=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});u.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),TT=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const fi=new In("LocaleId",{providedIn:"root",factory:()=>Jt(fi,Ye.Optional|Ye.SkipSelf)||function zR(){return typeof $localize<"u"&&$localize.locale||$o}()}),WR=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Qy=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new O.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class ST{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let KR=(()=>{class s{compileModuleSync(u){return new XE(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Vu(ti(u).declarations).reduce((y,E)=>{const b=jt(E);return b&&y.push(new ju(b)),y},[]);return new ST(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Jy(...s){}class Si{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Gf(){const s="function"==typeof qt.requestAnimationFrame;let o=qt[s?"requestAnimationFrame":"setTimeout"],u=qt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function x0(s){const o=()=>{!function RT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(qt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fm(s),s.isCheckStableRunning=!0,hm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return tl(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),N0(s)}},onInvoke:(u,c,d,p,y,E,b)=>{try{return tl(s),u.invoke(d,p,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),N0(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,fm(s),hm(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Si.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(Si.isInAngularZone())throw new re(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,dm,Jy,Jy);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const dm={};function hm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function tl(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function N0(s){s._nesting--,hm(s)}class QR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const ev=new In("",{providedIn:"root",factory:xT});function xT(){const s=Jt(Si);let o=!0;const u=new J.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new J.y(d=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{Si.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ae.T)(u,c.pipe((0,Ee.B)()))}const tv=new In(""),NT=new In("");let nv,P0=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nv||(function O0(s){nv=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ln(Si),Ln(pm),Ln(NT))},s.\u0275prov=Ut({token:s,factory:s.\u0275fac}),s})(),pm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return nv?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ho=null;const rv=new In("AllowMultipleToken"),k0=new In("PlatformDestroyListeners"),F0=new In("appBootstrapListener");class JR{constructor(o,u){this.name=o,this.token=u}}function sv(s,o,u=[]){const c=`Platform: ${o}`,d=new In(c);return(p=[])=>{let y=gm();if(!y||y.injector.get(rv,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function V0(s){if(ho&&!ho.get(rv,!1))throw new re(400,!1);(function OT(){!function bh(s){Ch=s}(()=>{throw new re(600,!1)})})(),ho=s;const o=s.get(th);(function iv(s){s.get(_M,null)?.forEach(u=>u())})(s)}(function ov(s=[],o){return Fo.create({name:o,providers:[{provide:BC,useValue:"platform"},{provide:k0,useValue:new Set([()=>ho=null])},...s]})}(E,c))}return function kT(s){const o=gm();if(!o)throw new re(401,!1);return o}()}}function gm(){return ho?.get(th)??null}let th=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function U0(s="zone.js",o){return"noop"===s?new QR:"zone.js"===s?new Si(o):s}(c?.ngZone,function nl(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function Vr(s,o,u){return new Oy(s,o,u)}(u.moduleType,this.injector,function av(s){return[{provide:Si,useFactory:s},{provide:A_,multi:!0,useFactory:()=>{const o=Jt(j0,{optional:!0});return()=>o.initialize()}},{provide:VT,useFactory:B0},{provide:ev,useFactory:xT}]}(()=>d)),y=p.injector.get(Kl,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:b=>{y.handleError(b)}});p.onDestroy(()=>{rl(this._modules,p),E.unsubscribe()})}),function nh(s,o,u){try{const c=u();return Xe(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(y,d,()=>{const E=p.injector.get(cm);return E.runInitializers(),E.donePromise.then(()=>(function LE(s){Je(s,"Expected localeId to be defined"),"string"==typeof s&&(ru=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(fi,$o)||$o),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,c=[]){const d=rh({},c);return function PT(s,o,u){const c=new XE(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(ih);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new re(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(k0,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ln(Fo))},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function rh(s,o){return Array.isArray(o)?o.reduce(rh,s):{...s,...o}}let ih=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Jt(VT),this.zoneIsStable=Jt(ev),this.componentTypes=[],this.components=[],this.isStable=Jt(Qy).hasPendingTasks.pipe((0,xe.w)(u=>u?(0,ve.of)(!1):this.zoneIsStable),(0,we.x)(),(0,Ee.B)()),this._injector=Jt(gd)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof qC;if(!this._injector.get(cm).done)throw!d&&Zs(u),new re(405,!1);let y;y=d?u:this._injector.get(eg).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function L0(s){return s.isBoundToModule}(y)?void 0:this._injector.get(kf),A=y.create(Fo.NULL,[],c||y.selector,E),x=A.location.nativeElement,j=A.injector.get(tv,null);return j?.registerApplication(x),A.onDestroy(()=>{this.detachView(A.hostView),rl(this.components,A),j?.unregisterApplication(x)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;rl(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(F0,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>rl(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new re(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function rl(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const VT=new In("",{providedIn:"root",factory:()=>Jt(Kl).handleError.bind(void 0)});function B0(){const s=Jt(Si),o=Jt(Kl);return u=>s.runOutsideAngular(()=>o.handleError(u))}let j0=(()=>{class s{constructor(){this.zone=Jt(Si),this.applicationRef=Jt(ih)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function nx(){return!1}let rx=(()=>{class s{}return s.__NG_ELEMENT_ID__=HT,s})();function HT(s){return function $T(s,o,u){if(cs(s)&&!u){const c=Qi(s.index,o);return new _f(c,c)}return 47&s.type?new _f(o[xn],o):null}(pr(),Re(),16==(16&s))}class cv{constructor(){}supports(o){return ry(o)}create(o){return new q0(o)}}const ax=(s,o)=>o;class q0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ax}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<Y0(c,d,p)?u:c,E=Y0(y,d,p),b=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,x=b-d;if(A!=x){for(let Y=0;Y<A;Y++){const ne=Y<p.length?p[Y]:p[Y]=0,Te=ne+Y;x<=Te&&Te<A&&(p[Y]=ne+1)}p[y.previousIndex]=x-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!ry(o))throw new re(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function _g(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new K0(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new sh),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sh),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class K0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Z0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class sh{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Z0,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Y0(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class dv{constructor(){}supports(o){return o instanceof Map||iy(o)}create(){return new ux}}class ux{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||iy(o)))throw new re(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new Q0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Q0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ou(){return new _m([new cv])}let _m=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ou()),deps:[[s,new ai,new to]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new re(901,!1)}}return s.\u0275prov=Ut({token:s,providedIn:"root",factory:ou}),s})();function hv(){return new X0([new dv])}let X0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||hv()),deps:[[s,new ai,new to]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new re(901,!1)}}return s.\u0275prov=Ut({token:s,providedIn:"root",factory:hv}),s})();const cx=sv(null,"core",[]);let eI=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ln(ih))},s.\u0275mod=pu({type:s}),s.\u0275inj=Hn({}),s})();function mx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function mv(s){const o=jt(s);if(!o)return null;const u=new ju(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(mt,Ae,L)=>{L.d(Ae,{Z:()=>Ke});var f=L(9058),H=L(4537),O=L(534),J=L(7879);class ae{constructor(Ze,Fe){this._delegate=Ze,this.firebase=Fe,(0,O._addComponent)(Ze,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ze,Fe=O._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(Ze);return!ht.isInitialized()&&"EXPLICIT"===(null===(Ct=ht.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:Fe})}_removeServiceInstance(Ze,Fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Fe)}_addComponent(Ze){(0,O._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,O._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function we(){const Oe=function xe(Oe){const Ze={},Fe={__esModule:!0,initializeApp:function re(ke,te={}){const nt=O.initializeApp(ke,te);if((0,f.r3)(Ze,nt.name))return Ze[nt.name];const Ge=new Oe(nt,Fe);return Ze[nt.name]=Ge,Ge},app:ht,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ue(ke){const te=ke.name,nt=te.replace("-compat","");if(O._registerComponent(ke)&&"PUBLIC"===ke.type){const Ge=(tn=ht())=>{if("function"!=typeof tn[nt])throw Ee.create("invalid-app-argument",{appName:te});return tn[nt]()};void 0!==ke.serviceProps&&(0,f.ZB)(Ge,ke.serviceProps),Fe[nt]=Ge,Oe.prototype[nt]=function(...tn){return this._getService.bind(this,te).apply(this,ke.multipleInstances?tn:[])}}return"PUBLIC"===ke.type?Fe[nt]:null},removeApp:function Ct(ke){delete Ze[ke]},useAsService:function ye(ke,te){return"serverAuth"===te?null:te},modularAPIs:O}};function ht(ke){if(!(0,f.r3)(Ze,ke=ke||O._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:ke});return Ze[ke]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function De(){return Object.keys(Ze).map(ke=>Ze[ke])}}),ht.App=Oe,Fe}(ae);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ze(Fe){(0,f.ZB)(Oe,Fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Oe}(),q=new J.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=z;!function Ne(Oe){(0,O.registerVersion)("@firebase/app-compat","0.2.13",Oe)}()},534:(mt,Ae,L)=>{L.r(Ae),L.d(Ae,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>Ye,_addComponent:()=>lr,_addOrOverwriteComponent:()=>gi,_apps:()=>wt,_clearComponents:()=>mn,_components:()=>Xt,_getProvider:()=>nr,_registerComponent:()=>qt,_removeServiceInstance:()=>as,deleteApp:()=>Dn,getApp:()=>xr,getApps:()=>Kn,initializeApp:()=>Ns,onLog:()=>cr,registerVersion:()=>Fn,setLogLevel:()=>Ln});var f=L(5861),H=L(4537),O=L(7879),J=L(9058);const ae=(_e,oe)=>oe.some(Ve=>_e instanceof Ve);let ve,Ee;const z=new WeakMap,q=new WeakMap,ie=new WeakMap,Le=new WeakMap,Ne=new WeakMap;let Ze={get(_e,oe,Ve){if(_e instanceof IDBTransaction){if("done"===oe)return q.get(_e);if("objectStoreNames"===oe)return _e.objectStoreNames||ie.get(_e);if("store"===oe)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return re(_e[oe])},set:(_e,oe,Ve)=>(_e[oe]=Ve,!0),has:(_e,oe)=>_e instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in _e};function ht(_e){return"function"==typeof _e?function Ct(_e){return _e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_e)?function(...oe){return _e.apply(De(this),oe),re(z.get(this))}:function(...oe){return re(_e.apply(De(this),oe))}:function(oe,...Ve){const _t=_e.call(De(this),oe,...Ve);return ie.set(_t,oe.sort?oe.sort():[oe]),re(_t)}}(_e):(_e instanceof IDBTransaction&&function Oe(_e){if(q.has(_e))return;const oe=new Promise((Ve,_t)=>{const xt=()=>{_e.removeEventListener("complete",Gt),_e.removeEventListener("error",sn),_e.removeEventListener("abort",sn)},Gt=()=>{Ve(),xt()},sn=()=>{_t(_e.error||new DOMException("AbortError","AbortError")),xt()};_e.addEventListener("complete",Gt),_e.addEventListener("error",sn),_e.addEventListener("abort",sn)});q.set(_e,oe)}(_e),ae(_e,function xe(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_e,Ze):_e)}function re(_e){if(_e instanceof IDBRequest)return function Ke(_e){const oe=new Promise((Ve,_t)=>{const xt=()=>{_e.removeEventListener("success",Gt),_e.removeEventListener("error",sn)},Gt=()=>{Ve(re(_e.result)),xt()},sn=()=>{_t(_e.error),xt()};_e.addEventListener("success",Gt),_e.addEventListener("error",sn)});return oe.then(Ve=>{Ve instanceof IDBCursor&&z.set(Ve,_e)}).catch(()=>{}),Ne.set(oe,_e),oe}(_e);if(Le.has(_e))return Le.get(_e);const oe=ht(_e);return oe!==_e&&(Le.set(_e,oe),Ne.set(oe,_e)),oe}const De=_e=>Ne.get(_e),ke=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],nt=new Map;function Ge(_e,oe){if(!(_e instanceof IDBDatabase)||oe in _e||"string"!=typeof oe)return;if(nt.get(oe))return nt.get(oe);const Ve=oe.replace(/FromIndex$/,""),_t=oe!==Ve,xt=te.includes(Ve);if(!(Ve in(_t?IDBIndex:IDBObjectStore).prototype)||!xt&&!ke.includes(Ve))return;const Gt=function(){var sn=(0,f.Z)(function*(Ir,...Zn){const vo=this.transaction(Ir,xt?"readwrite":"readonly");let qo=vo.store;return _t&&(qo=qo.index(Zn.shift())),(yield Promise.all([qo[Ve](...Zn),xt&&vo.done]))[0]});return function(Zn){return sn.apply(this,arguments)}}();return nt.set(oe,Gt),Gt}!function Fe(_e){Ze=_e(Ze)}(_e=>({..._e,get:(oe,Ve,_t)=>Ge(oe,Ve)||_e.get(oe,Ve,_t),has:(oe,Ve)=>!!Ge(oe,Ve)||_e.has(oe,Ve)}));class tn{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(Ve=>{if(function fr(_e){const oe=_e.getComponent();return"VERSION"===oe?.type}(Ve)){const _t=Ve.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Ve=>Ve).join(" ")}}const Xr="@firebase/app",Rn=new O.Yd("@firebase/app"),Ye="[DEFAULT]",ft={[Xr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,Xt=new Map;function lr(_e,oe){try{_e.container.addComponent(oe)}catch(Ve){Rn.debug(`Component ${oe.name} failed to register with FirebaseApp ${_e.name}`,Ve)}}function gi(_e,oe){_e.container.addOrOverwriteComponent(oe)}function qt(_e){const oe=_e.name;if(Xt.has(oe))return Rn.debug(`There were multiple attempts to register component ${oe}.`),!1;Xt.set(oe,_e);for(const Ve of wt.values())lr(Ve,_e);return!0}function nr(_e,oe){const Ve=_e.container.getProvider("heartbeat").getImmediate({optional:!0});return Ve&&Ve.triggerHeartbeat(),_e.container.getProvider(oe)}function as(_e,oe,Ve=Ye){nr(_e,oe).clearInstance(Ve)}function mn(){Xt.clear()}const Ft=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kn{constructor(oe,Ve,_t){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},Ve),this._name=Ve.name,this._automaticDataCollectionEnabled=Ve.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Zi="9.23.0";function Ns(_e,oe={}){let Ve=_e;"object"!=typeof oe&&(oe={name:oe});const _t=Object.assign({name:Ye,automaticDataCollectionEnabled:!1},oe),xt=_t.name;if("string"!=typeof xt||!xt)throw Ft.create("bad-app-name",{appName:String(xt)});if(Ve||(Ve=(0,J.aH)()),!Ve)throw Ft.create("no-options");const Gt=wt.get(xt);if(Gt){if((0,J.vZ)(Ve,Gt.options)&&(0,J.vZ)(_t,Gt.config))return Gt;throw Ft.create("duplicate-app",{appName:xt})}const sn=new H.H0(xt);for(const Zn of Xt.values())sn.addComponent(Zn);const Ir=new kn(Ve,_t,sn);return wt.set(xt,Ir),Ir}function xr(_e=Ye){const oe=wt.get(_e);if(!oe&&_e===Ye&&(0,J.aH)())return Ns();if(!oe)throw Ft.create("no-app",{appName:_e});return oe}function Kn(){return Array.from(wt.values())}function Dn(_e){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(_e){const oe=_e.name;wt.has(oe)&&(wt.delete(oe),yield Promise.all(_e.container.getProviders().map(Ve=>Ve.delete())),_e.isDeleted=!0)})).apply(this,arguments)}function Fn(_e,oe,Ve){var _t;let xt=null!==(_t=ft[_e])&&void 0!==_t?_t:_e;Ve&&(xt+=`-${Ve}`);const Gt=xt.match(/\s|\//),sn=oe.match(/\s|\//);if(Gt||sn){const Ir=[`Unable to register library "${xt}" with version "${oe}":`];return Gt&&Ir.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Gt&&sn&&Ir.push("and"),sn&&Ir.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void Rn.warn(Ir.join(" "))}qt(new H.wA(`${xt}-version`,()=>({library:xt,version:oe}),"VERSION"))}function cr(_e,oe){if(null!==_e&&"function"!=typeof _e)throw Ft.create("invalid-log-argument");(0,O.Am)(_e,oe)}function Ln(_e){(0,O.Ub)(_e)}const ei="firebase-heartbeat-database",Jt=1,W="firebase-heartbeat-store";let G=null;function F(){return G||(G=function ue(_e,oe,{blocked:Ve,upgrade:_t,blocking:xt,terminated:Gt}={}){const sn=indexedDB.open(_e,oe),Ir=re(sn);return _t&&sn.addEventListener("upgradeneeded",Zn=>{_t(re(sn.result),Zn.oldVersion,Zn.newVersion,re(sn.transaction),Zn)}),Ve&&sn.addEventListener("blocked",Zn=>Ve(Zn.oldVersion,Zn.newVersion,Zn)),Ir.then(Zn=>{Gt&&Zn.addEventListener("close",()=>Gt()),xt&&Zn.addEventListener("versionchange",vo=>xt(vo.oldVersion,vo.newVersion,vo))}).catch(()=>{}),Ir}(ei,Jt,{upgrade:(_e,oe)=>{0===oe&&_e.createObjectStore(W)}}).catch(_e=>{throw Ft.create("idb-open",{originalErrorMessage:_e.message})})),G}function P(){return(P=(0,f.Z)(function*(_e){try{return yield(yield F()).transaction(W).objectStore(W).get(qe(_e))}catch(oe){if(oe instanceof J.ZR)Rn.warn(oe.message);else{const Ve=Ft.create("idb-get",{originalErrorMessage:oe?.message});Rn.warn(Ve.message)}}})).apply(this,arguments)}function ee(_e,oe){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,f.Z)(function*(_e,oe){try{const _t=(yield F()).transaction(W,"readwrite");yield _t.objectStore(W).put(oe,qe(_e)),yield _t.done}catch(Ve){if(Ve instanceof J.ZR)Rn.warn(Ve.message);else{const _t=Ft.create("idb-set",{originalErrorMessage:Ve?.message});Rn.warn(_t.message)}}})).apply(this,arguments)}function qe(_e){return`${_e.name}!${_e.options.appId}`}class pt{constructor(oe){this.container=oe,this._heartbeatsCache=null;const Ve=this.container.getProvider("app").getImmediate();this._storage=new Bt(Ve),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var oe=this;return(0,f.Z)(function*(){const _t=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=Rt();if(null===oe._heartbeatsCache&&(oe._heartbeatsCache=yield oe._heartbeatsCachePromise),oe._heartbeatsCache.lastSentHeartbeatDate!==xt&&!oe._heartbeatsCache.heartbeats.some(Gt=>Gt.date===xt))return oe._heartbeatsCache.heartbeats.push({date:xt,agent:_t}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter(Gt=>{const sn=new Date(Gt.date).valueOf();return Date.now()-sn<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache)})()}getHeartbeatsHeader(){var oe=this;return(0,f.Z)(function*(){if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null===oe._heartbeatsCache||0===oe._heartbeatsCache.heartbeats.length)return"";const Ve=Rt(),{heartbeatsToSend:_t,unsentEntries:xt}=function wn(_e,oe=1024){const Ve=[];let _t=_e.slice();for(const xt of _e){const Gt=Ve.find(sn=>sn.agent===xt.agent);if(Gt){if(Gt.dates.push(xt.date),Er(Ve)>oe){Gt.dates.pop();break}}else if(Ve.push({agent:xt.agent,dates:[xt.date]}),Er(Ve)>oe){Ve.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Ve,unsentEntries:_t}}(oe._heartbeatsCache.heartbeats),Gt=(0,J.L)(JSON.stringify({version:2,heartbeats:_t}));return oe._heartbeatsCache.lastSentHeartbeatDate=Ve,xt.length>0?(oe._heartbeatsCache.heartbeats=xt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),Gt})()}}function Rt(){return(new Date).toISOString().substring(0,10)}class Bt{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,f.Z)(function*(){return(yield oe._canUseIndexedDBPromise)&&(yield function V(_e){return P.apply(this,arguments)}(oe.app))||{heartbeats:[]}})()}overwrite(oe){var Ve=this;return(0,f.Z)(function*(){var _t;if(yield Ve._canUseIndexedDBPromise){const Gt=yield Ve.read();return ee(Ve.app,{lastSentHeartbeatDate:null!==(_t=oe.lastSentHeartbeatDate)&&void 0!==_t?_t:Gt.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var Ve=this;return(0,f.Z)(function*(){var _t;if(yield Ve._canUseIndexedDBPromise){const Gt=yield Ve.read();return ee(Ve.app,{lastSentHeartbeatDate:null!==(_t=oe.lastSentHeartbeatDate)&&void 0!==_t?_t:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...oe.heartbeats]})}})()}}function Er(_e){return(0,J.L)(JSON.stringify({version:2,heartbeats:_e})).length}!function Nr(_e){qt(new H.wA("platform-logger",oe=>new tn(oe),"PRIVATE")),qt(new H.wA("heartbeat",oe=>new pt(oe),"PRIVATE")),Fn(Xr,"0.9.13",_e),Fn(Xr,"0.9.13","esm2017"),Fn("fire-js","")}("")},4537:(mt,Ae,L)=>{L.d(Ae,{H0:()=>xe,wA:()=>O,zt:()=>ae});var f=L(5861),H=L(9058);class O{constructor(z,q,ie){this.name=z,this.instanceFactory=q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const J="[DEFAULT]";class ae{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ie=new H.BH;if(this.instancesDeferred.set(q,ie),this.isInitialized(q)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:q});Le&&ie.resolve(Le)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ie=this.normalizeInstanceIdentifier(z?.identifier),Le=null!==(q=z?.optional)&&void 0!==q&&q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ne){if(Le)return null;throw Ne}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ee(we){return"EAGER"===we.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[q,ie]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(q);try{const Ne=this.getOrInitializeService({instanceIdentifier:Le});ie.resolve(Ne)}catch{}}}}clearInstance(z=J){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=J){return this.instances.has(z)}getOptions(z=J){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ie=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:ie,options:q});for(const[Ne,Ke]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ne)&&Ke.resolve(Le);return Le}onInit(z,q){var ie;const Le=this.normalizeInstanceIdentifier(q),Ne=null!==(ie=this.onInitCallbacks.get(Le))&&void 0!==ie?ie:new Set;Ne.add(z),this.onInitCallbacks.set(Le,Ne);const Ke=this.instances.get(Le);return Ke&&z(Ke,Le),()=>{Ne.delete(z)}}invokeOnInitCallbacks(z,q){const ie=this.onInitCallbacks.get(q);if(ie)for(const Le of ie)try{Le(z,q)}catch{}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ie=this.instances.get(z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(we=z,we===J?void 0:we),options:q}),this.instances.set(z,ie),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ie,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ie)}catch{}var we;return ie||null}normalizeInstanceIdentifier(z=J){return this.component?this.component.multipleInstances?z:J:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new ae(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},7879:(mt,Ae,L)=>{L.d(Ae,{Am:()=>we,Ub:()=>xe,Yd:()=>Ee,in:()=>H});const f=[];var H=(()=>((H=H||{})[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",H))();const O={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},J=H.INFO,ae={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ve=(z,q,...ie)=>{if(q<z.logLevel)return;const Le=(new Date).toISOString(),Ne=ae[q];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ne](`[${Le}]  ${z.name}:`,...ie)};class Ee{constructor(q){this.name=q,this._logLevel=J,this._logHandler=ve,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in H))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...q),this._logHandler(this,H.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...q),this._logHandler(this,H.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,H.INFO,...q),this._logHandler(this,H.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,H.WARN,...q),this._logHandler(this,H.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...q),this._logHandler(this,H.ERROR,...q)}}function xe(z){f.forEach(q=>{q.setLogLevel(z)})}function we(z,q){for(const ie of f){let Le=null;q&&q.level&&(Le=O[q.level]),ie.userLogHandler=null===z?null:(Ne,Ke,...Oe)=>{const Ze=Oe.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Ke>=(Le??Ne.logLevel)&&z({level:H[Ke].toLowerCase(),message:Ze,args:Oe,type:Ne.name})}}}},3182:(mt,Ae,L)=>{L.d(Ae,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=L(534);(0,f.registerVersion)("firebase","9.23.0","app")},7142:(mt,Ae,L)=>{L.d(Ae,{Z:()=>f.Z});var f=L(3106);f.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(mt,Ae,L)=>{L.r(Ae);var f=L(5861),H=L(3106),O=L(6878),J=L(9058),Ee=(L(534),L(7879),L(4537));function xe(){return window}function q(){return q=(0,f.Z)(function*(F,V,P){var ee;const{BuildInfo:Ie}=xe();(0,O.as)(V.sessionId,"AuthEvent did not contain a session ID");const qe=yield function Fe(F){return Ct.apply(this,arguments)}(V.sessionId),Et={};return(0,O.at)()?Et.ibi=Ie.packageName:(0,O.au)()?Et.apn=Ie.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),Ie.displayName&&(Et.appDisplayName=Ie.displayName),Et.sessionId=qe,(0,O.aw)(F,P,V.type,void 0,null!==(ee=V.eventId)&&void 0!==ee?ee:void 0,Et)}),q.apply(this,arguments)}function Le(){return(Le=(0,f.Z)(function*(F){const{BuildInfo:V}=xe(),P={};(0,O.at)()?P.iosBundleId=V.packageName:(0,O.au)()?P.androidPackageName=V.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,P)})).apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(F,V,P){const{cordova:ee}=xe();let Ie=()=>{};try{yield new Promise((qe,Et)=>{let yt=null;function pt(){var Bt;qe();const Er=null===(Bt=ee.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Er&&Er(),"function"==typeof P?.close&&P.close()}function Rt(){yt||(yt=window.setTimeout(()=>{Et((0,O.az)(F,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Rt()}V.addPassiveListener(pt),document.addEventListener("resume",Rt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",wn,!1),Ie=()=>{V.removePassiveListener(pt),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",wn,!1),yt&&window.clearTimeout(yt)}})}finally{Ie()}})).apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(F){const V=function ht(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const V=new ArrayBuffer(F.length),P=new Uint8Array(V);for(let ee=0;ee<F.length;ee++)P[ee]=F.charCodeAt(ee);return P}(F),P=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(P)).map(Ie=>Ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class De extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(V)),super.onEvent(V)}initialized(){var V=this;return(0,f.Z)(function*(){yield V.initPromise})()}}function ke(F){return te.apply(this,arguments)}function te(){return(te=(0,f.Z)(function*(F){const V=yield tn()._get(fr(F));return V&&(yield tn()._remove(fr(F))),V})).apply(this,arguments)}function Ge(){const F=[];for(let P=0;P<20;P++){const ee=Math.floor(62*Math.random());F.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(ee))}return F.join("")}function tn(){return(0,O.aC)(O.b)}function fr(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function Rn(F){if(!F?.includes("?"))return{};const[V,...P]=F.split("?");return(0,J.zd)(P.join("?"))}const he=class Ks{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var P=this;return(0,f.Z)(function*(){const ee=V._key();let Ie=P.eventManagers.get(ee);return Ie||(Ie=new De(V),P.eventManagers.set(ee,Ie),P.attachCallbackListeners(V,Ie)),Ie})()}_openPopup(V){(0,O.av)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,P,ee,Ie){var qe=this;return(0,f.Z)(function*(){!function Ze(F){var V,P,ee,Ie,qe,Et,yt,pt,Rt,wn;const Bt=xe();(0,O.aA)("function"==typeof(null===(V=Bt?.universalLinks)||void 0===V?void 0:V.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(P=Bt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(qe=null===(Ie=null===(ee=Bt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===qe?void 0:qe.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(pt=null===(yt=null===(Et=Bt?.cordova)||void 0===Et?void 0:Et.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===pt?void 0:pt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(wn=null===(Rt=Bt?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===wn?void 0:wn.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const Et=yield qe._initialize(V);yield Et.initialized(),Et.resetRedirect(),(0,O.aG)(),yield qe._originValidation(V);const yt=function ue(F,V,P=null){return{type:V,eventId:P,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(V,ee,Ie);yield function ye(F,V){return tn()._set(fr(F),V)}(V,yt);const pt=yield function z(F,V,P){return q.apply(this,arguments)}(V,yt,P),Rt=yield function Ne(F){const{cordova:V}=xe();return new Promise(P=>{V.plugins.browsertab.isAvailable(ee=>{let Ie=null;ee?V.plugins.browsertab.openUrl(F):Ie=V.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),P(Ie)})})}(pt);return function Ke(F,V,P){return Oe.apply(this,arguments)}(V,Et,Rt)})()}_isIframeWebStorageSupported(V,P){throw new Error("Method not implemented.")}_originValidation(V){const P=V._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function ie(F){return Le.apply(this,arguments)}(V)),this.originValidationPromises[P]}attachCallbackListeners(V,P){const{universalLinks:ee,handleOpenURL:Ie,BuildInfo:qe}=xe(),Et=setTimeout((0,f.Z)(function*(){yield ke(V),P.onEvent(me())}),500),yt=function(){var wn=(0,f.Z)(function*(Bt){clearTimeout(Et);const Er=yield ke(V);let Nr=null;Er&&Bt?.url&&(Nr=function nt(F,V){var P,ee;const Ie=function Rs(F){const V=Rn(F),P=V.link?decodeURIComponent(V.link):void 0,ee=Rn(P).link,Ie=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return Rn(Ie).link||Ie||ee||P||F}(V);if(Ie.includes("/__/auth/callback")){const qe=Rn(Ie),Et=qe.firebaseError?function Xr(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(qe.firebaseError)):null,yt=null===(ee=null===(P=Et?.code)||void 0===P?void 0:P.split("auth/"))||void 0===ee?void 0:ee[1],pt=yt?(0,O.az)(yt):null;return pt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:Ie,postBody:null}}return null}(Er,Bt.url)),P.onEvent(Nr||me())});return function(Er){return wn.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,yt);const pt=Ie,Rt=`${qe.packageName.toLowerCase()}://`;xe().handleOpenURL=function(){var wn=(0,f.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Rt)&&yt({url:Bt}),"function"==typeof pt)try{pt(Bt)}catch(Er){console.error(Er)}});return function(Bt){return wn.apply(this,arguments)}}()}};function me(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function Je(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function fn(F=(0,J.z$)()){return!("file:"!==Je()&&"ionic:"!==Je()&&"capacitor:"!==Je()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hn(){try{const F=self.localStorage,V=O.aL();if(F)return F.setItem(V,"1"),F.removeItem(V),!function gn(F=(0,J.z$)()){return function an(){return(0,J.w1)()&&11===document?.documentMode}()||function Ut(F=(0,J.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,J.hl)()}catch{return On()&&(0,J.hl)()}return!1}function On(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pn(){return(function ut(){return"http:"===Je()||"https:"===Je()}()||(0,J.ru)()||fn())&&!function At(){return(0,J.b$)()||(0,J.UG)()}()&&Hn()&&!On()}function tr(){return fn()&&typeof document<"u"}function Ki(){return(Ki=(0,f.Z)(function*(){return!!tr()&&new Promise(F=>{const V=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),F(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},Jr=O.aA,xs="persistence";function ft(F){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(F){yield F._initializationPromise;const V=lr(),P=O.aD(xs,F.config.apiKey,F.name);V&&V.setItem(P,F._getPersistence())})).apply(this,arguments)}function lr(){var F;try{return(null===(F=function Rr(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const gi=O.aA;class qt{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(he),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,P,ee,Ie){var qe=this;return(0,f.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openPopup(V,P,ee,Ie)})()}_openRedirect(V,P,ee,Ie){var qe=this;return(0,f.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openRedirect(V,P,ee,Ie)})()}_isIframeWebStorageSupported(V,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,P)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return tr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,f.Z)(function*(){if(V.underlyingResolver)return;const P=yield function Ni(){return Ki.apply(this,arguments)}();V.underlyingResolver=P?V.cordovaResolver:V.browserResolver})()}}function nr(F){return F.unwrap()}function mn(F){return Ft(F)}function Ft(F){const{_tokenResponse:V}=F instanceof J.ZR?F.customData:F;if(!V)return null;if(!(F instanceof J.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return O.P.credentialFromResult(F);const P=V.providerId;if(!P||P===O.p.PASSWORD)return null;let ee;switch(P){case O.p.GOOGLE:ee=O.V;break;case O.p.FACEBOOK:ee=O.U;break;case O.p.GITHUB:ee=O.W;break;case O.p.TWITTER:ee=O.Z;break;default:const{oauthIdToken:Ie,oauthAccessToken:qe,oauthTokenSecret:Et,pendingToken:yt,nonce:pt}=V;return qe||Et||Ie||yt?yt?P.startsWith("saml.")?O.aO._create(P,yt):O.L._fromParams({providerId:P,signInMethod:P,pendingToken:yt,idToken:Ie,accessToken:qe}):new O.X(P).credential({idToken:Ie,accessToken:qe,rawNonce:pt}):null}return F instanceof J.ZR?ee.credentialFromError(F):ee.credentialFromResult(F)}function kn(F,V){return V.catch(P=>{throw P instanceof J.ZR&&function jr(F,V){var P;const ee=null===(P=V.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===V?.code)V.resolver=new xr(F,O.aq(F,V));else if(ee){const Ie=Ft(V),qe=V;Ie&&(qe.credential=Ie,qe.tenantId=ee.tenantId||void 0,qe.email=ee.email||void 0,qe.phoneNumber=ee.phoneNumber||void 0)}}(F,P),P}).then(P=>{const Ie=P.user;return{operationType:P.operationType,credential:mn(P),additionalUserInfo:O.ao(P),user:Kn.getOrCreate(Ie)}})}function Zi(F,V){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,f.Z)(function*(F,V){const P=yield V;return{verificationId:P.verificationId,confirm:ee=>kn(F,P.confirm(ee))}})).apply(this,arguments)}class xr{constructor(V,P){this.resolver=P,this.auth=function as(F){return F.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return kn(nr(this.auth),this.resolver.resolveSignIn(V))}}class Kn{constructor(V){this._delegate=V,this.multiFactor=O.ar(V)}static getOrCreate(V){return Kn.USER_MAP.has(V)||Kn.USER_MAP.set(V,new Kn(V)),Kn.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var P=this;return(0,f.Z)(function*(){return kn(P.auth,O.a0(P._delegate,V))})()}linkWithPhoneNumber(V,P){var ee=this;return(0,f.Z)(function*(){return Zi(ee.auth,O.l(ee._delegate,V,P))})()}linkWithPopup(V){var P=this;return(0,f.Z)(function*(){return kn(P.auth,O.d(P._delegate,V,qt))})()}linkWithRedirect(V){var P=this;return(0,f.Z)(function*(){return yield ft(O.aH(P.auth)),O.g(P._delegate,V,qt)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var P=this;return(0,f.Z)(function*(){return kn(P.auth,O.a1(P._delegate,V))})()}reauthenticateWithPhoneNumber(V,P){return Zi(this.auth,O.r(this._delegate,V,P))}reauthenticateWithPopup(V){return kn(this.auth,O.e(this._delegate,V,qt))}reauthenticateWithRedirect(V){var P=this;return(0,f.Z)(function*(){return yield ft(O.aH(P.auth)),O.h(P._delegate,V,qt)})()}sendEmailVerification(V){return O.ae(this._delegate,V)}unlink(V){var P=this;return(0,f.Z)(function*(){return yield O.an(P._delegate,V),P})()}updateEmail(V){return O.aj(this._delegate,V)}updatePassword(V){return O.ak(this._delegate,V)}updatePhoneNumber(V){return O.u(this._delegate,V)}updateProfile(V){return O.ai(this._delegate,V)}verifyBeforeUpdateEmail(V,P){return O.af(this._delegate,V,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kn.USER_MAP=new WeakMap;const Dn=O.aA;let rr=(()=>{class F{constructor(P,ee){if(this.app=P,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ie}=P.options;Dn(Ie,"invalid-api-key",{appName:P.name}),Dn(Ie,"invalid-api-key",{appName:P.name});const qe=typeof window<"u"?qt:void 0;this._delegate=ee.initialize({options:{persistence:cr(Ie,P.name),popupRedirectResolver:qe}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,ee){O.I(this._delegate,P,ee)}applyActionCode(P){return O.a5(this._delegate,P)}checkActionCode(P){return O.a6(this._delegate,P)}confirmPasswordReset(P,ee){return O.a4(this._delegate,P,ee)}createUserWithEmailAndPassword(P,ee){var Ie=this;return(0,f.Z)(function*(){return kn(Ie._delegate,O.a8(Ie._delegate,P,ee))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return O.ad(this._delegate,P)}isSignInWithEmailLink(P){return O.ab(this._delegate,P)}getRedirectResult(){var P=this;return(0,f.Z)(function*(){Dn(pn(),P._delegate,"operation-not-supported-in-this-environment");const ee=yield O.j(P._delegate,qt);return ee?kn(P._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function be(F,V){(0,O.aH)(F)._logFramework(V)}(this._delegate,P)}onAuthStateChanged(P,ee,Ie){const{next:qe,error:Et,complete:yt}=Fn(P,ee,Ie);return this._delegate.onAuthStateChanged(qe,Et,yt)}onIdTokenChanged(P,ee,Ie){const{next:qe,error:Et,complete:yt}=Fn(P,ee,Ie);return this._delegate.onIdTokenChanged(qe,Et,yt)}sendSignInLinkToEmail(P,ee){return O.aa(this._delegate,P,ee)}sendPasswordResetEmail(P,ee){return O.a3(this._delegate,P,ee||void 0)}setPersistence(P){var ee=this;return(0,f.Z)(function*(){let Ie;switch(function Ye(F,V){Jr(Object.values(qn).includes(V),F,"invalid-persistence-type"),(0,J.b$)()?Jr(V!==qn.SESSION,F,"unsupported-persistence-type"):(0,J.UG)()?Jr(V===qn.NONE,F,"unsupported-persistence-type"):On()?Jr(V===qn.NONE||V===qn.LOCAL&&(0,J.hl)(),F,"unsupported-persistence-type"):Jr(V===qn.NONE||Hn(),F,"unsupported-persistence-type")}(ee._delegate,P),P){case qn.SESSION:Ie=O.a;break;case qn.LOCAL:Ie=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case qn.NONE:Ie=O.N;break;default:return O.av("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(Ie)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return kn(this._delegate,O._(this._delegate))}signInWithCredential(P){return kn(this._delegate,O.$(this._delegate,P))}signInWithCustomToken(P){return kn(this._delegate,O.a2(this._delegate,P))}signInWithEmailAndPassword(P,ee){return kn(this._delegate,O.a9(this._delegate,P,ee))}signInWithEmailLink(P,ee){return kn(this._delegate,O.ac(this._delegate,P,ee))}signInWithPhoneNumber(P,ee){return Zi(this._delegate,O.s(this._delegate,P,ee))}signInWithPopup(P){var ee=this;return(0,f.Z)(function*(){return Dn(pn(),ee._delegate,"operation-not-supported-in-this-environment"),kn(ee._delegate,O.c(ee._delegate,P,qt))})()}signInWithRedirect(P){var ee=this;return(0,f.Z)(function*(){return Dn(pn(),ee._delegate,"operation-not-supported-in-this-environment"),yield ft(ee._delegate),O.f(ee._delegate,P,qt)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return O.a7(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=qn,F})();function Fn(F,V,P){let ee=F;"function"!=typeof F&&({next:ee,error:V,complete:P}=F);const Ie=ee;return{next:Et=>Ie(Et&&Kn.getOrCreate(Et)),error:V,complete:P}}function cr(F,V){const P=function Xt(F,V){const P=lr();if(!P)return[];const ee=O.aD(xs,F,V);switch(P.getItem(ee)){case qn.NONE:return[O.N];case qn.LOCAL:return[O.i,O.a];case qn.SESSION:return[O.a];default:return[]}}(F,V);if(typeof self<"u"&&!P.includes(O.i)&&P.push(O.i),typeof window<"u")for(const ee of[O.b,O.a])P.includes(ee)||P.push(ee);return P.includes(O.N)||P.push(O.N),P}class Ln{constructor(){this.providerId="phone",this._delegate=new O.P(nr(H.Z.auth()))}static credential(V,P){return O.P.credential(V,P)}verifyPhoneNumber(V,P){return this._delegate.verifyPhoneNumber(V,P)}unwrap(){return this._delegate}}Ln.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ln.PROVIDER_ID=O.P.PROVIDER_ID;const ei=O.aA;class Jt{constructor(V,P,ee=H.Z.app()){var Ie;ei(null===(Ie=ee.options)||void 0===Ie?void 0:Ie.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new O.R(V,P,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(F){F.INTERNAL.registerComponent(new Ee.wA("auth-compat",V=>{const P=V.getProvider("app-compat").getImmediate(),ee=V.getProvider("auth");return new rr(P,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Ln,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Jt,TwitterAuthProvider:O.Z,Auth:rr,AuthCredential:O.J,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}(H.Z)},5861:(mt,Ae,L)=>{function f(O,J,ae,ve,Ee,xe,we){try{var z=O[xe](we),q=z.value}catch(ie){return void ae(ie)}z.done?J(q):Promise.resolve(q).then(ve,Ee)}function H(O){return function(){var J=this,ae=arguments;return new Promise(function(ve,Ee){var xe=O.apply(J,ae);function we(q){f(xe,ve,Ee,we,z,"next",q)}function z(q){f(xe,ve,Ee,we,z,"throw",q)}we(void 0)})}}L.d(Ae,{Z:()=>H})},7582:(mt,Ae,L)=>{function J(he,me){var be={};for(var de in he)Object.prototype.hasOwnProperty.call(he,de)&&me.indexOf(de)<0&&(be[de]=he[de]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(de=Object.getOwnPropertySymbols(he);Se<de.length;Se++)me.indexOf(de[Se])<0&&Object.prototype.propertyIsEnumerable.call(he,de[Se])&&(be[de[Se]]=he[de[Se]])}return be}function ie(he,me,be,de){return new(be||(be=Promise))(function(je,Je){function ut(an){try{At(de.next(an))}catch(Ut){Je(Ut)}}function fn(an){try{At(de.throw(an))}catch(Ut){Je(Ut)}}function At(an){an.done?je(an.value):function Se(je){return je instanceof be?je:new be(function(Je){Je(je)})}(an.value).then(ut,fn)}At((de=de.apply(he,me||[])).next())})}function re(he){return this instanceof re?(this.v=he,this):new re(he)}function De(he,me,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,de=be.apply(he,me||[]),je=[];return Se={},Je("next"),Je("throw"),Je("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function Je(gn){de[gn]&&(Se[gn]=function(Hn){return new Promise(function(On,pn){je.push([gn,Hn,On,pn])>1||ut(gn,Hn)})})}function ut(gn,Hn){try{!function fn(gn){gn.value instanceof re?Promise.resolve(gn.value.v).then(At,an):Ut(je[0][2],gn)}(de[gn](Hn))}catch(On){Ut(je[0][3],On)}}function At(gn){ut("next",gn)}function an(gn){ut("throw",gn)}function Ut(gn,Hn){gn(Hn),je.shift(),je.length&&ut(je[0][0],je[0][1])}}function ye(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,me=he[Symbol.asyncIterator];return me?me.call(he):(he=function Oe(he){var me="function"==typeof Symbol&&Symbol.iterator,be=me&&he[me],de=0;if(be)return be.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&de>=he.length&&(he=void 0),{value:he&&he[de++],done:!he}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),be={},de("next"),de("throw"),de("return"),be[Symbol.asyncIterator]=function(){return this},be);function de(je){be[je]=he[je]&&function(Je){return new Promise(function(ut,fn){!function Se(je,Je,ut,fn){Promise.resolve(fn).then(function(At){je({value:At,done:ut})},Je)}(ut,fn,(Je=he[je](Je)).done,Je.value)})}}}L.d(Ae,{FC:()=>De,KL:()=>ye,_T:()=>J,mG:()=>ie,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{mt(mt.s=1024)}]);